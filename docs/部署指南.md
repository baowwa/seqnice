# ArkOne SeqNice 部署指南

## 项目概述

ArkOne SeqNice 是一个基于 React + TypeScript + Vite 构建的现代化测序数据管理系统，支持多种部署方式。

## 部署方式

### 1. GitHub Pages 部署（推荐）

#### 自动部署
项目已配置 GitHub Actions 自动部署，每次推送到 `main` 分支时会自动触发部署。

**访问地址：** `https://baowwa.github.io/seqnice/`

#### 配置说明
- **源码仓库：** `https://github.com/baowwa/seqnice.git`
- **部署分支：** `main`
- **构建工具：** Vite
- **部署方式：** GitHub Actions

#### 关键配置文件
1. **GitHub Actions 配置：** `.github/workflows/deploy.yml`
2. **Vite 配置：** `vite.config.ts` (包含 `base: '/seqnice/'` 配置)

### 2. Surge.sh 部署

#### 快速部署
```bash
# 方式一：使用部署脚本
./deploy.sh

# 方式二：使用 npm 命令
npm run deploy

# 方式三：使用 Surge 命令
npm run build
cd dist
surge . seqnice.surge.sh
```

**访问地址：** `https://seqnice.surge.sh`

#### Surge.sh 管理
```bash
# 查看已部署的项目
surge list

# 删除部署
surge teardown seqnice.surge.sh

# 查看当前用户
surge whoami

# 登出
surge logout
```

## 本地开发

### 环境要求
- Node.js 18+
- npm 或 yarn

### 开发命令
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建项目
npm run build

# 预览构建结果
npm run preview
```

**本地访问地址：** `http://localhost:3000`

## 项目结构

```
arkone-seqnice/
├── .github/workflows/     # GitHub Actions 配置
├── docs/                  # 项目文档
├── src/                   # 源代码
├── dist/                  # 构建输出
├── public/                # 静态资源
├── deploy.sh              # Surge.sh 部署脚本
├── vite.config.ts         # Vite 配置
└── package.json           # 项目配置
```

## 部署配置详解

### GitHub Actions 配置
```yaml
# .github/workflows/deploy.yml
name: Deploy to GitHub Pages
on:
  push:
    branches: [ main, master ]

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Build
      run: npm run build
      
    - name: Setup Pages
      uses: actions/configure-pages@v4
      
    - name: Upload artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: './dist'
        
    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4
```

### Vite 配置
```typescript
// vite.config.ts
export default defineConfig({
  plugins: [react()],
  base: '/seqnice/',  // GitHub Pages 路径配置
  // ...其他配置
})
```

## 常见问题

### 1. GitHub Pages 404 错误
**原因：** Vite 配置缺少 `base` 路径设置
**解决：** 确保 `vite.config.ts` 中包含 `base: '/seqnice/'`

### 2. Surge.sh 部署失败
**原因：** 可能是网络问题或认证问题
**解决：** 
```bash
# 重新登录
surge logout
surge login

# 重新部署
./deploy.sh
```

### 3. 构建失败
**原因：** 依赖问题或代码错误
**解决：**
```bash
# 清理并重新安装依赖
rm -rf node_modules package-lock.json
npm install

# 重新构建
npm run build
```

## 更新部署

### GitHub Pages
推送代码到 `main` 分支即可自动部署：
```bash
git add .
git commit -m "更新内容"
git push origin main
```

### Surge.sh
使用部署脚本或命令：
```bash
./deploy.sh
# 或
npm run deploy
```

## 访问地址汇总

- **GitHub Pages：** https://baowwa.github.io/seqnice/
- **Surge.sh：** https://seqnice.surge.sh
- **本地开发：** http://localhost:3000

## 技术栈

- **前端框架：** React 18
- **开发语言：** TypeScript
- **构建工具：** Vite
- **UI 组件库：** Ant Design
- **路由管理：** React Router
- **状态管理：** Zustand
- **样式方案：** CSS Modules + Ant Design

## 联系方式

如有问题，请通过以下方式联系：
- GitHub Issues: https://github.com/baowwa/seqnice/issues
- 项目维护者：baowwa