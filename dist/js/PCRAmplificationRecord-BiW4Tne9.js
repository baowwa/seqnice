import{j as e}from"./index-COXhhZpd.js";import{r as i}from"./react-vendor-BSBC8BLg.js";import{$ as s,a as n,c as l,d as t,T as r,aH as a,S as d,B as c,ar as o,a1 as m,Q as x,aE as h,Z as j,G as p,aR as u,am as y,X as g,n as f,az as v,A as C,a2 as I,a9 as w,V as b,aS as S,af as T,a4 as P,aI as k,ac as R,a5 as z,a3 as q,at as F,l as _,b as M,D as V,ai as B,al as A,ag as E,aq as L,ah as G,s as N,a7 as Y,O}from"./antd-vendor-BuqAAsAf.js";const{Title:D,Text:H,Paragraph:$}=r,{Option:K}=P,{TextArea:Q}=q,{TabPane:J}=y,{Panel:X}=k,{Step:Z}=Y,U=()=>{const[r,Y]=i.useState(!1),[$,Z]=i.useState("basic"),[U,W]=i.useState([]),[ee,ie]=i.useState(null),[se,ne]=i.useState([]),[le,te]=i.useState([]),[re,ae]=i.useState(null),[de,ce]=i.useState(!1),[oe,me]=i.useState(!1),[xe,he]=i.useState(!1),[je,pe]=i.useState(!1),[ue,ye]=i.useState(!1),[ge,fe]=i.useState(!1),[ve]=s.useForm(),[Ce]=s.useForm(),[Ie]=s.useForm(),[we]=s.useForm(),[be]=s.useForm(),[Se]=s.useForm(),Te=[{id:"pcr_record_001",sampleId:"sample_001",sampleCode:"S001",sampleName:"土壤样本-1",wellPosition:"A1",templateVolume:2,templateConcentration:125.6,dilutionFactor:10,amplificationSuccess:!0,ctValue:28.5,amplificationEfficiency:95.2,meltingTemperature:82.3,productSize:450,gelLane:1,bandIntensity:"strong",qcStatus:"pass",operator:"张实验员",recordTime:"2024-01-16 14:30:00",verified:!0,notes:"PCR扩增成功，产物大小正确"},{id:"pcr_record_002",sampleId:"sample_002",sampleCode:"S002",sampleName:"水样-1",wellPosition:"A2",templateVolume:2,templateConcentration:98.3,dilutionFactor:5,amplificationSuccess:!0,ctValue:31.2,amplificationEfficiency:88.7,meltingTemperature:82.1,productSize:450,gelLane:2,bandIntensity:"medium",qcStatus:"pass",operator:"张实验员",recordTime:"2024-01-16 14:30:00",verified:!0,notes:"PCR扩增成功，信号中等"}],Pe={batchId:"pcr_batch_001",pcrType:"standard",targetGene:"16S rRNA",primerPair:"27F/1492R",forwardPrimer:"27F",reversePrimer:"1492R",expectedProductSize:1465,reactionVolume:25,components:[{id:"comp_001",name:"2×Taq Master Mix",concentration:"2×",volume:12.5,finalConcentration:"1×",lot:"LOT20240115"},{id:"comp_002",name:"Forward Primer",concentration:"10 μM",volume:1,finalConcentration:"0.4 μM",lot:"LOT20240112"},{id:"comp_003",name:"Reverse Primer",concentration:"10 μM",volume:1,finalConcentration:"0.4 μM",lot:"LOT20240112"},{id:"comp_004",name:"ddH2O",concentration:"-",volume:8.5,finalConcentration:"-"},{id:"comp_005",name:"Template DNA",concentration:"Variable",volume:2,finalConcentration:"10-100 ng"}],program:[{id:"step_001",stepName:"初始变性",temperature:95,duration:"5 min",cycles:1},{id:"step_002",stepName:"变性",temperature:95,duration:"30 s",cycles:35},{id:"step_003",stepName:"退火",temperature:55,duration:"30 s",cycles:35},{id:"step_004",stepName:"延伸",temperature:72,duration:"90 s",cycles:35},{id:"step_005",stepName:"最终延伸",temperature:72,duration:"10 min",cycles:1}],equipment:"Bio-Rad T100",equipmentModel:"T100 Thermal Cycler",plateType:"96-well",environmentalConditions:{temperature:22,humidity:45,pressure:1013},operator:"张实验员",startTime:"2024-01-16 13:00:00",estimatedEndTime:"2024-01-16 16:30:00",notes:"标准PCR扩增流程，注意避免污染"},ke=[{id:"primer_001",name:"27F",type:"forward",sequence:"AGAGTTTGATCMTGGCTCAG",length:20,tm:52.1,gc:50,concentration:"10 μM",lot:"LOT20240112",supplier:"Sangon Biotech"},{id:"primer_002",name:"1492R",type:"reverse",sequence:"TACGGYTACCTTGTTACGACTT",length:22,tm:54.3,gc:45.5,concentration:"10 μM",lot:"LOT20240112",supplier:"Sangon Biotech"}];i.useEffect(()=>{Y(!0),setTimeout(()=>{W(Te),ie(Pe),ne(ke),Y(!1)},1e3)},[]);const Re=e=>({pass:"success",warning:"warning",fail:"error",pending:"default"}[e]||"default"),ze=e=>({pass:"通过",warning:"警告",fail:"失败",pending:"待检"}[e]||e),qe=e=>({strong:"#52c41a",medium:"#faad14",weak:"#ff7a45",none:"#ff4d4f"}[e||"none"]||"#d9d9d9"),Fe=e=>{ae(e||null),e?Ce.setFieldsValue({...e,recordTime:O(e.recordTime)}):Ce.resetFields(),ce(!0)},_e=[{title:"样本编号",dataIndex:"sampleCode",key:"sampleCode",width:100,fixed:"left"},{title:"样本名称",dataIndex:"sampleName",key:"sampleName",width:150},{title:"孔位",dataIndex:"wellPosition",key:"wellPosition",width:80},{title:"模板体积(μL)",dataIndex:"templateVolume",key:"templateVolume",width:100},{title:"模板浓度(ng/μL)",dataIndex:"templateConcentration",key:"templateConcentration",width:120,render:e=>e.toFixed(1)},{title:"扩增成功",dataIndex:"amplificationSuccess",key:"amplificationSuccess",width:100,render:i=>e.jsx(g,{color:i?"success":"error",children:i?"成功":"失败"})},{title:"Ct值",dataIndex:"ctValue",key:"ctValue",width:80,render:i=>i?e.jsx("span",{style:{color:i>35?"#ff4d4f":"#52c41a"},children:i.toFixed(1)}):"-"},{title:"扩增效率(%)",dataIndex:"amplificationEfficiency",key:"amplificationEfficiency",width:100,render:i=>i?e.jsxs("span",{style:{color:i<80?"#ff4d4f":"#52c41a"},children:[i.toFixed(1),"%"]}):"-"},{title:"熔解温度(°C)",dataIndex:"meltingTemperature",key:"meltingTemperature",width:100,render:e=>e?e.toFixed(1):"-"},{title:"产物大小(bp)",dataIndex:"productSize",key:"productSize",width:100},{title:"条带强度",dataIndex:"bandIntensity",key:"bandIntensity",width:100,render:i=>e.jsx(g,{color:qe(i),children:"strong"===i?"强":"medium"===i?"中":"weak"===i?"弱":"无"})},{title:"质控状态",dataIndex:"qcStatus",key:"qcStatus",width:100,render:i=>e.jsx(g,{color:Re(i),children:ze(i)})},{title:"验证状态",dataIndex:"verified",key:"verified",width:100,render:i=>e.jsx(g,{color:i?"success":"warning",children:i?"已验证":"待验证"})},{title:"操作",key:"action",width:150,fixed:"right",render:(i,s)=>{const n=(e=>{const i=[];if(e.ctValue&&e.ctValue>35&&i.push("Ct值过高，可能存在扩增效率问题"),e.amplificationEfficiency&&e.amplificationEfficiency<80&&i.push("扩增效率过低，建议检查引物和反应条件"),e.meltingTemperature&&ee){const s=82;Math.abs(e.meltingTemperature-s)>2&&i.push("熔解温度异常，可能存在非特异性扩增")}if(e.productSize&&ee){const s=ee.expectedProductSize;Math.abs(e.productSize-s)>50&&i.push("产物大小异常，可能存在非特异性扩增")}return{valid:0===i.length,errors:i}})(s);return e.jsxs(d,{children:[e.jsx(E,{title:n.valid?"数据正常":n.errors.join("; "),children:e.jsx(c,{type:"link",size:"small",icon:n.valid?e.jsx(j,{}):e.jsx(L,{}),style:{color:n.valid?"#52c41a":"#ff4d4f"}})}),e.jsx(c,{type:"link",size:"small",icon:e.jsx(G,{}),onClick:()=>Fe(s),children:"查看"}),e.jsx(c,{type:"link",size:"small",icon:e.jsx(B,{}),onClick:()=>Fe(s),children:"编辑"})]})}}],Me=[{title:"组分名称",dataIndex:"name",key:"name"},{title:"浓度",dataIndex:"concentration",key:"concentration"},{title:"体积(μL)",dataIndex:"volume",key:"volume"},{title:"终浓度",dataIndex:"finalConcentration",key:"finalConcentration"},{title:"批号",dataIndex:"lot",key:"lot"},{title:"操作",key:"action",render:(i,s)=>e.jsxs(d,{children:[e.jsx(c,{type:"link",size:"small",icon:e.jsx(B,{}),children:"编辑"}),e.jsx(c,{type:"link",size:"small",icon:e.jsx(A,{}),danger:!0,children:"删除"})]})}],Ve=[{title:"步骤",dataIndex:"stepName",key:"stepName"},{title:"温度(°C)",dataIndex:"temperature",key:"temperature"},{title:"时间",dataIndex:"duration",key:"duration"},{title:"循环数",dataIndex:"cycles",key:"cycles"},{title:"升温速率(°C/s)",dataIndex:"rampRate",key:"rampRate"},{title:"操作",key:"action",render:(i,s)=>e.jsxs(d,{children:[e.jsx(c,{type:"link",size:"small",icon:e.jsx(B,{}),children:"编辑"}),e.jsx(c,{type:"link",size:"small",icon:e.jsx(A,{}),danger:!0,children:"删除"})]})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(n,{style:{marginBottom:24},children:e.jsxs(l,{gutter:16,align:"middle",children:[e.jsxs(t,{span:18,children:[e.jsxs(D,{level:3,style:{margin:0},children:[e.jsx(a,{style:{marginRight:8}}),"PCR扩增步骤记录"]}),e.jsx(H,{type:"secondary",children:"🧬 详细记录PCR扩增过程中的反应体系、程序参数和结果数据"})]}),e.jsx(t,{span:6,style:{textAlign:"right"},children:e.jsxs(d,{children:[e.jsx(c,{icon:e.jsx(o,{}),onClick:()=>ye(!0),children:"快速记录"}),e.jsx(c,{type:"primary",icon:e.jsx(m,{}),onClick:()=>Fe(),children:"新增记录"})]})})]})}),e.jsxs(l,{gutter:16,style:{marginBottom:24},children:[e.jsx(t,{span:6,children:e.jsx(n,{children:e.jsx(x,{title:"总样本数",value:U.length,suffix:"个",valueStyle:{color:"#1890ff"},prefix:e.jsx(h,{})})})}),e.jsx(t,{span:6,children:e.jsx(n,{children:e.jsx(x,{title:"扩增成功",value:U.filter(e=>e.amplificationSuccess).length,suffix:"个",valueStyle:{color:"#52c41a"},prefix:e.jsx(j,{})})})}),e.jsx(t,{span:6,children:e.jsx(n,{children:e.jsx(x,{title:"平均Ct值",value:U.length>0?(U.filter(e=>e.ctValue).reduce((e,i)=>e+(i.ctValue||0),0)/U.filter(e=>e.ctValue).length).toFixed(1):0,valueStyle:{color:"#722ed1"},prefix:e.jsx(p,{})})})}),e.jsx(t,{span:6,children:e.jsx(n,{children:e.jsx(x,{title:"平均扩增效率",value:U.length>0?(U.filter(e=>e.amplificationEfficiency).reduce((e,i)=>e+(i.amplificationEfficiency||0),0)/U.filter(e=>e.amplificationEfficiency).length).toFixed(1):0,suffix:"%",valueStyle:{color:"#fa8c16"},prefix:e.jsx(u,{})})})})]}),e.jsx(n,{children:e.jsxs(y,{activeKey:$,onChange:Z,children:[e.jsx(J,{tab:"基本信息",children:e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:16,children:e.jsx(n,{title:"批次PCR参数",size:"small",extra:e.jsx(c,{type:"link",icon:e.jsx(f,{}),onClick:()=>me(!0),children:"设置参数"}),children:ee&&e.jsxs(l,{gutter:16,children:[e.jsxs(t,{span:12,children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"PCR类型："}),e.jsx(g,{color:"blue",children:(Be=ee.pcrType,{standard:"标准PCR",nested:"巢式PCR",multiplex:"多重PCR",qpcr:"实时定量PCR",rt_pcr:"逆转录PCR"}[Be]||Be)})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"目标基因："}),e.jsx(H,{children:ee.targetGene})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"引物对："}),e.jsx(H,{children:ee.primerPair})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"正向引物："}),e.jsx(H,{children:ee.forwardPrimer})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"反向引物："}),e.jsx(H,{children:ee.reversePrimer})]})]}),e.jsxs(t,{span:12,children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"预期产物大小："}),e.jsxs(H,{children:[ee.expectedProductSize," bp"]})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"反应体积："}),e.jsxs(H,{children:[ee.reactionVolume," μL"]})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"PCR仪："}),e.jsx(H,{children:ee.equipment})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"板型："}),e.jsx(H,{children:ee.plateType})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"操作员："}),e.jsx(H,{children:ee.operator})]})]})]})})}),e.jsxs(t,{span:8,children:[e.jsx(n,{title:"引物信息",size:"small",children:e.jsx(v,{size:"small",dataSource:se,renderItem:i=>e.jsx(v.Item,{children:e.jsx(v.Item.Meta,{avatar:e.jsx(C,{style:{backgroundColor:"forward"===i.type?"#52c41a":"#1890ff"},children:"forward"===i.type?"F":"R"}),title:i.name,description:e.jsxs("div",{children:[e.jsxs("div",{children:["长度: ",i.length," bp"]}),e.jsxs("div",{children:["Tm: ",i.tm,"°C"]}),e.jsxs("div",{children:["GC: ",i.gc,"%"]})]})})})})}),e.jsx(n,{title:"环境条件",size:"small",style:{marginTop:16},children:(null==ee?void 0:ee.environmentalConditions)&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"温度："}),e.jsxs(H,{children:[ee.environmentalConditions.temperature,"°C"]})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"湿度："}),e.jsxs(H,{children:[ee.environmentalConditions.humidity,"%"]})]}),ee.environmentalConditions.pressure&&e.jsxs("div",{style:{marginBottom:8},children:[e.jsx(H,{strong:!0,children:"气压："}),e.jsxs(H,{children:[ee.environmentalConditions.pressure,"hPa"]})]})]})})]})]})},"basic"),e.jsx(J,{tab:"反应体系",children:e.jsxs(d,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:18,children:e.jsxs(d,{children:[e.jsx(c,{type:"primary",icon:e.jsx(m,{}),onClick:()=>pe(!0),children:"添加组分"}),e.jsx(c,{icon:e.jsx(I,{}),children:"导入配方"}),e.jsx(c,{icon:e.jsx(w,{}),children:"导出配方"})]})}),e.jsx(t,{span:6,style:{textAlign:"right"},children:e.jsxs(H,{strong:!0,children:["总体积: ",(null==ee?void 0:ee.reactionVolume)||0," μL"]})})]}),e.jsx(b,{size:"small",dataSource:(null==ee?void 0:ee.components)||[],columns:Me,rowKey:"id",pagination:!1}),e.jsx(n,{title:"反应体系总结",size:"small",children:e.jsxs(l,{gutter:16,children:[e.jsxs(t,{span:12,children:[e.jsx(H,{strong:!0,children:"主要组分："}),e.jsx("ul",{children:null==ee?void 0:ee.components.map(i=>e.jsxs("li",{children:[i.name,": ",i.volume," μL (",i.finalConcentration||i.concentration,")"]},i.id))})]}),e.jsxs(t,{span:12,children:[e.jsx(H,{strong:!0,children:"质量控制："}),e.jsxs("ul",{children:[e.jsx("li",{children:"阳性对照: 已知阳性样本"}),e.jsx("li",{children:"阴性对照: ddH2O"}),e.jsx("li",{children:"空白对照: 无模板对照"})]})]})]})})]})},"reaction"),e.jsx(J,{tab:"PCR程序",children:e.jsxs(d,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:18,children:e.jsxs(d,{children:[e.jsx(c,{type:"primary",icon:e.jsx(m,{}),onClick:()=>he(!0),children:"添加步骤"}),e.jsx(c,{icon:e.jsx(I,{}),children:"导入程序"}),e.jsx(c,{icon:e.jsx(w,{}),children:"导出程序"})]})}),e.jsx(t,{span:6,style:{textAlign:"right"},children:e.jsxs(H,{strong:!0,children:["预计时间: ",ee?"3小时30分钟":"-"]})})]}),e.jsx(b,{size:"small",dataSource:(null==ee?void 0:ee.program)||[],columns:Ve,rowKey:"id",pagination:!1}),e.jsx(n,{title:"程序可视化",size:"small",children:e.jsx("div",{style:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(H,{type:"secondary",children:"PCR程序温度曲线图"})})})]})},"program"),e.jsx(J,{tab:"样本记录",children:e.jsxs(d,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:18,children:e.jsxs(d,{children:[e.jsx(c,{type:"primary",icon:e.jsx(m,{}),onClick:()=>Fe(),children:"新增记录"}),e.jsx(c,{icon:e.jsx(S,{}),onClick:()=>fe(!0),children:"样本分配"}),e.jsx(c,{icon:e.jsx(I,{}),children:"导入数据"}),e.jsx(c,{icon:e.jsx(w,{}),children:"导出数据"}),e.jsx(c,{icon:e.jsx(T,{}),children:"打印报告"})]})}),e.jsx(t,{span:6,style:{textAlign:"right"},children:e.jsxs(P,{placeholder:"筛选状态",style:{width:120},allowClear:!0,children:[e.jsx(K,{value:"pass",children:"通过"}),e.jsx(K,{value:"warning",children:"警告"}),e.jsx(K,{value:"fail",children:"失败"}),e.jsx(K,{value:"pending",children:"待检"})]})})]}),e.jsx(b,{size:"small",dataSource:U,columns:_e,rowKey:"id",scroll:{x:1600},pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},rowSelection:{selectedRowKeys:le,onChange:te}})]})},"samples"),e.jsxs(J,{tab:"质量控制",children:[e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(n,{title:"扩增统计",size:"small",children:e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:6,children:e.jsx(x,{title:"成功率",value:U.length>0?(U.filter(e=>e.amplificationSuccess).length/U.length*100).toFixed(1):0,suffix:"%",valueStyle:{color:"#52c41a"}})}),e.jsx(t,{span:6,children:e.jsx(x,{title:"强条带",value:U.filter(e=>"strong"===e.bandIntensity).length,valueStyle:{color:"#52c41a"}})}),e.jsx(t,{span:6,children:e.jsx(x,{title:"中等条带",value:U.filter(e=>"medium"===e.bandIntensity).length,valueStyle:{color:"#faad14"}})}),e.jsx(t,{span:6,children:e.jsx(x,{title:"弱条带",value:U.filter(e=>"weak"===e.bandIntensity).length,valueStyle:{color:"#ff7a45"}})})]})})}),e.jsx(t,{span:12,children:e.jsx(n,{title:"质控趋势",size:"small",children:e.jsx("div",{style:{height:200,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(H,{type:"secondary",children:"扩增效率趋势图表"})})})})]}),e.jsx(n,{title:"质控详情",size:"small",style:{marginTop:16},children:e.jsxs(k,{children:[e.jsxs(X,{header:"扩增效率质控",children:[e.jsx(R,{message:"扩增效率质控标准",description:"PCR扩增效率应在80-110%范围内，低于80%需要检查引物设计和反应条件",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx(v,{size:"small",dataSource:U.filter(e=>e.amplificationEfficiency&&e.amplificationEfficiency<80),renderItem:i=>{var s;return e.jsxs(v.Item,{children:[e.jsx(v.Item.Meta,{avatar:e.jsx(C,{style:{backgroundColor:"#ff4d4f"},children:i.sampleCode}),title:`${i.sampleName} - ${null==(s=i.amplificationEfficiency)?void 0:s.toFixed(1)}%`,description:"扩增效率过低"}),e.jsx(g,{color:"error",children:"异常"})]})}})]},"efficiency"),e.jsxs(X,{header:"特异性质控",children:[e.jsx(R,{message:"特异性质控标准",description:"熔解温度应在预期范围内(±2°C)，产物大小应与预期一致(±50bp)",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsx(v,{size:"small",dataSource:U.filter(e=>{const i=(null==ee?void 0:ee.expectedProductSize)||0;return e.meltingTemperature&&Math.abs(e.meltingTemperature-82)>2||e.productSize&&Math.abs(e.productSize-i)>50}),renderItem:i=>{var s;return e.jsxs(v.Item,{children:[e.jsx(v.Item.Meta,{avatar:e.jsx(C,{style:{backgroundColor:"#faad14"},children:i.sampleCode}),title:`${i.sampleName}`,description:e.jsxs("div",{children:[e.jsxs("div",{children:["熔解温度: ",null==(s=i.meltingTemperature)?void 0:s.toFixed(1),"°C"]}),e.jsxs("div",{children:["产物大小: ",i.productSize," bp"]})]})}),e.jsx(g,{color:"warning",children:"特异性异常"})]})}})]},"specificity")]})})]},"qc")]})}),e.jsx(z,{title:re?"编辑PCR记录":"新增PCR记录",open:de,onCancel:()=>{ce(!1),ae(null),Ce.resetFields()},onOk:()=>Ce.submit(),confirmLoading:r,width:800,children:e.jsxs(s,{form:Ce,layout:"vertical",onFinish:async e=>{try{Y(!0),await new Promise(e=>setTimeout(e,1e3));const i={...e,id:(null==re?void 0:re.id)||`pcr_record_${Date.now()}`,recordTime:e.recordTime.format("YYYY-MM-DD HH:mm:ss"),verified:!1};re?(W(e=>e.map(e=>e.id===re.id?i:e)),N.success("记录更新成功")):(W(e=>[...e,i]),N.success("记录添加成功")),ce(!1),ae(null),Ce.resetFields()}catch(i){N.error("保存失败，请重试")}finally{Y(!1)}},children:[e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"sampleCode",label:"样本编号",rules:[{required:!0,message:"请输入样本编号"}],children:e.jsx(q,{placeholder:"请输入样本编号"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"sampleName",label:"样本名称",rules:[{required:!0,message:"请输入样本名称"}],children:e.jsx(q,{placeholder:"请输入样本名称"})})})]}),e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"wellPosition",label:"孔位",rules:[{required:!0,message:"请输入孔位"}],children:e.jsx(q,{placeholder:"如：A1"})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"templateVolume",label:"模板体积(μL)",rules:[{required:!0,message:"请输入模板体积"}],children:e.jsx(F,{placeholder:"请输入模板体积",min:0,precision:1,style:{width:"100%"}})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"templateConcentration",label:"模板浓度(ng/μL)",rules:[{required:!0,message:"请输入模板浓度"}],children:e.jsx(F,{placeholder:"请输入模板浓度",min:0,precision:1,style:{width:"100%"}})})})]}),e.jsx(_,{children:"PCR结果"}),e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"amplificationSuccess",label:"扩增成功",rules:[{required:!0,message:"请选择扩增结果"}],children:e.jsxs(M.Group,{children:[e.jsx(M,{value:!0,children:"成功"}),e.jsx(M,{value:!1,children:"失败"})]})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"ctValue",label:"Ct值",children:e.jsx(F,{placeholder:"请输入Ct值",min:0,max:50,precision:1,style:{width:"100%"}})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"amplificationEfficiency",label:"扩增效率(%)",children:e.jsx(F,{placeholder:"请输入扩增效率",min:0,max:200,precision:1,style:{width:"100%"}})})})]}),e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"meltingTemperature",label:"熔解温度(°C)",children:e.jsx(F,{placeholder:"请输入熔解温度",min:0,max:100,precision:1,style:{width:"100%"}})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"productSize",label:"产物大小(bp)",children:e.jsx(F,{placeholder:"请输入产物大小",min:0,style:{width:"100%"}})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"bandIntensity",label:"条带强度",children:e.jsxs(P,{placeholder:"请选择条带强度",children:[e.jsx(K,{value:"strong",children:"强"}),e.jsx(K,{value:"medium",children:"中"}),e.jsx(K,{value:"weak",children:"弱"}),e.jsx(K,{value:"none",children:"无"})]})})})]}),e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"qcStatus",label:"质控状态",rules:[{required:!0,message:"请选择质控状态"}],children:e.jsxs(P,{placeholder:"请选择质控状态",children:[e.jsx(K,{value:"pass",children:"通过"}),e.jsx(K,{value:"warning",children:"警告"}),e.jsx(K,{value:"fail",children:"失败"}),e.jsx(K,{value:"pending",children:"待检"})]})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"operator",label:"操作员",rules:[{required:!0,message:"请输入操作员"}],children:e.jsx(q,{placeholder:"请输入操作员"})})})]}),e.jsx(s.Item,{name:"notes",label:"备注",children:e.jsx(Q,{rows:3,placeholder:"请输入备注信息"})})]})}),e.jsx(z,{title:"批次PCR参数设置",open:oe,onCancel:()=>me(!1),onOk:()=>Ie.submit(),confirmLoading:r,width:800,children:e.jsxs(s,{form:Ie,layout:"vertical",onFinish:async e=>{try{Y(!0),await new Promise(e=>setTimeout(e,1e3)),ie({...e,startTime:e.startTime.format("YYYY-MM-DD HH:mm:ss"),estimatedEndTime:e.estimatedEndTime.format("YYYY-MM-DD HH:mm:ss"),components:(null==ee?void 0:ee.components)||[],program:(null==ee?void 0:ee.program)||[]}),N.success("批次参数设置成功"),me(!1)}catch(i){N.error("设置失败，请重试")}finally{Y(!1)}},initialValues:ee,children:[e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"pcrType",label:"PCR类型",rules:[{required:!0,message:"请选择PCR类型"}],children:e.jsxs(P,{placeholder:"请选择PCR类型",children:[e.jsx(K,{value:"standard",children:"标准PCR"}),e.jsx(K,{value:"nested",children:"巢式PCR"}),e.jsx(K,{value:"multiplex",children:"多重PCR"}),e.jsx(K,{value:"qpcr",children:"实时定量PCR"}),e.jsx(K,{value:"rt_pcr",children:"逆转录PCR"})]})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"targetGene",label:"目标基因",rules:[{required:!0,message:"请输入目标基因"}],children:e.jsx(q,{placeholder:"请输入目标基因"})})})]}),e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"forwardPrimer",label:"正向引物",rules:[{required:!0,message:"请输入正向引物"}],children:e.jsx(q,{placeholder:"请输入正向引物"})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"reversePrimer",label:"反向引物",rules:[{required:!0,message:"请输入反向引物"}],children:e.jsx(q,{placeholder:"请输入反向引物"})})}),e.jsx(t,{span:8,children:e.jsx(s.Item,{name:"expectedProductSize",label:"预期产物大小(bp)",rules:[{required:!0,message:"请输入预期产物大小"}],children:e.jsx(F,{placeholder:"请输入预期产物大小",min:50,max:1e4,style:{width:"100%"}})})})]}),e.jsxs(l,{gutter:16,children:[e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"equipment",label:"PCR仪",rules:[{required:!0,message:"请输入PCR仪"}],children:e.jsx(q,{placeholder:"请输入PCR仪"})})}),e.jsx(t,{span:12,children:e.jsx(s.Item,{name:"operator",label:"操作员",rules:[{required:!0,message:"请输入操作员"}],children:e.jsx(q,{placeholder:"请输入操作员"})})})]}),e.jsx(s.Item,{name:"notes",label:"备注",children:e.jsx(Q,{rows:3,placeholder:"请输入备注信息"})})]})}),e.jsx(V,{title:"快速记录",placement:"right",width:400,open:ue,onClose:()=>ye(!1),children:e.jsxs(s,{form:Se,layout:"vertical",onFinish:async e=>{try{Y(!0),await new Promise(e=>setTimeout(e,500)),N.success("快速记录成功"),ye(!1),Se.resetFields()}catch(i){N.error("记录失败，请重试")}finally{Y(!1)}},children:[e.jsx(s.Item,{name:"sampleCode",label:"样本编号",rules:[{required:!0,message:"请输入样本编号"}],children:e.jsx(q,{placeholder:"扫描或输入样本编号"})}),e.jsx(s.Item,{name:"wellPosition",label:"孔位",rules:[{required:!0,message:"请输入孔位"}],children:e.jsx(q,{placeholder:"如：A1"})}),e.jsx(s.Item,{name:"ctValue",label:"Ct值",children:e.jsx(F,{placeholder:"请输入Ct值",min:0,max:50,precision:1,style:{width:"100%"}})}),e.jsx(s.Item,{name:"bandIntensity",label:"条带强度",children:e.jsxs(P,{placeholder:"请选择条带强度",children:[e.jsx(K,{value:"strong",children:"强"}),e.jsx(K,{value:"medium",children:"中"}),e.jsx(K,{value:"weak",children:"弱"}),e.jsx(K,{value:"none",children:"无"})]})}),e.jsx(s.Item,{name:"notes",label:"备注",children:e.jsx(Q,{rows:2,placeholder:"请输入备注信息"})}),e.jsx(s.Item,{children:e.jsx(c,{type:"primary",htmlType:"submit",loading:r,block:!0,children:"保存记录"})})]})})]});var Be};export{U as default};
