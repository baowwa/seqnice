import{j as e}from"./index-BUaa-MK4.js";import{r as s}from"./react-vendor-By8n_QN6.js";import{_ as t,c as a,d as l,a as i,P as n,z as r,aX as d,ap as c,S as o,a0 as m,a1 as h,B as x,a2 as p,U as u,N as j,af as y,a3 as g,a4 as I,ah as v,W as f,ao as w,X as b,l as S,T,aw as C,aY as D,s as N,au as _,a7 as A,a9 as q,G as k,aa as z,aq as R,ar as M,ab as F,ac as P,aD as L}from"./antd-vendor-Cii6xr0v.js";const{Option:Y}=h,{TextArea:Z}=m,{TabPane:H}=c,{Panel:B}=L,{Text:O,Title:U}=T,E=()=>{const[T,L]=s.useState([]),[B,E]=s.useState([]),[$,V]=s.useState(!1),[G,K]=s.useState(!1),[Q,X]=s.useState(!1),[J,W]=s.useState(!1),[ee,se]=s.useState(null),[te,ae]=s.useState(null),[le]=t.useForm(),[ie,ne]=s.useState(""),[re,de]=s.useState(""),[ce,oe]=s.useState(""),[me,he]=s.useState("tasks");s.useEffect(()=>{(async()=>{V(!0);try{await new Promise(e=>setTimeout(e,500)),L([{id:"1",name:"肠道菌群16S rRNA多样性分析",description:"基于16S rRNA基因的肠道菌群组成和多样性分析",type:"16s_analysis",status:"completed",priority:"high",batchId:"1",batchName:"肠道菌群测序批次-202401",sampleCount:20,samples:[{id:"1",sampleCode:"S001",sampleName:"肠道样本A",sampleType:"粪便",projectName:"肠道菌群多样性研究",clientName:"医科大学",receivedDate:"2024-01-15",status:"completed"},{id:"2",sampleCode:"S002",sampleName:"肠道样本B",sampleType:"粪便",projectName:"肠道菌群多样性研究",clientName:"医科大学",receivedDate:"2024-01-15",status:"completed"},{id:"3",sampleCode:"S003",sampleName:"肠道样本C",sampleType:"粪便",projectName:"肠道菌群多样性研究",clientName:"医科大学",receivedDate:"2024-01-15",status:"completed"}],analysisType:"diversity",pipeline:"QIIME2",parameters:{trimLength:250,qualityThreshold:20,clusteringMethod:"DADA2",taxonomyDatabase:"SILVA",rarefactionDepth:1e4},inputFiles:["raw_sequences_R1.fastq.gz","raw_sequences_R2.fastq.gz","metadata.txt"],outputFiles:["feature_table.qza","taxonomy.qza","phylogenetic_tree.qza","diversity_metrics.qza","alpha_diversity.tsv","beta_diversity.qza"],progress:100,startTime:"2024-01-20T09:00:00Z",endTime:"2024-01-22T15:30:00Z",estimatedDuration:2880,actualDuration:2430,assigneeId:"3",assigneeName:"王五",notes:"分析完成，结果质量良好",createdAt:"2024-01-20T09:00:00Z",updatedAt:"2024-01-22T15:30:00Z"},{id:"2",name:"土壤微生物宏基因组功能分析",description:"土壤样本宏基因组shotgun测序的功能基因分析",type:"metagenome_analysis",status:"in_progress",priority:"medium",batchId:"2",batchName:"土壤微生物宏基因组测序",sampleCount:12,samples:[{id:"4",sampleCode:"S004",sampleName:"土壤样本A",sampleType:"土壤",projectName:"土壤微生物功能研究",clientName:"农科院",receivedDate:"2024-01-20",status:"processing"},{id:"5",sampleCode:"S005",sampleName:"土壤样本B",sampleType:"土壤",projectName:"土壤微生物功能研究",clientName:"农科院",receivedDate:"2024-01-20",status:"processing"}],analysisType:"functional",pipeline:"MetaPhlAn3 + HUMAnN3",parameters:{minReadLength:50,qualityThreshold:25,hostGenome:"none",functionalDatabase:"UniRef90",pathwayDatabase:"MetaCyc"},inputFiles:["metagenome_R1.fastq.gz","metagenome_R2.fastq.gz"],outputFiles:["taxonomic_profile.txt","functional_profile.txt","pathway_abundance.txt"],progress:65,startTime:"2024-02-01T10:00:00Z",endTime:null,estimatedDuration:4320,actualDuration:null,assigneeId:"3",assigneeName:"王五",notes:"正在进行功能注释分析",createdAt:"2024-02-01T10:00:00Z",updatedAt:"2024-02-03T14:20:00Z"},{id:"3",name:"海洋微生物群落结构分析",description:"海水样本的16S+18S双重测序群落结构分析",type:"dual_analysis",status:"pending",priority:"high",batchId:"3",batchName:"海洋微生物多样性分析",sampleCount:30,analysisType:"community",pipeline:"QIIME2 + SILVA + PR2",parameters:{trimLength16S:250,trimLength18S:200,qualityThreshold:22,clusteringMethod:"DADA2",taxonomyDatabase16S:"SILVA",taxonomyDatabase18S:"PR2"},inputFiles:["16S_sequences_R1.fastq.gz","16S_sequences_R2.fastq.gz","18S_sequences_R1.fastq.gz","18S_sequences_R2.fastq.gz","sample_metadata.txt"],outputFiles:[],progress:0,startTime:null,endTime:null,estimatedDuration:3600,actualDuration:null,assigneeId:"4",assigneeName:"赵六",notes:"等待测序数据质控完成",createdAt:"2024-01-25T11:00:00Z",updatedAt:"2024-01-25T11:00:00Z"}])}catch(e){N.error("获取分析任务列表失败")}finally{V(!1)}})(),(async()=>{E([{id:"1",code:"EXP001",name:"肠道菌群测序批次-202401",description:"包含20个肠道菌群样本的16S rRNA测序",status:"completed",priority:"high",sampleCount:20,completedSamples:20,startDate:"2024-01-15",expectedEndDate:"2024-01-25",actualEndDate:"2024-01-23",currentStep:"completed",progress:100,operatorId:"1",operatorName:"张三",equipmentId:"1",equipmentName:"Illumina NovaSeq 6000",notes:"测序完成，数据质量优异",createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-23T16:00:00Z"}])})()},[]);const xe=e=>({pending:"orange",in_progress:"blue",completed:"green",failed:"red",paused:"gray"}[e]),pe=e=>({pending:"待开始",in_progress:"进行中",completed:"已完成",failed:"失败",paused:"暂停"}[e]),ue=e=>({high:"red",medium:"orange",low:"green"}[e]),je=e=>({high:"高",medium:"中",low:"低"}[e]),ye=e=>({"16s_analysis":"16S rRNA分析",metagenome_analysis:"宏基因组分析",dual_analysis:"双重测序分析",transcriptome_analysis:"转录组分析",comparative_analysis:"比较基因组分析"}[e]||e),ge=[{title:"任务名称",dataIndex:"name",key:"name",width:200,fixed:"left",ellipsis:{showTitle:!1},render:s=>e.jsx(A,{placement:"topLeft",title:s,children:s})},{title:"分析类型",dataIndex:"type",key:"type",width:120,render:s=>e.jsx(f,{color:"blue",children:ye(s)})},{title:"状态",dataIndex:"status",key:"status",width:100,render:s=>e.jsx(f,{color:xe(s),children:pe(s)})},{title:"优先级",dataIndex:"priority",key:"priority",width:80,render:s=>e.jsx(f,{color:ue(s),children:je(s)})},{title:"样本数量",dataIndex:"sampleCount",key:"sampleCount",width:100},{title:"进度",dataIndex:"progress",key:"progress",width:120,render:s=>e.jsx(b,{percent:s,size:"small",status:100===s?"success":"active"})},{title:"分析流程",dataIndex:"pipeline",key:"pipeline",width:150,ellipsis:!0},{title:"负责人",dataIndex:"assigneeName",key:"assigneeName",width:100},{title:"关联批次",dataIndex:"batchName",key:"batchName",width:150,ellipsis:!0},{title:"开始时间",dataIndex:"startTime",key:"startTime",width:110,render:e=>e?j(e).format("MM-DD HH:mm"):"-"},{title:"预计耗时",dataIndex:"estimatedDuration",key:"estimatedDuration",width:100,render:e=>`${Math.floor(e/60)}h${e%60}m`},{title:"操作",key:"action",width:200,fixed:"right",render:(s,t)=>e.jsxs(o,{size:"small",children:[e.jsx(A,{title:"查看详情",children:e.jsx(x,{type:"text",icon:e.jsx(q,{}),onClick:()=>ve(t)})}),e.jsx(A,{title:"查看结果",children:e.jsx(x,{type:"text",icon:e.jsx(k,{}),onClick:()=>fe(t),disabled:"completed"!==t.status})}),e.jsx(A,{title:"编辑",children:e.jsx(x,{type:"text",icon:e.jsx(z,{}),onClick:()=>Ie(t)})}),"in_progress"===t.status&&e.jsx(A,{title:"暂停",children:e.jsx(x,{type:"text",icon:e.jsx(R,{}),onClick:()=>be(t.id)})}),("paused"===t.status||"pending"===t.status)&&e.jsx(A,{title:"开始",children:e.jsx(x,{type:"text",icon:e.jsx(M,{}),onClick:()=>we(t.id)})}),e.jsx(F,{title:"确定要删除这个分析任务吗？",onConfirm:()=>Se(t.id),okText:"确定",cancelText:"取消",children:e.jsx(A,{title:"删除",children:e.jsx(x,{type:"text",danger:!0,icon:e.jsx(P,{})})})})]})}],Ie=e=>{se(e),le.setFieldsValue({...e,startTime:e.startTime?j(e.startTime):null}),K(!0)},ve=e=>{ae(e),X(!0)},fe=e=>{ae(e),W(!0)},we=async e=>{try{await new Promise(e=>setTimeout(e,500)),L(T.map(s=>s.id===e?{...s,status:"in_progress",startTime:(new Date).toISOString(),progress:5}:s)),N.success("分析任务已开始")}catch(s){N.error("开始分析任务失败")}},be=async e=>{try{await new Promise(e=>setTimeout(e,500)),L(T.map(s=>s.id===e?{...s,status:"paused"}:s)),N.success("分析任务已暂停")}catch(s){N.error("暂停分析任务失败")}},Se=async e=>{try{await new Promise(e=>setTimeout(e,500)),L(T.filter(s=>s.id!==e)),N.success("分析任务删除成功")}catch(s){N.error("删除分析任务失败")}},Te=T.filter(e=>{const s=!ie||e.name.toLowerCase().includes(ie.toLowerCase())||e.description.toLowerCase().includes(ie.toLowerCase())||e.pipeline.toLowerCase().includes(ie.toLowerCase()),t=!re||e.status===re,a=!ce||e.type===ce;return s&&t&&a}),Ce={total:T.length,pending:T.filter(e=>"pending"===e.status).length,inProgress:T.filter(e=>"in_progress"===e.status).length,completed:T.filter(e=>"completed"===e.status).length,failed:T.filter(e=>"failed"===e.status).length,totalSamples:T.reduce((e,s)=>e+s.sampleCount,0)},De={summary:{totalReads:245e4,qualityReads:228e4,qualityRate:93.1,uniqueFeatures:1250,taxonomicGroups:85},diversity:{shannon:4.2,simpson:.85,chao1:1380,observedOTUs:1250},taxonomy:[{name:"Bacteroidetes",percentage:35.2,color:"#1890ff"},{name:"Firmicutes",percentage:28.7,color:"#52c41a"},{name:"Proteobacteria",percentage:18.5,color:"#faad14"},{name:"Actinobacteria",percentage:12.1,color:"#f5222d"},{name:"Others",percentage:5.5,color:"#722ed1"}]};return e.jsxs("div",{children:[e.jsxs(a,{gutter:16,style:{marginBottom:16},children:[e.jsx(l,{span:6,children:e.jsx(i,{children:e.jsx(n,{title:"分析任务总数",value:Ce.total,prefix:e.jsx(r,{})})})}),e.jsx(l,{span:6,children:e.jsx(i,{children:e.jsx(n,{title:"进行中",value:Ce.inProgress,valueStyle:{color:"#1890ff"}})})}),e.jsx(l,{span:6,children:e.jsx(i,{children:e.jsx(n,{title:"已完成",value:Ce.completed,valueStyle:{color:"#52c41a"}})})}),e.jsx(l,{span:6,children:e.jsx(i,{children:e.jsx(n,{title:"分析样本总数",value:Ce.totalSamples,prefix:e.jsx(d,{})})})})]}),e.jsx(i,{children:e.jsxs(c,{activeKey:me,onChange:he,children:[e.jsxs(H,{tab:"分析任务",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(o,{children:[e.jsx(m.Search,{placeholder:"搜索任务名称、描述或流程",value:ie,onChange:e=>ne(e.target.value),style:{width:300}}),e.jsxs(h,{placeholder:"筛选状态",value:re,onChange:de,style:{width:120},allowClear:!0,children:[e.jsx(Y,{value:"pending",children:"待开始"}),e.jsx(Y,{value:"in_progress",children:"进行中"}),e.jsx(Y,{value:"completed",children:"已完成"}),e.jsx(Y,{value:"failed",children:"失败"}),e.jsx(Y,{value:"paused",children:"暂停"})]}),e.jsxs(h,{placeholder:"筛选类型",value:ce,onChange:oe,style:{width:150},allowClear:!0,children:[e.jsx(Y,{value:"16s_analysis",children:"16S rRNA分析"}),e.jsx(Y,{value:"metagenome_analysis",children:"宏基因组分析"}),e.jsx(Y,{value:"dual_analysis",children:"双重测序分析"}),e.jsx(Y,{value:"transcriptome_analysis",children:"转录组分析"})]}),e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>{se(null),le.resetFields(),K(!0)},children:"创建分析任务"})]})}),e.jsx(u,{columns:ge,dataSource:Te,rowKey:"id",loading:$,scroll:{x:1800},pagination:{total:Te.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]},"tasks"),e.jsxs(H,{tab:"分析流程",children:[e.jsx(y,{message:"生信分析流程",description:"支持多种微生物组学分析流程",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(a,{gutter:16,children:[e.jsx(l,{span:8,children:e.jsxs(i,{title:"16S rRNA分析",size:"small",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"适用场景:"})," 细菌和古菌群落结构分析"]}),e.jsx("p",{children:e.jsx("strong",{children:"主要步骤:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"质量控制和过滤"}),e.jsx("li",{children:"序列去噪 (DADA2)"}),e.jsx("li",{children:"分类学注释 (SILVA)"}),e.jsx("li",{children:"多样性分析"}),e.jsx("li",{children:"差异分析"})]})]})}),e.jsx(l,{span:8,children:e.jsxs(i,{title:"宏基因组分析",size:"small",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"适用场景:"})," 微生物群落功能分析"]}),e.jsx("p",{children:e.jsx("strong",{children:"主要步骤:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"质量控制和去宿主"}),e.jsx("li",{children:"物种组成分析 (MetaPhlAn)"}),e.jsx("li",{children:"功能注释 (HUMAnN)"}),e.jsx("li",{children:"代谢通路分析"}),e.jsx("li",{children:"抗性基因检测"})]})]})}),e.jsx(l,{span:8,children:e.jsxs(i,{title:"双重测序分析",size:"small",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"适用场景:"})," 细菌+真核微生物分析"]}),e.jsx("p",{children:e.jsx("strong",{children:"主要步骤:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"16S rRNA分析 (细菌)"}),e.jsx("li",{children:"18S rRNA分析 (真核)"}),e.jsx("li",{children:"群落互作分析"}),e.jsx("li",{children:"生态网络构建"}),e.jsx("li",{children:"环境因子关联"})]})]})})]})]},"pipelines")]})}),e.jsx(g,{title:ee?"编辑分析任务":"创建分析任务",open:G,onCancel:()=>{K(!1),le.resetFields()},footer:null,width:800,children:e.jsxs(t,{form:le,layout:"vertical",onFinish:async e=>{try{V(!0),await new Promise(e=>setTimeout(e,1e3));const s={...e,startTime:e.startTime?e.startTime.toISOString():null,progress:0,actualDuration:null,endTime:null,outputFiles:[]};if(ee){const e={...ee,...s,updatedAt:(new Date).toISOString()};L(T.map(s=>s.id===ee.id?e:s)),N.success("分析任务更新成功")}else{const e={id:Date.now().toString(),...s,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};L([...T,e]),N.success("分析任务创建成功")}K(!1),le.resetFields()}catch(s){N.error("操作失败")}finally{V(!1)}},children:[e.jsxs(a,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(t.Item,{name:"name",label:"任务名称",rules:[{required:!0,message:"请输入任务名称"}],children:e.jsx(m,{placeholder:"请输入任务名称"})})}),e.jsx(l,{span:12,children:e.jsx(t.Item,{name:"type",label:"分析类型",rules:[{required:!0,message:"请选择分析类型"}],children:e.jsxs(h,{placeholder:"请选择分析类型",children:[e.jsx(Y,{value:"16s_analysis",children:"16S rRNA分析"}),e.jsx(Y,{value:"metagenome_analysis",children:"宏基因组分析"}),e.jsx(Y,{value:"dual_analysis",children:"双重测序分析"}),e.jsx(Y,{value:"transcriptome_analysis",children:"转录组分析"})]})})})]}),e.jsx(t.Item,{name:"description",label:"任务描述",rules:[{required:!0,message:"请输入任务描述"}],children:e.jsx(Z,{rows:3,placeholder:"请输入任务描述"})}),e.jsxs(a,{gutter:16,children:[e.jsx(l,{span:8,children:e.jsx(t.Item,{name:"priority",label:"优先级",rules:[{required:!0,message:"请选择优先级"}],children:e.jsxs(h,{placeholder:"请选择优先级",children:[e.jsx(Y,{value:"high",children:"高"}),e.jsx(Y,{value:"medium",children:"中"}),e.jsx(Y,{value:"low",children:"低"})]})})}),e.jsx(l,{span:8,children:e.jsx(t.Item,{name:"batchId",label:"关联批次",rules:[{required:!0,message:"请选择关联批次"}],children:e.jsx(h,{placeholder:"请选择关联批次",children:B.map(s=>e.jsx(Y,{value:s.id,children:s.name},s.id))})})}),e.jsx(l,{span:8,children:e.jsx(t.Item,{name:"sampleCount",label:"样本数量",rules:[{required:!0,message:"请输入样本数量"}],children:e.jsx(m,{type:"number",min:1,placeholder:"请输入样本数量"})})})]}),e.jsxs(a,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(t.Item,{name:"pipeline",label:"分析流程",rules:[{required:!0,message:"请输入分析流程"}],children:e.jsx(m,{placeholder:"如: QIIME2, MetaPhlAn3 + HUMAnN3"})})}),e.jsx(l,{span:12,children:e.jsx(t.Item,{name:"assigneeId",label:"负责人",rules:[{required:!0,message:"请选择负责人"}],children:e.jsxs(h,{placeholder:"请选择负责人",children:[e.jsx(Y,{value:"3",children:"王五"}),e.jsx(Y,{value:"4",children:"赵六"}),e.jsx(Y,{value:"5",children:"孙七"})]})})})]}),e.jsxs(a,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(t.Item,{name:"estimatedDuration",label:"预计耗时(分钟)",rules:[{required:!0,message:"请输入预计耗时"}],children:e.jsx(m,{type:"number",min:1,placeholder:"请输入预计耗时"})})}),e.jsx(l,{span:12,children:e.jsx(t.Item,{name:"startTime",label:"计划开始时间",children:e.jsx(I,{showTime:!0,style:{width:"100%"},placeholder:"请选择计划开始时间"})})})]}),e.jsx(t.Item,{name:"status",label:"任务状态",rules:[{required:!0,message:"请选择任务状态"}],children:e.jsxs(h,{placeholder:"请选择任务状态",children:[e.jsx(Y,{value:"pending",children:"待开始"}),e.jsx(Y,{value:"in_progress",children:"进行中"}),e.jsx(Y,{value:"completed",children:"已完成"}),e.jsx(Y,{value:"paused",children:"暂停"})]})}),e.jsx(t.Item,{name:"notes",label:"备注",children:e.jsx(Z,{rows:3,placeholder:"请输入备注信息"})}),e.jsx(t.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(o,{children:[e.jsx(x,{onClick:()=>K(!1),children:"取消"}),e.jsx(x,{type:"primary",htmlType:"submit",loading:$,children:ee?"更新":"创建"})]})})]})}),e.jsx(g,{title:"分析任务详情",open:Q,onCancel:()=>X(!1),footer:[e.jsx(x,{onClick:()=>X(!1),children:"关闭"},"close")],width:900,children:te&&e.jsxs("div",{children:[e.jsxs(v,{bordered:!0,column:2,children:[e.jsx(v.Item,{label:"任务名称",children:te.name}),e.jsx(v.Item,{label:"分析类型",children:e.jsx(f,{color:"blue",children:ye(te.type)})}),e.jsx(v.Item,{label:"状态",children:e.jsx(f,{color:xe(te.status),children:pe(te.status)})}),e.jsx(v.Item,{label:"优先级",children:e.jsx(f,{color:ue(te.priority),children:je(te.priority)})}),e.jsx(v.Item,{label:"样本数量",children:e.jsx(w,{count:te.sampleCount,showZero:!0,color:"blue"})}),e.jsx(v.Item,{label:"进度",children:e.jsx(b,{percent:te.progress,size:"small"})}),e.jsx(v.Item,{label:"分析流程",children:te.pipeline}),e.jsx(v.Item,{label:"负责人",children:te.assigneeName}),e.jsx(v.Item,{label:"关联批次",children:te.batchName}),e.jsxs(v.Item,{label:"预计耗时",children:[Math.floor(te.estimatedDuration/60),"小时",te.estimatedDuration%60,"分钟"]}),e.jsx(v.Item,{label:"开始时间",children:te.startTime?j(te.startTime).format("YYYY-MM-DD HH:mm"):"未开始"}),e.jsx(v.Item,{label:"结束时间",children:te.endTime?j(te.endTime).format("YYYY-MM-DD HH:mm"):"未完成"})]}),e.jsx(S,{}),e.jsxs(v,{bordered:!0,column:1,children:[e.jsx(v.Item,{label:"任务描述",children:te.description}),e.jsx(v.Item,{label:"备注",children:te.notes||"无备注"})]}),e.jsx(S,{}),e.jsxs(U,{level:5,children:["样本清单 (",te.sampleCount," 个样本)"]}),e.jsx(u,{size:"small",dataSource:te.samples||[],columns:[{title:"样本编号",dataIndex:"sampleCode",key:"sampleCode",width:120,render:s=>e.jsx(O,{strong:!0,children:s})},{title:"样本名称",dataIndex:"sampleName",key:"sampleName",width:150,ellipsis:!0},{title:"样本类型",dataIndex:"sampleType",key:"sampleType",width:100,render:s=>e.jsx(f,{color:"blue",children:s})},{title:"项目名称",dataIndex:"projectName",key:"projectName",width:200,ellipsis:!0},{title:"客户名称",dataIndex:"clientName",key:"clientName",width:120,ellipsis:!0},{title:"接收日期",dataIndex:"receivedDate",key:"receivedDate",width:100,render:e=>j(e).format("MM-DD")},{title:"状态",dataIndex:"status",key:"status",width:80,render:s=>{const t={received:{color:"green",text:"已接收"},processing:{color:"processing",text:"处理中"},completed:{color:"success",text:"已完成"},failed:{color:"error",text:"失败"}}[s]||{color:"default",text:s};return e.jsx(f,{color:t.color,children:t.text})}}],rowKey:"id",pagination:!1,scroll:{y:300}}),te.inputFiles&&te.inputFiles.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx(U,{level:5,children:"输入文件"}),e.jsx(C,{size:"small",dataSource:te.inputFiles,renderItem:s=>e.jsxs(C.Item,{children:[e.jsx(D,{style:{marginRight:8}}),s]})})]}),te.outputFiles&&te.outputFiles.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx(U,{level:5,children:"输出文件"}),e.jsx(C,{size:"small",dataSource:te.outputFiles,renderItem:s=>e.jsxs(C.Item,{children:[e.jsx(C.Item.Meta,{avatar:e.jsx(D,{}),title:s,description:"点击下载"}),e.jsx(x,{type:"link",icon:e.jsx(_,{}),onClick:()=>N.info(`下载文件: ${s}`),children:"下载"})]})})]})]})}),e.jsx(g,{title:"分析结果",open:J,onCancel:()=>W(!1),footer:[e.jsx(x,{type:"primary",icon:e.jsx(_,{}),children:"下载报告"},"download"),e.jsx(x,{onClick:()=>W(!1),children:"关闭"},"close")],width:1e3,children:te&&e.jsxs("div",{children:[e.jsx(y,{message:`分析任务: ${te.name}`,description:`完成时间: ${te.endTime?j(te.endTime).format("YYYY-MM-DD HH:mm"):"进行中"}`,type:"success",showIcon:!0,style:{marginBottom:16}}),e.jsxs(c,{defaultActiveKey:"summary",children:[e.jsx(H,{tab:"分析概要",children:e.jsxs(a,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsxs(i,{title:"数据质量",size:"small",children:[e.jsx(n,{title:"总读长数",value:De.summary.totalReads}),e.jsx(n,{title:"高质量读长",value:De.summary.qualityReads}),e.jsx(n,{title:"质量通过率",value:De.summary.qualityRate,suffix:"%",precision:1})]})}),e.jsx(l,{span:12,children:e.jsxs(i,{title:"分析结果",size:"small",children:[e.jsx(n,{title:"特征数量",value:De.summary.uniqueFeatures}),e.jsx(n,{title:"分类群数",value:De.summary.taxonomicGroups})]})})]})},"summary"),e.jsx(H,{tab:"多样性分析",children:e.jsxs(a,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(i,{title:"Alpha多样性指数",size:"small",children:e.jsxs(v,{size:"small",column:1,children:[e.jsx(v.Item,{label:"Shannon指数",children:De.diversity.shannon}),e.jsx(v.Item,{label:"Simpson指数",children:De.diversity.simpson}),e.jsx(v.Item,{label:"Chao1指数",children:De.diversity.chao1}),e.jsx(v.Item,{label:"观察到的OTUs",children:De.diversity.observedOTUs})]})})}),e.jsx(l,{span:12,children:e.jsx(i,{title:"群落组成",size:"small",children:e.jsx("div",{style:{height:200},children:De.taxonomy.map((s,t)=>e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:12,height:12,backgroundColor:s.color,marginRight:8}}),e.jsx("span",{style:{flex:1},children:s.name}),e.jsxs("span",{children:[s.percentage,"%"]})]}),e.jsx(b,{percent:s.percentage,strokeColor:s.color,showInfo:!1,size:"small"})]},t))})})})]})},"diversity"),e.jsx(H,{tab:"文件下载",children:e.jsx(C,{itemLayout:"horizontal",dataSource:te.outputFiles,renderItem:s=>e.jsx(C.Item,{actions:[e.jsx(x,{type:"link",icon:e.jsx(_,{}),onClick:()=>N.info(`下载文件: ${s}`),children:"下载"})],children:e.jsx(C.Item.Meta,{avatar:e.jsx(D,{style:{fontSize:24}}),title:s,description:"分析结果文件"})})})},"files")]})]})})]})};export{E as default};
