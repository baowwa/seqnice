import{j as e}from"./index-CCuk2OLn.js";import{r as s}from"./react-vendor-By8n_QN6.js";import{_ as t,c as a,d as i,a as l,P as r,aZ as n,a_ as c,Y as o,Q as d,af as m,a0 as p,ag as u,a1 as h,B as x,a2 as j,U as g,N as y,a3 as f,al as v,ap as w,ah as _,W as b,ao as T,a$ as q,T as C,ae as z,X as I,D as P,l as S,aw as R,b0 as k,au as F,V as M,F as N,S as Y,a7 as H,a9 as B,b1 as D,n as A,ar as $,aq as G,b2 as U,m as L,aa as O,ab as Z,ac as K,s as Q}from"./antd-vendor-Cii6xr0v.js";const{Search:V}=p,{Option:W}=h,{TextArea:X}=p,{TabPane:E}=w,{Text:J,Title:ee}=C,se=()=>{const[C,se]=s.useState(!1),[te,ae]=s.useState([]),[ie,le]=s.useState(null),[re,ne]=s.useState(!1),[ce,oe]=s.useState(!1),[de,me]=s.useState(!1),[pe,ue]=s.useState(!1),[he,xe]=s.useState(null),[je,ge]=s.useState(""),[ye,fe]=s.useState(""),[ve,we]=s.useState(""),[_e,be]=s.useState(""),[Te]=t.useForm(),qe=[{id:"1",pipelineName:"全基因组测序分析",analysisType:"wgs",sampleCount:24,status:"running",progress:65,startTime:"2024-01-15 09:00:00",estimatedTime:480,actualTime:312,operator:"张三",priority:"high",version:"v2.1.0",description:"人类全基因组重测序分析流程",inputPath:"/data/input/wgs_batch_001",outputPath:"/data/output/wgs_batch_001",configFile:"/config/wgs_config.yaml",logFile:"/logs/wgs_batch_001.log",resources:{cpu:32,memory:128,storage:2048},steps:[],parameters:{reference_genome:"hg38",min_mapping_quality:20,variant_calling:!0,annotation:!0},qcMetrics:{totalReads:15e8,mappedReads:1425e6,mappingRate:95,duplicateRate:12.5,coverage:30.2}},{id:"2",pipelineName:"RNA测序差异表达分析",analysisType:"rna_seq",sampleCount:12,status:"completed",progress:100,startTime:"2024-01-14 08:30:00",endTime:"2024-01-14 16:45:00",estimatedTime:360,actualTime:495,operator:"李四",priority:"medium",version:"v1.8.2",description:"转录组差异表达基因分析",inputPath:"/data/input/rnaseq_batch_002",outputPath:"/data/output/rnaseq_batch_002",configFile:"/config/rnaseq_config.yaml",logFile:"/logs/rnaseq_batch_002.log",resources:{cpu:16,memory:64,storage:1024},steps:[],parameters:{reference_genome:"hg38",gene_annotation:"gencode_v38",differential_analysis:!0,pathway_analysis:!0},qcMetrics:{totalReads:8e8,mappedReads:76e7,mappingRate:95,duplicateRate:8.2,coverage:25.8}},{id:"3",pipelineName:"宏基因组分类分析",analysisType:"metagenome",sampleCount:48,status:"pending",progress:0,startTime:"2024-01-16 10:00:00",estimatedTime:720,operator:"王五",priority:"low",version:"v3.0.1",description:"微生物群落结构和功能分析",inputPath:"/data/input/metagenome_batch_003",outputPath:"/data/output/metagenome_batch_003",configFile:"/config/metagenome_config.yaml",logFile:"/logs/metagenome_batch_003.log",resources:{cpu:64,memory:256,storage:4096},steps:[],parameters:{database:"kraken2_standard",assembly:!0,binning:!0,functional_annotation:!0}}],Ce=[{id:"1",stepName:"质量控制",description:"原始数据质量评估和过滤",command:"fastp -i input.fq.gz -o output.fq.gz",status:"completed",progress:100,startTime:"2024-01-15 09:00:00",endTime:"2024-01-15 09:30:00",duration:30,inputFiles:["sample_R1.fq.gz","sample_R2.fq.gz"],outputFiles:["sample_clean_R1.fq.gz","sample_clean_R2.fq.gz"],parameters:{min_length:50,quality_threshold:20},resources:{cpu:4,memory:8},logPath:"/logs/qc_step.log"},{id:"2",stepName:"序列比对",description:"将测序reads比对到参考基因组",command:"bwa mem ref.fa input_R1.fq.gz input_R2.fq.gz",status:"completed",progress:100,startTime:"2024-01-15 09:30:00",endTime:"2024-01-15 11:15:00",duration:105,inputFiles:["sample_clean_R1.fq.gz","sample_clean_R2.fq.gz"],outputFiles:["sample_aligned.bam"],parameters:{reference:"hg38",threads:16},resources:{cpu:16,memory:32},logPath:"/logs/alignment_step.log"},{id:"3",stepName:"变异检测",description:"检测SNP和InDel变异",command:"gatk HaplotypeCaller -R ref.fa -I input.bam",status:"running",progress:45,startTime:"2024-01-15 11:15:00",inputFiles:["sample_aligned.bam"],outputFiles:["sample_variants.vcf"],parameters:{min_base_quality:20,min_mapping_quality:20},resources:{cpu:8,memory:16},logPath:"/logs/variant_calling_step.log"},{id:"4",stepName:"变异注释",description:"对检测到的变异进行功能注释",command:"annovar input.vcf humandb/",status:"pending",progress:0,inputFiles:["sample_variants.vcf"],outputFiles:["sample_annotated.vcf"],parameters:{database:"refGene,clinvar,gnomad"},resources:{cpu:4,memory:8}}];s.useEffect(()=>{ze()},[]);const ze=async()=>{se(!0);try{await new Promise(e=>setTimeout(e,1e3)),ae(qe)}catch(e){}finally{se(!1)}},Ie=e=>({wgs:"全基因组测序",wes:"全外显子测序",rna_seq:"RNA测序",chip_seq:"ChIP测序",atac_seq:"ATAC测序",metagenome:"宏基因组",amplicon:"扩增子测序",single_cell:"单细胞测序"}[e]),Pe=e=>({wgs:"blue",wes:"cyan",rna_seq:"green",chip_seq:"orange",atac_seq:"purple",metagenome:"magenta",amplicon:"gold",single_cell:"red"}[e]),Se=e=>({pending:"default",running:"processing",completed:"success",failed:"error",paused:"warning",cancelled:"default"}[e]),Re=e=>({pending:"等待中",running:"运行中",completed:"已完成",failed:"失败",paused:"已暂停",cancelled:"已取消"}[e]),ke=e=>({low:"default",medium:"processing",high:"warning",urgent:"error"}[e]),Fe=e=>({low:"低",medium:"中",high:"高",urgent:"紧急"}[e]),Me=te.filter(e=>{var s;const t=!je||e.pipelineName.toLowerCase().includes(je.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(je.toLowerCase()))||e.operator.toLowerCase().includes(je.toLowerCase()),a=!ye||e.status===ye,i=!ve||e.analysisType===ve,l=!_e||e.priority===_e;return t&&a&&i&&l}),Ne=[{title:"流程名称",dataIndex:"pipelineName",key:"pipelineName",width:200,fixed:"left",ellipsis:!0},{title:"分析类型",dataIndex:"analysisType",key:"analysisType",width:120,render:s=>e.jsx(b,{color:Pe(s),icon:e.jsx(N,{}),children:Ie(s)})},{title:"样本数量",dataIndex:"sampleCount",key:"sampleCount",width:100,render:s=>e.jsx(T,{count:s,showZero:!0,color:"blue"})},{title:"优先级",dataIndex:"priority",key:"priority",width:80,render:s=>e.jsx(b,{color:ke(s),children:Fe(s)})},{title:"状态",dataIndex:"status",key:"status",width:100,render:s=>e.jsx(b,{color:Se(s),children:Re(s)})},{title:"进度",dataIndex:"progress",key:"progress",width:120,render:(s,t)=>e.jsx(I,{percent:s,size:"small",status:"failed"===t.status?"exception":"active"})},{title:"资源使用",key:"resources",width:120,render:(s,t)=>e.jsxs("div",{style:{fontSize:12},children:[e.jsxs("div",{children:["CPU: ",t.resources.cpu,"核"]}),e.jsxs("div",{children:["内存: ",t.resources.memory,"GB"]})]})},{title:"版本",dataIndex:"version",key:"version",width:80,render:s=>e.jsx(b,{icon:e.jsx(q,{}),children:s})},{title:"操作人",dataIndex:"operator",key:"operator",width:100},{title:"开始时间",dataIndex:"startTime",key:"startTime",width:150,render:e=>y(e).format("MM-DD HH:mm")},{title:"预计耗时",dataIndex:"estimatedTime",key:"estimatedTime",width:100,render:e=>`${Math.floor(e/60)}h${e%60}m`},{title:"操作",key:"action",width:250,fixed:"right",render:(s,t)=>e.jsxs(Y,{size:"small",children:[e.jsx(H,{title:"查看详情",children:e.jsx(x,{type:"text",icon:e.jsx(B,{}),onClick:()=>(e=>{le(e),oe(!0)})(t)})}),e.jsx(H,{title:"实时监控",children:e.jsx(x,{type:"text",icon:e.jsx(D,{}),onClick:()=>(e=>{le(e),ue(!0)})(t)})}),e.jsx(H,{title:"配置管理",children:e.jsx(x,{type:"text",icon:e.jsx(A,{}),onClick:()=>(e=>{le(e),me(!0)})(t)})}),"pending"===t.status&&e.jsx(H,{title:"启动",children:e.jsx(x,{type:"text",icon:e.jsx($,{}),onClick:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),ae(s=>s.map(s=>s.id===e?{...s,status:"running",startTime:y().format("YYYY-MM-DD HH:mm:ss")}:s)),Q.success("流程启动成功")}catch(s){Q.error("启动失败")}})(t.id)})}),"running"===t.status&&e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"暂停",children:e.jsx(x,{type:"text",icon:e.jsx(G,{}),onClick:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),ae(s=>s.map(s=>s.id===e?{...s,status:"paused"}:s)),Q.success("流程已暂停")}catch(s){Q.error("暂停失败")}})(t.id)})}),e.jsx(H,{title:"停止",children:e.jsx(x,{type:"text",icon:e.jsx(U,{}),onClick:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),ae(s=>s.map(s=>s.id===e?{...s,status:"cancelled",endTime:y().format("YYYY-MM-DD HH:mm:ss")}:s)),Q.success("流程已停止")}catch(s){Q.error("停止失败")}})(t.id)})})]}),("paused"===t.status||"failed"===t.status)&&e.jsx(H,{title:"重启",children:e.jsx(x,{type:"text",icon:e.jsx(L,{}),onClick:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),ae(s=>s.map(s=>s.id===e?{...s,status:"running",progress:0,startTime:y().format("YYYY-MM-DD HH:mm:ss"),endTime:void 0}:s)),Q.success("流程重启成功")}catch(s){Q.error("重启失败")}})(t.id)})}),e.jsx(H,{title:"编辑",children:e.jsx(x,{type:"text",icon:e.jsx(O,{}),onClick:()=>(e=>{xe(e),Te.setFieldsValue(e),ne(!0)})(t)})}),e.jsx(Z,{title:"确定要删除这个流程吗？",onConfirm:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),ae(s=>s.filter(s=>s.id!==e)),Q.success("删除成功")}catch(s){Q.error("删除失败")}})(t.id),children:e.jsx(H,{title:"删除",children:e.jsx(x,{type:"text",danger:!0,icon:e.jsx(K,{})})})})]})}];return e.jsxs("div",{children:[e.jsxs(a,{gutter:16,style:{marginBottom:16},children:[e.jsx(i,{span:6,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"总流程数",value:te.length,prefix:e.jsx(n,{})})})}),e.jsx(i,{span:6,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"运行中",value:te.filter(e=>"running"===e.status).length,valueStyle:{color:"#1890ff"},prefix:e.jsx(c,{})})})}),e.jsx(i,{span:6,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"已完成",value:te.filter(e=>"completed"===e.status).length,valueStyle:{color:"#3f8600"},prefix:e.jsx(o,{})})})}),e.jsx(i,{span:6,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"等待中",value:te.filter(e=>"pending"===e.status).length,valueStyle:{color:"#faad14"},prefix:e.jsx(d,{})})})})]}),te.some(e=>"failed"===e.status)&&e.jsx(m,{message:"发现失败的分析流程",description:`有 ${te.filter(e=>"failed"===e.status).length} 个流程执行失败，请检查日志并重新运行`,type:"error",showIcon:!0,closable:!0,style:{marginBottom:16}}),e.jsx(l,{size:"small",style:{marginBottom:16},children:e.jsxs(a,{gutter:16,children:[e.jsx(i,{span:6,children:e.jsx(V,{placeholder:"搜索流程名称、描述或操作人",value:je,onChange:e=>ge(e.target.value),onSearch:ze,enterButton:e.jsx(u,{})})}),e.jsx(i,{span:3,children:e.jsxs(h,{placeholder:"状态筛选",value:ye,onChange:fe,allowClear:!0,style:{width:"100%"},children:[e.jsx(W,{value:"pending",children:"等待中"}),e.jsx(W,{value:"running",children:"运行中"}),e.jsx(W,{value:"completed",children:"已完成"}),e.jsx(W,{value:"failed",children:"失败"}),e.jsx(W,{value:"paused",children:"已暂停"}),e.jsx(W,{value:"cancelled",children:"已取消"})]})}),e.jsx(i,{span:3,children:e.jsxs(h,{placeholder:"分析类型",value:ve,onChange:we,allowClear:!0,style:{width:"100%"},children:[e.jsx(W,{value:"wgs",children:"全基因组测序"}),e.jsx(W,{value:"wes",children:"全外显子测序"}),e.jsx(W,{value:"rna_seq",children:"RNA测序"}),e.jsx(W,{value:"chip_seq",children:"ChIP测序"}),e.jsx(W,{value:"atac_seq",children:"ATAC测序"}),e.jsx(W,{value:"metagenome",children:"宏基因组"}),e.jsx(W,{value:"amplicon",children:"扩增子测序"}),e.jsx(W,{value:"single_cell",children:"单细胞测序"})]})}),e.jsx(i,{span:3,children:e.jsxs(h,{placeholder:"优先级",value:_e,onChange:be,allowClear:!0,style:{width:"100%"},children:[e.jsx(W,{value:"low",children:"低"}),e.jsx(W,{value:"medium",children:"中"}),e.jsx(W,{value:"high",children:"高"}),e.jsx(W,{value:"urgent",children:"紧急"})]})}),e.jsxs(i,{span:5,children:[e.jsx(x,{type:"primary",icon:e.jsx(j,{}),onClick:()=>{xe(null),Te.resetFields(),ne(!0)},style:{marginRight:8},children:"新建流程"}),e.jsx(x,{onClick:ze,loading:C,children:"刷新"})]})]})}),e.jsx(l,{title:"分析流程列表",size:"small",children:e.jsx(g,{columns:Ne,dataSource:Me,rowKey:"id",loading:C,scroll:{x:2e3},pagination:{total:Me.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})}),e.jsx(f,{title:he?"编辑分析流程":"新建分析流程",open:re,onCancel:()=>ne(!1),onOk:()=>Te.submit(),width:800,children:e.jsxs(t,{form:Te,layout:"vertical",onFinish:async e=>{try{if(await new Promise(e=>setTimeout(e,500)),he)ae(s=>s.map(s=>s.id===he.id?{...s,...e}:s)),Q.success("更新成功");else{const s={id:Date.now().toString(),...e,status:"pending",progress:0,startTime:y().format("YYYY-MM-DD HH:mm:ss"),operator:"当前用户",steps:[],parameters:{}};ae(e=>[...e,s]),Q.success("添加成功")}ne(!1),Te.resetFields()}catch(s){Q.error("保存失败")}},children:[e.jsxs(a,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(t.Item,{name:"pipelineName",label:"流程名称",rules:[{required:!0,message:"请输入流程名称"}],children:e.jsx(p,{placeholder:"请输入流程名称"})})}),e.jsx(i,{span:12,children:e.jsx(t.Item,{name:"analysisType",label:"分析类型",rules:[{required:!0,message:"请选择分析类型"}],children:e.jsxs(h,{placeholder:"请选择分析类型",children:[e.jsx(W,{value:"wgs",children:"全基因组测序"}),e.jsx(W,{value:"wes",children:"全外显子测序"}),e.jsx(W,{value:"rna_seq",children:"RNA测序"}),e.jsx(W,{value:"chip_seq",children:"ChIP测序"}),e.jsx(W,{value:"atac_seq",children:"ATAC测序"}),e.jsx(W,{value:"metagenome",children:"宏基因组"}),e.jsx(W,{value:"amplicon",children:"扩增子测序"}),e.jsx(W,{value:"single_cell",children:"单细胞测序"})]})})})]}),e.jsxs(a,{gutter:16,children:[e.jsx(i,{span:8,children:e.jsx(t.Item,{name:"sampleCount",label:"样本数量",rules:[{required:!0,message:"请输入样本数量"}],children:e.jsx(v,{min:1,style:{width:"100%"}})})}),e.jsx(i,{span:8,children:e.jsx(t.Item,{name:"priority",label:"优先级",rules:[{required:!0,message:"请选择优先级"}],children:e.jsxs(h,{placeholder:"请选择优先级",children:[e.jsx(W,{value:"low",children:"低"}),e.jsx(W,{value:"medium",children:"中"}),e.jsx(W,{value:"high",children:"高"}),e.jsx(W,{value:"urgent",children:"紧急"})]})})}),e.jsx(i,{span:8,children:e.jsx(t.Item,{name:"estimatedTime",label:"预计耗时(分钟)",rules:[{required:!0,message:"请输入预计耗时"}],children:e.jsx(v,{min:1,style:{width:"100%"}})})})]}),e.jsxs(a,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(t.Item,{name:"inputPath",label:"输入路径",rules:[{required:!0,message:"请输入输入路径"}],children:e.jsx(p,{placeholder:"/data/input/project_name"})})}),e.jsx(i,{span:12,children:e.jsx(t.Item,{name:"outputPath",label:"输出路径",rules:[{required:!0,message:"请输入输出路径"}],children:e.jsx(p,{placeholder:"/data/output/project_name"})})})]}),e.jsxs(a,{gutter:16,children:[e.jsx(i,{span:8,children:e.jsx(t.Item,{name:["resources","cpu"],label:"CPU核数",rules:[{required:!0,message:"请输入CPU核数"}],children:e.jsx(v,{min:1,max:128,style:{width:"100%"}})})}),e.jsx(i,{span:8,children:e.jsx(t.Item,{name:["resources","memory"],label:"内存(GB)",rules:[{required:!0,message:"请输入内存大小"}],children:e.jsx(v,{min:1,max:1024,style:{width:"100%"}})})}),e.jsx(i,{span:8,children:e.jsx(t.Item,{name:["resources","storage"],label:"存储(GB)",rules:[{required:!0,message:"请输入存储大小"}],children:e.jsx(v,{min:1,max:10240,style:{width:"100%"}})})})]}),e.jsx(t.Item,{name:"description",label:"描述",children:e.jsx(X,{rows:3,placeholder:"请输入流程描述"})})]})}),e.jsx(f,{title:"分析流程详情",open:ce,onCancel:()=>oe(!1),footer:null,width:1e3,children:ie&&e.jsxs(w,{defaultActiveKey:"1",children:[e.jsx(E,{tab:"基本信息",children:e.jsxs(_,{bordered:!0,size:"small",column:2,children:[e.jsx(_.Item,{label:"流程名称",span:2,children:ie.pipelineName}),e.jsx(_.Item,{label:"分析类型",children:e.jsx(b,{color:Pe(ie.analysisType),children:Ie(ie.analysisType)})}),e.jsx(_.Item,{label:"样本数量",children:e.jsx(T,{count:ie.sampleCount,showZero:!0,color:"blue"})}),e.jsx(_.Item,{label:"优先级",children:e.jsx(b,{color:ke(ie.priority),children:Fe(ie.priority)})}),e.jsx(_.Item,{label:"状态",children:e.jsx(b,{color:Se(ie.status),children:Re(ie.status)})}),e.jsx(_.Item,{label:"版本",children:e.jsx(b,{icon:e.jsx(q,{}),children:ie.version})}),e.jsx(_.Item,{label:"操作人",children:ie.operator}),e.jsx(_.Item,{label:"开始时间",children:ie.startTime}),e.jsx(_.Item,{label:"结束时间",children:ie.endTime||"-"}),e.jsx(_.Item,{label:"输入路径",span:2,children:e.jsx(J,{code:!0,children:ie.inputPath})}),e.jsx(_.Item,{label:"输出路径",span:2,children:e.jsx(J,{code:!0,children:ie.outputPath})}),e.jsx(_.Item,{label:"描述",span:2,children:ie.description||"-"})]})},"1"),e.jsx(E,{tab:"执行步骤",children:e.jsx(z,{direction:"vertical",size:"small",current:2,items:Ce.map(s=>({title:s.stepName,description:e.jsxs("div",{children:[e.jsx("div",{children:s.description}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:4},children:["命令: ",e.jsx(J,{code:!0,style:{fontSize:11},children:s.command})]}),e.jsxs("div",{style:{fontSize:12,color:"#999",marginTop:2},children:["资源: CPU ",s.resources.cpu,"核 | 内存 ",s.resources.memory,"GB",s.duration&&` | 耗时 ${s.duration}分钟`]}),s.progress>0&&e.jsx(I,{percent:s.progress,size:"small",style:{marginTop:4}})]}),status:"failed"===s.status?"error":"running"===s.status?"process":"completed"===s.status?"finish":"wait"}))})},"2"),e.jsx(E,{tab:"质控指标",children:ie.qcMetrics&&e.jsxs(a,{gutter:16,children:[e.jsx(i,{span:8,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"总读数",value:ie.qcMetrics.totalReads,formatter:e=>`${(Number(e)/1e6).toFixed(1)}M`})})}),e.jsx(i,{span:8,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"比对读数",value:ie.qcMetrics.mappedReads,formatter:e=>`${(Number(e)/1e6).toFixed(1)}M`})})}),e.jsx(i,{span:8,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"比对率",value:ie.qcMetrics.mappingRate,suffix:"%",precision:1,valueStyle:{color:ie.qcMetrics.mappingRate>90?"#3f8600":"#cf1322"}})})}),e.jsx(i,{span:8,style:{marginTop:16},children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"重复率",value:ie.qcMetrics.duplicateRate,suffix:"%",precision:1,valueStyle:{color:ie.qcMetrics.duplicateRate<20?"#3f8600":"#cf1322"}})})}),e.jsx(i,{span:8,style:{marginTop:16},children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"平均覆盖度",value:ie.qcMetrics.coverage,suffix:"X",precision:1})})})]})},"3")]})}),e.jsx(P,{title:"流程配置管理",placement:"right",onClose:()=>me(!1),open:de,width:600,children:ie&&e.jsxs("div",{children:[e.jsx(ee,{level:5,children:"参数配置"}),e.jsx(_,{bordered:!0,size:"small",column:1,children:Object.entries(ie.parameters).map(([s,t])=>e.jsx(_.Item,{label:s,children:e.jsx(J,{code:!0,children:String(t)})},s))}),e.jsx(S,{}),e.jsx(ee,{level:5,children:"资源配置"}),e.jsxs(a,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"CPU核数",value:ie.resources.cpu,suffix:"核"})})}),e.jsx(i,{span:12,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"内存",value:ie.resources.memory,suffix:"GB"})})}),e.jsx(i,{span:12,style:{marginTop:16},children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"存储",value:ie.resources.storage,suffix:"GB"})})}),ie.resources.gpu&&e.jsx(i,{span:12,style:{marginTop:16},children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"GPU",value:ie.resources.gpu,suffix:"卡"})})})]}),e.jsx(S,{}),e.jsx(ee,{level:5,children:"文件路径"}),e.jsx(R,{size:"small",dataSource:[{label:"配置文件",path:ie.configFile},{label:"日志文件",path:ie.logFile},{label:"输入路径",path:ie.inputPath},{label:"输出路径",path:ie.outputPath}],renderItem:s=>e.jsxs(R.Item,{children:[e.jsx(R.Item.Meta,{avatar:e.jsx(k,{}),title:s.label,description:e.jsx(J,{code:!0,children:s.path})}),e.jsx(x,{type:"text",icon:e.jsx(F,{}),size:"small"})]})})]})}),e.jsx(P,{title:"实时监控",placement:"right",onClose:()=>ue(!1),open:pe,width:700,children:ie&&e.jsxs("div",{children:[e.jsx(m,{message:"流程运行状态",description:`${ie.pipelineName} 当前${Re(ie.status)}`,type:"running"===ie.status?"info":"completed"===ie.status?"success":"failed"===ie.status?"error":"warning",showIcon:!0,style:{marginBottom:16}}),e.jsx(I,{percent:ie.progress,status:"failed"===ie.status?"exception":"active",style:{marginBottom:16}}),e.jsxs(a,{gutter:16,style:{marginBottom:16},children:[e.jsx(i,{span:8,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"已用时间",value:ie.actualTime||0,suffix:"分钟"})})}),e.jsx(i,{span:8,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"预计时间",value:ie.estimatedTime,suffix:"分钟"})})}),e.jsx(i,{span:8,children:e.jsx(l,{size:"small",children:e.jsx(r,{title:"剩余时间",value:Math.max(0,ie.estimatedTime-(ie.actualTime||0)),suffix:"分钟",valueStyle:{color:"#1890ff"}})})})]}),e.jsx(ee,{level:5,children:"步骤进度"}),e.jsx(M,{items:Ce.map(s=>({color:"completed"===s.status?"green":"running"===s.status?"blue":"failed"===s.status?"red":"gray",children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:s.stepName}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:s.description}),s.progress>0&&e.jsx(I,{percent:s.progress,size:"small",style:{marginTop:4,width:200}}),s.startTime&&e.jsxs("div",{style:{fontSize:11,color:"#999",marginTop:2},children:["开始: ",y(s.startTime).format("HH:mm:ss"),s.endTime&&` | 结束: ${y(s.endTime).format("HH:mm:ss")}`]})]})}))})]})})]})};export{se as default};
