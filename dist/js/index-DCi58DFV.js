import{j as e}from"./index-DuFe5DRh.js";import{r as t}from"./react-vendor-BSBC8BLg.js";import{$ as s,a,c as r,d as i,T as l,S as n,Q as d,b as c,B as o,a0 as x,a1 as p,a2 as m,a3 as h,a4 as j,V as u,a5 as g,a6 as y,a7 as v,a8 as D,a9 as f,aa as I,ab as S,ac as w,X as C,ad as A,l as k,O as Y,ae as T,af as N,s as b,ag as M,ah as B,ai as q,aj as P,ak as $,al as z,am as L}from"./antd-vendor-BuqAAsAf.js";const{Option:F}=j,{TextArea:V}=h,{Step:E}=v,{TabPane:O}=L,{Title:R,Text:Z}=l,{Dragger:H}=I,J=()=>{const[l,I]=t.useState([]),[L,O]=t.useState([]),[J,_]=t.useState([]),[Q,G]=t.useState(!1),[K,W]=t.useState(!1),[X,U]=t.useState(!1),[ee,te]=t.useState(!1),[se,ae]=t.useState(!1),[re,ie]=t.useState(null),[le,ne]=t.useState(null),[de]=s.useForm(),[ce,oe]=t.useState(""),[xe,pe]=t.useState(""),[me,he]=t.useState(""),[je,ue]=t.useState("single"),[ge,ye]=t.useState("template"),[ve,De]=t.useState(null),[fe,Ie]=t.useState([]),[Se,we]=t.useState([]);t.useEffect(()=>{(async()=>{G(!0);try{await new Promise(e=>setTimeout(e,500)),I([{id:"1",code:"S001",barcode:"BC001234567890",name:"è‚ é“èŒç¾¤æ ·æœ¬-æ‚£è€…001",projectId:"1",projectName:"è‚ é“èŒç¾¤å¤šæ ·æ€§åˆ†æé¡¹ç›®",sampleTypeId:"1",sampleTypeName:"ç²ªä¾¿æ ·æœ¬",status:"received",priority:"high",receivedDate:"2024-01-15",expectedDate:"2024-01-20",volume:5,concentration:120.5,purity:1.85,qualityScore:95,storageLocation:"A1-01-001",temperature:-80,receiverId:"1",receiverName:"å¼ ä¸‰",notes:"æ ·æœ¬çŠ¶æ€è‰¯å¥½ï¼Œæ— å¼‚å¸¸",qcPassed:!0,createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-15T10:30:00Z"},{id:"2",code:"S002",barcode:"BC001234567891",name:"åœŸå£¤å¾®ç”Ÿç‰©æ ·æœ¬-åœ°ç‚¹A",projectId:"2",projectName:"åœŸå£¤å¾®ç”Ÿç‰©ç¾¤è½ç»“æ„ç ”ç©¶",sampleTypeId:"2",sampleTypeName:"åœŸå£¤æ ·æœ¬",status:"processing",priority:"medium",receivedDate:"2024-02-01",expectedDate:"2024-02-05",volume:10,concentration:85.2,purity:1.65,qualityScore:88,storageLocation:"B2-02-015",temperature:-20,receiverId:"2",receiverName:"æå››",notes:"éœ€è¦è¿›ä¸€æ­¥çº¯åŒ–å¤„ç†",qcPassed:!1,createdAt:"2024-02-01T14:00:00Z",updatedAt:"2024-02-02T11:15:00Z"},{id:"3",code:"S003",barcode:"BC001234567892",name:"æµ·æ°´å¾®ç”Ÿç‰©æ ·æœ¬-æ·±æµ·001",projectId:"3",projectName:"æµ·æ´‹å¾®ç”Ÿç‰©åŸºå› ç»„æµ‹åº",sampleTypeId:"3",sampleTypeName:"æ°´ä½“æ ·æœ¬",status:"completed",priority:"high",receivedDate:"2023-10-15",expectedDate:"2023-10-20",volume:50,concentration:200.8,purity:1.95,qualityScore:98,storageLocation:"C3-01-008",temperature:-80,receiverId:"1",receiverName:"å¼ ä¸‰",notes:"ä¼˜è´¨æ ·æœ¬ï¼Œæµ‹åºç»“æœä¼˜å¼‚",qcPassed:!0,createdAt:"2023-10-15T08:30:00Z",updatedAt:"2023-12-31T16:45:00Z"}])}catch(e){b.error("è·å–æ ·æœ¬åˆ—è¡¨å¤±è´¥")}finally{G(!1)}})(),(async()=>{O([{id:"1",name:"è‚ é“èŒç¾¤å¤šæ ·æ€§åˆ†æé¡¹ç›®",code:"PRJ001",customerId:"1",customerName:"åŒ—äº¬å¤§å­¦åŒ»å­¦é™¢",description:"",status:"in_progress",priority:"high",startDate:"2024-01-15",endDate:"2024-03-15",estimatedDays:60,actualDays:45,progress:75,managerId:"1",managerName:"å¼ ä¸‰",createdAt:"",updatedAt:""},{id:"2",name:"åœŸå£¤å¾®ç”Ÿç‰©ç¾¤è½ç»“æ„ç ”ç©¶",code:"PRJ002",customerId:"2",customerName:"ä¸­ç§‘é™¢ç”Ÿæ€ç¯å¢ƒç ”ç©¶ä¸­å¿ƒ",description:"",status:"planning",priority:"medium",startDate:"2024-03-01",endDate:"2024-05-01",estimatedDays:60,actualDays:0,progress:10,managerId:"2",managerName:"æå››",createdAt:"",updatedAt:""},{id:"3",name:"æµ·æ´‹å¾®ç”Ÿç‰©åŸºå› ç»„æµ‹åº",code:"PRJ003",customerId:"3",customerName:"é’å²›æµ·æ´‹å¤§å­¦",description:"",status:"completed",priority:"high",startDate:"2023-10-01",endDate:"2023-12-31",estimatedDays:90,actualDays:85,progress:100,managerId:"1",managerName:"å¼ ä¸‰",createdAt:"",updatedAt:""}])})(),(async()=>{_([{id:"1",name:"ç²ªä¾¿æ ·æœ¬",code:"FECES",category:"biological",description:"äººä½“æˆ–åŠ¨ç‰©ç²ªä¾¿æ ·æœ¬",storageCondition:"-80Â°Cå†·å†»ä¿å­˜",processingTime:24,isActive:!0,createdAt:"",updatedAt:""},{id:"2",name:"åœŸå£¤æ ·æœ¬",code:"SOIL",category:"environmental",description:"å„ç±»åœŸå£¤ç¯å¢ƒæ ·æœ¬",storageCondition:"-20Â°Cå†·å†»ä¿å­˜",processingTime:48,isActive:!0,createdAt:"",updatedAt:""},{id:"3",name:"æ°´ä½“æ ·æœ¬",code:"WATER",category:"environmental",description:"æµ·æ°´ã€æ·¡æ°´ç­‰æ°´ä½“æ ·æœ¬",storageCondition:"-80Â°Cå†·å†»ä¿å­˜",processingTime:12,isActive:!0,createdAt:"",updatedAt:""}])})()},[]);const Ce=e=>({received:"blue",processing:"orange",completed:"green",failed:"red",on_hold:"gray"}[e]),Ae=e=>({received:"å·²æ¥æ”¶",processing:"å¤„ç†ä¸­",completed:"å·²å®Œæˆ",failed:"å¤±è´¥",on_hold:"æš‚åœ"}[e]),ke=e=>({low:"green",medium:"orange",high:"red",urgent:"purple"}[e]),Ye=e=>({low:"ä½",medium:"ä¸­",high:"é«˜",urgent:"ç´§æ€¥"}[e]),Te=async e=>{try{G(!0),await new Promise(e=>setTimeout(e,1e3));const t=L.find(t=>t.id===e.projectId),s=J.find(t=>t.id===e.sampleTypeId);if(re){const a={...re,...e,projectName:(null==t?void 0:t.name)||"",sampleTypeName:(null==s?void 0:s.name)||"",receivedDate:e.receivedDate?Y(e.receivedDate).format("YYYY-MM-DD"):"",expectedDate:e.expectedDate?Y(e.expectedDate).format("YYYY-MM-DD"):"",updatedAt:(new Date).toISOString()};I(l.map(e=>e.id===re.id?a:e)),b.success("æ ·æœ¬ä¿¡æ¯æ›´æ–°æˆåŠŸ")}else{const a={id:Date.now().toString(),code:e.code,barcode:e.barcode||`BC${Date.now()}`,name:e.name,projectId:e.projectId,projectName:(null==t?void 0:t.name)||"",sampleTypeId:e.sampleTypeId,sampleTypeName:(null==s?void 0:s.name)||"",status:"received",priority:e.priority||"medium",receivedDate:e.receivedDate?Y(e.receivedDate).format("YYYY-MM-DD"):Y().format("YYYY-MM-DD"),expectedDate:e.expectedDate?Y(e.expectedDate).format("YYYY-MM-DD"):"",volume:e.volume?parseFloat(e.volume):void 0,concentration:e.concentration?parseFloat(e.concentration):void 0,purity:e.purity?parseFloat(e.purity):void 0,qualityScore:85,storageLocation:`A${Math.floor(9*Math.random())+1}-${String(Math.floor(99*Math.random())+1).padStart(2,"0")}-${String(Math.floor(999*Math.random())+1).padStart(3,"0")}`,temperature:-80,receiverId:"1",receiverName:"å½“å‰ç”¨æˆ·",notes:e.notes||"",qcPassed:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};I([...l,a]),b.success("æ ·æœ¬ç™»è®°æˆåŠŸ")}W(!1),de.resetFields(),ie(null)}catch(t){b.error("ä¿å­˜æ ·æœ¬å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{G(!1)}},Ne=l.filter(e=>{const t=!ce||e.name.toLowerCase().includes(ce.toLowerCase())||e.code.toLowerCase().includes(ce.toLowerCase()),s=!xe||e.status===xe,a=!me||e.projectId===me;return t&&s&&a}),be={total:l.length,received:l.filter(e=>"received"===e.status).length,processing:l.filter(e=>"processing"===e.status).length,completed:l.filter(e=>"completed"===e.status).length},Me=[{title:"æ ·æœ¬ç¼–å·",dataIndex:"code",key:"code",width:120,fixed:"left"},{title:"æ ·æœ¬åç§°",dataIndex:"name",key:"name",width:200,ellipsis:!0},{title:"é¡¹ç›®åç§°",dataIndex:"projectName",key:"projectName",width:180,ellipsis:!0},{title:"æ ·æœ¬ç±»å‹",dataIndex:"sampleTypeName",key:"sampleTypeName",width:120},{title:"çŠ¶æ€",dataIndex:"status",key:"status",width:100,render:t=>e.jsx(C,{color:Ce(t),children:Ae(t)})},{title:"ä¼˜å…ˆçº§",dataIndex:"priority",key:"priority",width:80,render:t=>e.jsx(C,{color:ke(t),children:Ye(t)})},{title:"æ¥æ”¶æ—¥æœŸ",dataIndex:"receivedDate",key:"receivedDate",width:120},{title:"é¢„æœŸå®Œæˆ",dataIndex:"expectedDate",key:"expectedDate",width:120},{title:"è´¨æ£€çŠ¶æ€",dataIndex:"qcPassed",key:"qcPassed",width:100,render:t=>t?e.jsx(A,{status:"success",text:"é€šè¿‡"}):e.jsx(A,{status:"error",text:"æœªé€šè¿‡"})},{title:"æ“ä½œ",key:"action",width:200,fixed:"right",render:(t,s)=>e.jsxs(n,{size:"small",children:[e.jsx(M,{title:"æŸ¥çœ‹è¯¦æƒ…",children:e.jsx(o,{type:"text",icon:e.jsx(B,{}),onClick:()=>(ne(s),void U(!0))})}),e.jsx(M,{title:"ç¼–è¾‘",children:e.jsx(o,{type:"text",icon:e.jsx(q,{}),onClick:()=>{return ie(e=s),de.setFieldsValue({...e,receivedDate:Y(e.receivedDate),expectedDate:e.expectedDate?Y(e.expectedDate):null}),void W(!0);var e}})}),e.jsx(M,{title:"ç”Ÿæˆæ¡ç ",children:e.jsx(o,{type:"text",icon:e.jsx(P,{}),onClick:()=>(ne(s),void te(!0))})}),e.jsx($,{title:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ ·æœ¬å—ï¼Ÿ",onConfirm:()=>(async e=>{try{G(!0),await new Promise(e=>setTimeout(e,500)),I(l.filter(t=>t.id!==e)),b.success("æ ·æœ¬åˆ é™¤æˆåŠŸ")}catch(t){b.error("åˆ é™¤æ ·æœ¬å¤±è´¥")}finally{G(!1)}})(s.id),okText:"ç¡®å®š",cancelText:"å–æ¶ˆ",children:e.jsx(M,{title:"åˆ é™¤",children:e.jsx(o,{type:"text",danger:!0,icon:e.jsx(z,{})})})})]})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(a,{style:{marginBottom:24},children:e.jsxs(r,{gutter:16,align:"middle",children:[e.jsxs(i,{span:12,children:[e.jsx(R,{level:2,style:{margin:0},children:"æ ·æœ¬æ¥æ”¶"}),e.jsxs(Z,{type:"secondary",children:["ğŸ“Š ä»Šæ—¥ç»Ÿè®¡: æ¥æ”¶",be.received,"æ ·æœ¬ | å¤„ç†ä¸­",be.processing,"ä¸ª | å·²å®Œæˆ",be.completed,"ä¸ª"]})]}),e.jsx(i,{span:12,style:{textAlign:"right"},children:e.jsxs(n,{size:"large",children:[e.jsx(d,{title:"æ€»æ ·æœ¬æ•°",value:be.total}),e.jsx(d,{title:"å¾…å¤„ç†",value:be.received}),e.jsx(d,{title:"è¿›è¡Œä¸­",value:be.processing}),e.jsx(d,{title:"å·²å®Œæˆ",value:be.completed})]})})]})}),e.jsx(a,{style:{marginBottom:24},children:e.jsxs(r,{gutter:16,align:"middle",children:[e.jsx(i,{span:12,children:e.jsxs(n,{size:"large",children:[e.jsxs("div",{children:[e.jsx(Z,{strong:!0,children:"æ¥æ”¶æ¨¡å¼ï¼š"}),e.jsxs(c.Group,{value:je,onChange:e=>ue(e.target.value),style:{marginLeft:8},children:[e.jsx(c.Button,{value:"single",children:"ğŸ”˜ å•ä¸ªç™»è®°"}),e.jsx(c.Button,{value:"batch",children:"ğŸ”˜ æ‰¹é‡å¯¼å…¥"})]})]}),e.jsx(o,{type:"primary",icon:e.jsx(x,{}),style:{backgroundColor:"#52c41a",borderColor:"#52c41a"},children:"æ‰«ææªæ¨¡å¼"})]})}),e.jsx(i,{span:12,style:{textAlign:"right"},children:e.jsx(n,{children:"single"===je?e.jsx(o,{type:"primary",icon:e.jsx(p,{}),onClick:()=>{ie(null),de.resetFields();const e=`BC${Date.now()}`;de.setFieldsValue({barcode:e}),W(!0)},children:"æ–°å¢æ ·æœ¬"}):e.jsx(o,{type:"primary",icon:e.jsx(m,{}),onClick:()=>ae(!0),children:"æ‰¹é‡å¯¼å…¥"})})})]})}),e.jsx(a,{style:{marginBottom:24},children:e.jsxs(r,{gutter:16,children:[e.jsx(i,{span:8,children:e.jsx(h.Search,{placeholder:"æœç´¢æ ·æœ¬ç¼–å·æˆ–åç§°",value:ce,onChange:e=>oe(e.target.value),onSearch:oe,allowClear:!0})}),e.jsx(i,{span:6,children:e.jsxs(j,{placeholder:"ç­›é€‰çŠ¶æ€",value:xe,onChange:pe,allowClear:!0,style:{width:"100%"},children:[e.jsx(F,{value:"received",children:"å·²æ¥æ”¶"}),e.jsx(F,{value:"processing",children:"å¤„ç†ä¸­"}),e.jsx(F,{value:"completed",children:"å·²å®Œæˆ"}),e.jsx(F,{value:"failed",children:"å¤±è´¥"}),e.jsx(F,{value:"on_hold",children:"æš‚åœ"})]})}),e.jsx(i,{span:6,children:e.jsx(j,{placeholder:"ç­›é€‰é¡¹ç›®",value:me,onChange:he,allowClear:!0,style:{width:"100%"},children:L.map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))})}),e.jsx(i,{span:4,children:e.jsx(o,{type:"default",onClick:()=>{oe(""),pe(""),he("")},children:"é‡ç½®ç­›é€‰"})})]})}),e.jsx(a,{title:"æ ·æœ¬åˆ—è¡¨",children:e.jsx(u,{columns:Me,dataSource:Ne,rowKey:"id",loading:Q,scroll:{x:1200},pagination:{total:Ne.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`ç¬¬ ${t[0]}-${t[1]} æ¡/å…± ${e} æ¡`}})}),e.jsx(g,{title:re?"ç¼–è¾‘æ ·æœ¬":"æ–°å¢æ ·æœ¬",open:K,onCancel:()=>{W(!1),de.resetFields()},footer:null,width:800,children:e.jsxs(s,{form:de,layout:"vertical",onFinish:Te,children:[e.jsxs(r,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"æ ·æœ¬ç¼–å·",name:"code",rules:[{required:!0,message:"è¯·è¾“å…¥æ ·æœ¬ç¼–å·"}],children:e.jsx(h,{placeholder:"è¯·è¾“å…¥æ ·æœ¬ç¼–å·"})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"æ ·æœ¬ç±»å‹",name:"sampleTypeId",rules:[{required:!0,message:"è¯·é€‰æ‹©æ ·æœ¬ç±»å‹"}],children:e.jsx(j,{placeholder:"è¯·é€‰æ‹©æ ·æœ¬ç±»å‹",children:J.map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))})})})]}),e.jsxs(r,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"æ ·æœ¬åç§°",name:"name",rules:[{required:!0,message:"è¯·è¾“å…¥æ ·æœ¬åç§°"}],children:e.jsx(h,{placeholder:"è¯·è¾“å…¥æ ·æœ¬åç§°"})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"æ‰€å±é¡¹ç›®",name:"projectId",rules:[{required:!0,message:"è¯·é€‰æ‹©æ‰€å±é¡¹ç›®"}],children:e.jsx(j,{placeholder:"è¯·é€‰æ‹©æ‰€å±é¡¹ç›®",children:L.map(t=>e.jsx(F,{value:t.id,children:t.name},t.id))})})})]}),e.jsxs(r,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"æ¥æ”¶æ—¥æœŸ",name:"receivedDate",rules:[{required:!0,message:"è¯·é€‰æ‹©æ¥æ”¶æ—¥æœŸ"}],children:e.jsx(y,{style:{width:"100%"}})})}),e.jsx(i,{span:12,children:e.jsx(s.Item,{label:"é¢„æœŸå®Œæˆæ—¥æœŸ",name:"expectedDate",children:e.jsx(y,{style:{width:"100%"}})})})]}),e.jsxs(r,{gutter:16,children:[e.jsx(i,{span:8,children:e.jsx(s.Item,{label:"ä½“ç§¯ (mL)",name:"volume",children:e.jsx(h,{type:"number",placeholder:"è¯·è¾“å…¥ä½“ç§¯"})})}),e.jsx(i,{span:8,children:e.jsx(s.Item,{label:"æµ“åº¦ (ng/Î¼L)",name:"concentration",children:e.jsx(h,{type:"number",placeholder:"è¯·è¾“å…¥æµ“åº¦"})})}),e.jsx(i,{span:8,children:e.jsx(s.Item,{label:"ä¼˜å…ˆçº§",name:"priority",initialValue:"medium",children:e.jsxs(j,{children:[e.jsx(F,{value:"low",children:"ä½"}),e.jsx(F,{value:"medium",children:"ä¸­"}),e.jsx(F,{value:"high",children:"é«˜"}),e.jsx(F,{value:"urgent",children:"ç´§æ€¥"})]})})})]}),e.jsx(s.Item,{label:"å¤‡æ³¨ä¿¡æ¯",name:"notes",children:e.jsx(V,{rows:3,placeholder:"è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯"})}),e.jsx(s.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(n,{children:[e.jsx(o,{onClick:()=>W(!1),children:"å–æ¶ˆ"}),e.jsx(o,{type:"primary",htmlType:"submit",loading:Q,children:"ä¿å­˜å¹¶ç»§ç»­"}),e.jsx(o,{type:"primary",htmlType:"submit",loading:Q,onClick:()=>{de.validateFields().then(e=>{Te(e).then(()=>{})})},children:"ä¿å­˜å¹¶æŸ¥çœ‹åˆ—è¡¨"})]})})]})}),e.jsxs(g,{title:"æ‰¹é‡æ ·æœ¬å¯¼å…¥",open:se,onCancel:()=>{ae(!1),ye("template"),Ie([]),we([]),De(null)},footer:null,width:900,destroyOnClose:!0,children:[e.jsxs(v,{current:"template"===ge?0:"upload"===ge?1:"validate"===ge?2:3,style:{marginBottom:24},children:[e.jsx(E,{title:"ä¸‹è½½æ¨¡æ¿"}),e.jsx(E,{title:"å¡«å†™æ•°æ®"}),e.jsx(E,{title:"ä¸Šä¼ éªŒè¯"}),e.jsx(E,{title:"ç¡®è®¤å¯¼å…¥"})]}),"template"===ge&&e.jsxs("div",{style:{textAlign:"center",padding:"40px 0"},children:[e.jsx(D,{style:{fontSize:64,color:"#52c41a",marginBottom:16}}),e.jsx(R,{level:4,children:"æ­¥éª¤1: ä¸‹è½½Excelæ¨¡æ¿"}),e.jsx(Z,{type:"secondary",style:{display:"block",marginBottom:24},children:"è¯·å…ˆä¸‹è½½æ ·æœ¬å¯¼å…¥æ¨¡æ¿ï¼ŒæŒ‰ç…§æ¨¡æ¿æ ¼å¼å¡«å†™æ ·æœ¬ä¿¡æ¯"}),e.jsxs(n,{direction:"vertical",size:"large",children:[e.jsx(o,{type:"primary",icon:e.jsx(f,{}),size:"large",onClick:()=>{b.success("æ¨¡æ¿ä¸‹è½½æˆåŠŸ")},children:"ä¸‹è½½Excelæ¨¡æ¿"}),e.jsx(o,{type:"default",onClick:()=>ye("upload"),children:"å·²ä¸‹è½½ï¼Œç»§ç»­ä¸‹ä¸€æ­¥"})]})]}),"upload"===ge&&e.jsxs("div",{children:[e.jsx(R,{level:4,children:"æ­¥éª¤2: ä¸Šä¼ å¡«å†™å¥½çš„Excelæ–‡ä»¶"}),e.jsxs(H,{name:"file",multiple:!1,accept:".xlsx,.xls",customRequest:({file:e,onSuccess:t})=>{setTimeout(()=>{null==t||t("ok")},1e3)},onChange:e=>{const{status:t}=e.file;if("done"===t){Ie([{"æ ·æœ¬ç¼–å·":"S001","æ ·æœ¬åç§°":"æ ·æœ¬1","æ ·æœ¬ç±»å‹":"DNA","æ¥æºé¡¹ç›®":"é¡¹ç›®A","çŠ¶æ€":"âœ…"},{"æ ·æœ¬ç¼–å·":"S002","æ ·æœ¬åç§°":"æ ·æœ¬2","æ ·æœ¬ç±»å‹":"RNA","æ¥æºé¡¹ç›®":"é¡¹ç›®B","çŠ¶æ€":"âš ï¸"},{"æ ·æœ¬ç¼–å·":"S003","æ ·æœ¬åç§°":"æ ·æœ¬3","æ ·æœ¬ç±»å‹":"DNA","æ¥æºé¡¹ç›®":"é¡¹ç›®C","çŠ¶æ€":"âœ…"},{"æ ·æœ¬ç¼–å·":"S004","æ ·æœ¬åç§°":"æ ·æœ¬4","æ ·æœ¬ç±»å‹":"Protein","æ¥æºé¡¹ç›®":"é¡¹ç›®D","çŠ¶æ€":"âŒ"},{"æ ·æœ¬ç¼–å·":"S005","æ ·æœ¬åç§°":"æ ·æœ¬5","æ ·æœ¬ç±»å‹":"DNA","æ¥æºé¡¹ç›®":"é¡¹ç›®E","çŠ¶æ€":"âœ…"}]),De(e.file),ye("validate"),b.success(`${e.file.name} æ–‡ä»¶ä¸Šä¼ æˆåŠŸ`)}else"error"===t&&b.error(`${e.file.name} æ–‡ä»¶ä¸Šä¼ å¤±è´¥`)},style:{marginBottom:16},children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(S,{})}),e.jsx("p",{className:"ant-upload-text",children:"ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œä¸Šä¼ "}),e.jsx("p",{className:"ant-upload-hint",children:"æ”¯æŒ .xlsx å’Œ .xls æ ¼å¼çš„Excelæ–‡ä»¶"})]}),ve&&e.jsx(w,{message:"æ–‡ä»¶ä¸Šä¼ æˆåŠŸ",description:`å·²ä¸Šä¼ æ–‡ä»¶: ${ve.name}`,type:"success",showIcon:!0,style:{marginBottom:16}})]}),"validate"===ge&&e.jsxs("div",{children:[e.jsx(R,{level:4,children:"æ­¥éª¤3: æ•°æ®é¢„è§ˆå’ŒéªŒè¯"}),e.jsx(Z,{type:"secondary",style:{display:"block",marginBottom:16},children:"é¢„è§ˆå‰5è¡Œæ•°æ®ï¼Œè¯·æ£€æŸ¥æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®"}),e.jsx(u,{size:"small",dataSource:fe,columns:[{title:"ç¼–å·",dataIndex:"æ ·æœ¬ç¼–å·",key:"æ ·æœ¬ç¼–å·"},{title:"åç§°",dataIndex:"æ ·æœ¬åç§°",key:"æ ·æœ¬åç§°"},{title:"ç±»å‹",dataIndex:"æ ·æœ¬ç±»å‹",key:"æ ·æœ¬ç±»å‹"},{title:"é¡¹ç›®",dataIndex:"æ¥æºé¡¹ç›®",key:"æ¥æºé¡¹ç›®"},{title:"çŠ¶æ€",dataIndex:"çŠ¶æ€",key:"çŠ¶æ€",render:t=>e.jsx("span",{style:{color:"âœ…"===t?"#52c41a":"âš ï¸"===t?"#faad14":"#ff4d4f"},children:t})}],pagination:!1,style:{marginBottom:16}}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs(n,{children:[e.jsx(o,{onClick:()=>ye("upload"),children:"é‡æ–°ä¸Šä¼ "}),e.jsx(o,{type:"primary",onClick:()=>{const e=fe.map((e,t)=>({...e,rowIndex:t+1,isValid:"âœ…"===e.çŠ¶æ€,errors:"âŒ"===e.çŠ¶æ€?["æ ·æœ¬ç±»å‹ä¸æ”¯æŒ"]:"âš ï¸"===e.çŠ¶æ€?["é¡¹ç›®åç§°éœ€è¦ç¡®è®¤"]:[]}));we(e),ye("confirm"),b.success("æ•°æ®éªŒè¯å®Œæˆ")},children:"éªŒè¯æ•°æ®"})]})})]}),"confirm"===ge&&e.jsxs("div",{children:[e.jsx(R,{level:4,children:"æ­¥éª¤4: ç¡®è®¤å¯¼å…¥"}),e.jsx(w,{message:"æ•°æ®éªŒè¯å®Œæˆ",description:`å…± ${Se.length} æ¡æ•°æ®ï¼Œå…¶ä¸­ ${Se.filter(e=>e.isValid).length} æ¡æœ‰æ•ˆï¼Œ${Se.filter(e=>!e.isValid).length} æ¡æœ‰é”™è¯¯`,type:Se.filter(e=>!e.isValid).length>0?"warning":"success",showIcon:!0,style:{marginBottom:16}}),e.jsx(u,{size:"small",dataSource:Se,columns:[{title:"è¡Œå·",dataIndex:"rowIndex",key:"rowIndex",width:60},{title:"æ ·æœ¬ç¼–å·",dataIndex:"æ ·æœ¬ç¼–å·",key:"æ ·æœ¬ç¼–å·"},{title:"æ ·æœ¬åç§°",dataIndex:"æ ·æœ¬åç§°",key:"æ ·æœ¬åç§°"},{title:"æ ·æœ¬ç±»å‹",dataIndex:"æ ·æœ¬ç±»å‹",key:"æ ·æœ¬ç±»å‹"},{title:"éªŒè¯ç»“æœ",key:"validation",render:(t,s)=>s.isValid?e.jsx(C,{color:"success",children:"æœ‰æ•ˆ"}):e.jsx(C,{color:"error",children:"é”™è¯¯"})},{title:"é”™è¯¯ä¿¡æ¯",dataIndex:"errors",key:"errors",render:t=>t.length>0?e.jsx(Z,{type:"danger",children:t.join(", ")}):null}],pagination:!1,style:{marginBottom:16}}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs(n,{children:[e.jsx(o,{onClick:()=>ye("upload"),children:"é‡æ–°ä¸Šä¼ "}),e.jsx(o,{type:"primary",onClick:async()=>{try{G(!0),await new Promise(e=>setTimeout(e,2e3));const e=Se.filter(e=>e.isValid),t=e.map((e,t)=>({id:(Date.now()+t).toString(),code:e.æ ·æœ¬ç¼–å·,barcode:`BC${Date.now()+t}`,name:e.æ ·æœ¬åç§°,projectId:"1",projectName:e.æ¥æºé¡¹ç›®,sampleTypeId:"1",sampleTypeName:e.æ ·æœ¬ç±»å‹,status:"received",priority:"medium",receivedDate:Y().format("YYYY-MM-DD"),expectedDate:Y().add(5,"day").format("YYYY-MM-DD"),volume:5,receiverId:"1",receiverName:"å½“å‰ç”¨æˆ·",qcPassed:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}));I([...l,...t]),ae(!1),ye("template"),Ie([]),we([]),De(null),b.success(`æˆåŠŸå¯¼å…¥ ${e.length} ä¸ªæ ·æœ¬`)}catch(e){b.error("æ‰¹é‡å¯¼å…¥å¤±è´¥")}finally{G(!1)}},loading:Q,disabled:0===Se.filter(e=>e.isValid).length,children:"ç¡®è®¤å¯¼å…¥"})]})})]})]}),e.jsx(g,{title:"æ ·æœ¬è¯¦æƒ…",open:X,onCancel:()=>U(!1),footer:[e.jsx(o,{onClick:()=>U(!1),children:"å…³é—­"},"close")],width:800,children:le&&e.jsxs("div",{children:[e.jsxs(r,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsxs(a,{size:"small",title:"åŸºæœ¬ä¿¡æ¯",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"æ ·æœ¬ç¼–å·ï¼š"}),le.code]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ ·æœ¬åç§°ï¼š"}),le.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ¡ç ï¼š"}),le.barcode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ ·æœ¬ç±»å‹ï¼š"}),le.sampleTypeName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ‰€å±é¡¹ç›®ï¼š"}),le.projectName]})]})}),e.jsx(i,{span:12,children:e.jsxs(a,{size:"small",title:"çŠ¶æ€ä¿¡æ¯",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"å½“å‰çŠ¶æ€ï¼š"}),e.jsx(C,{color:Ce(le.status),style:{marginLeft:8},children:Ae(le.status)})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ä¼˜å…ˆçº§ï¼š"}),e.jsx(C,{color:ke(le.priority),style:{marginLeft:8},children:Ye(le.priority)})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"è´¨æ£€çŠ¶æ€ï¼š"}),e.jsx(A,{status:le.qcPassed?"success":"error",text:le.qcPassed?"é€šè¿‡":"æœªé€šè¿‡",style:{marginLeft:8}})]})]})})]}),e.jsx(k,{}),e.jsxs(r,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsxs(a,{size:"small",title:"å­˜å‚¨ä¿¡æ¯",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"å­˜å‚¨ä½ç½®ï¼š"}),le.storageLocation]}),e.jsxs("p",{children:[e.jsx("strong",{children:"å­˜å‚¨æ¸©åº¦ï¼š"}),le.temperature,"Â°C"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ¥æ”¶æ—¥æœŸï¼š"}),Y(le.receivedDate).format("YYYY-MM-DD")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"é¢„æœŸå®Œæˆï¼š"}),le.expectedDate?Y(le.expectedDate).format("YYYY-MM-DD"):"æœªè®¾ç½®"]})]})}),e.jsx(i,{span:12,children:e.jsxs(a,{size:"small",title:"å¤„ç†ä¿¡æ¯",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"æ¥æ”¶äººï¼š"}),le.receiverName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"åˆ›å»ºæ—¶é—´ï¼š"}),Y(le.createdAt).format("YYYY-MM-DD HH:mm")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ›´æ–°æ—¶é—´ï¼š"}),Y(le.updatedAt).format("YYYY-MM-DD HH:mm")]})]})})]}),e.jsx(k,{}),e.jsx(a,{size:"small",title:"å¤‡æ³¨ä¿¡æ¯",children:e.jsx("p",{children:le.notes||"æ— å¤‡æ³¨"})})]})}),e.jsx(g,{title:"æ ·æœ¬æ¡ç ",open:ee,onCancel:()=>te(!1),footer:[e.jsx(o,{type:"primary",icon:e.jsx(N,{}),children:"æ‰“å°æ¡ç "},"print"),e.jsx(o,{onClick:()=>te(!1),children:"å…³é—­"},"close")],width:400,children:le&&e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(T,{value:le.barcode,size:200}),e.jsxs("div",{style:{marginTop:16},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"æ ·æœ¬ç¼–å·ï¼š"}),le.code]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ¡ç ï¼š"}),le.barcode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"æ ·æœ¬åç§°ï¼š"}),le.name]})]})]})})]})};export{J as default};
