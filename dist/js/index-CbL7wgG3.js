import{j as e}from"./index-B0AWbMnF.js";import{r as t,h as a,i as s,N as i}from"./react-vendor-By8n_QN6.js";import{u as r}from"./index-DRSzHTVP.js";import{_ as l,s as n,T as d,a as c,S as o,a0 as h,ag as u,a1 as m,B as x,a2 as p,aW as j,U as y,a3 as g,W as w,aa as I,ab as v,ac as S,al as T,a4 as A,N as k}from"./antd-vendor-BtuZ_fxs.js";const{Title:f}=d,{Option:b}=m,C=()=>{const{setBreadcrumbs:a}=r(),[s,i]=t.useState([]),[d,T]=t.useState(!1),[A,k]=t.useState(!1),[C,M]=t.useState(null),[q,D]=t.useState(""),[F,O]=t.useState(""),[E,z]=t.useState(""),[N]=l.useForm();t.useEffect(()=>{a([{title:"首页"},{title:"基础档案"},{title:"客户管理"}]),B()},[a]);const B=async()=>{T(!0);try{await new Promise(e=>setTimeout(e,1e3));i([{id:"1",name:"第一人民医院",code:"HOSP001",contact:"张医生",phone:"13800138001",email:"zhang@hospital1.com",address:"北京市朝阳区医院路1号",type:"hospital",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",name:"生物技术研究院",code:"RES001",contact:"李研究员",phone:"13800138002",email:"li@biotech.com",address:"上海市浦东新区科技园区",type:"research",status:"active",createdAt:"2024-01-02T00:00:00Z",updatedAt:"2024-01-02T00:00:00Z"},{id:"3",name:"华大基因科技公司",code:"COM001",contact:"王经理",phone:"13800138003",email:"wang@genomics.com",address:"深圳市南山区高新技术园",type:"company",status:"active",createdAt:"2024-01-03T00:00:00Z",updatedAt:"2024-01-03T00:00:00Z"}])}catch(e){n.error("加载客户数据失败")}finally{T(!1)}},L=e=>{M(e||null),k(!0),e?N.setFieldsValue(e):N.resetFields()},Y=()=>{k(!1),M(null),N.resetFields()},P=s.filter(e=>{const t=!q||e.name.toLowerCase().includes(q.toLowerCase())||e.code.toLowerCase().includes(q.toLowerCase())||e.contact.toLowerCase().includes(q.toLowerCase()),a=!F||e.status===F,s=!E||e.type===E;return t&&a&&s}),V=[{title:"客户编码",dataIndex:"code",key:"code",width:120},{title:"客户名称",dataIndex:"name",key:"name",render:t=>e.jsx("span",{style:{fontWeight:500},children:t})},{title:"客户类型",dataIndex:"type",key:"type",width:100,render:t=>{const a={hospital:{color:"blue",text:"医院"},research:{color:"green",text:"科研院所"},company:{color:"orange",text:"企业"}}[t];return e.jsx(w,{color:a.color,children:a.text})}},{title:"联系人",dataIndex:"contact",key:"contact",width:100},{title:"联系电话",dataIndex:"phone",key:"phone",width:130},{title:"邮箱",dataIndex:"email",key:"email",width:180},{title:"状态",dataIndex:"status",key:"status",width:80,render:t=>e.jsx(w,{color:"active"===t?"green":"red",children:"active"===t?"启用":"禁用"})},{title:"操作",key:"action",width:120,render:(t,a)=>e.jsxs(o,{children:[e.jsx(x,{type:"link",icon:e.jsx(I,{}),onClick:()=>L(a),size:"small",children:"编辑"}),e.jsx(v,{title:"确定要删除这个客户吗？",onConfirm:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),i(t=>t.filter(t=>t.id!==e)),n.success("客户删除成功")}catch(t){n.error("删除失败")}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(x,{type:"link",danger:!0,icon:e.jsx(S,{}),size:"small",children:"删除"})})]})}];return e.jsxs("div",{children:[e.jsx(f,{level:3,style:{marginBottom:24},children:"客户管理"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(o,{wrap:!0,children:[e.jsx(h,{placeholder:"搜索客户名称、编码或联系人",prefix:e.jsx(u,{}),value:q,onChange:e=>D(e.target.value),style:{width:250}}),e.jsxs(m,{placeholder:"客户类型",value:E,onChange:z,style:{width:120},allowClear:!0,children:[e.jsx(b,{value:"hospital",children:"医院"}),e.jsx(b,{value:"research",children:"科研院所"}),e.jsx(b,{value:"company",children:"企业"})]}),e.jsxs(m,{placeholder:"状态",value:F,onChange:O,style:{width:100},allowClear:!0,children:[e.jsx(b,{value:"active",children:"启用"}),e.jsx(b,{value:"inactive",children:"禁用"})]}),e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>L(),children:"新增客户"}),e.jsx(x,{icon:e.jsx(j,{}),children:"导出"})]})}),e.jsx(y,{columns:V,dataSource:P,rowKey:"id",loading:d,pagination:{total:P.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]}),e.jsx(g,{title:C?"编辑客户":"新增客户",open:A,onCancel:Y,footer:null,width:600,children:e.jsxs(l,{form:N,layout:"vertical",onFinish:async e=>{try{if(await new Promise(e=>setTimeout(e,1e3)),C)i(t=>t.map(t=>t.id===C.id?{...t,...e,updatedAt:(new Date).toISOString()}:t)),n.success("客户信息更新成功");else{const t={id:Date.now().toString(),...e,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};i(e=>[...e,t]),n.success("客户添加成功")}Y()}catch(t){n.error("保存失败")}},children:[e.jsx(l.Item,{name:"code",label:"客户编码",rules:[{required:!0,message:"请输入客户编码"}],children:e.jsx(h,{placeholder:"请输入客户编码"})}),e.jsx(l.Item,{name:"name",label:"客户名称",rules:[{required:!0,message:"请输入客户名称"}],children:e.jsx(h,{placeholder:"请输入客户名称"})}),e.jsx(l.Item,{name:"type",label:"客户类型",rules:[{required:!0,message:"请选择客户类型"}],children:e.jsxs(m,{placeholder:"请选择客户类型",children:[e.jsx(b,{value:"hospital",children:"医院"}),e.jsx(b,{value:"research",children:"科研院所"}),e.jsx(b,{value:"company",children:"企业"})]})}),e.jsx(l.Item,{name:"contact",label:"联系人",rules:[{required:!0,message:"请输入联系人"}],children:e.jsx(h,{placeholder:"请输入联系人"})}),e.jsx(l.Item,{name:"phone",label:"联系电话",rules:[{required:!0,message:"请输入联系电话"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],children:e.jsx(h,{placeholder:"请输入联系电话"})}),e.jsx(l.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入正确的邮箱格式"}],children:e.jsx(h,{placeholder:"请输入邮箱"})}),e.jsx(l.Item,{name:"address",label:"地址",rules:[{required:!0,message:"请输入地址"}],children:e.jsx(h.TextArea,{placeholder:"请输入地址",rows:3})}),e.jsx(l.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(m,{placeholder:"请选择状态",children:[e.jsx(b,{value:"active",children:"启用"}),e.jsx(b,{value:"inactive",children:"禁用"})]})}),e.jsx(l.Item,{style:{marginBottom:0,textAlign:"right"},children:e.jsxs(o,{children:[e.jsx(x,{onClick:Y,children:"取消"}),e.jsx(x,{type:"primary",htmlType:"submit",children:"保存"})]})})]})})]})},{Title:M}=d,{Option:q}=m,D=()=>{const[a,s]=t.useState([]),[i,r]=t.useState(!1),[d,u]=t.useState(!1),[j,T]=t.useState(null),[A]=l.useForm(),k=[{id:"1",name:"血液",code:"BLOOD",category:"临床样本",description:"全血、血清、血浆等血液样本",storageCondition:"-80°C",processingTime:24,isActive:!0,createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"2",name:"唾液",code:"SALIVA",category:"临床样本",description:"口腔唾液样本",storageCondition:"4°C",processingTime:12,isActive:!0,createdAt:"2024-01-16",updatedAt:"2024-01-16"},{id:"3",name:"粪便",code:"STOOL",category:"临床样本",description:"粪便微生物组样本",storageCondition:"-20°C",processingTime:48,isActive:!0,createdAt:"2024-01-17",updatedAt:"2024-01-17"},{id:"4",name:"土壤",code:"SOIL",category:"环境样本",description:"土壤微生物组样本",storageCondition:"-20°C",processingTime:72,isActive:!1,createdAt:"2024-01-18",updatedAt:"2024-01-18"}],f=[{title:"样本类型名称",dataIndex:"name",key:"name",width:120},{title:"类型编码",dataIndex:"code",key:"code",width:100},{title:"分类",dataIndex:"category",key:"category",width:100},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"存储条件",dataIndex:"storageCondition",key:"storageCondition",width:100},{title:"处理时间(小时)",dataIndex:"processingTime",key:"processingTime",width:120},{title:"状态",dataIndex:"isActive",key:"isActive",width:80,render:t=>e.jsx(w,{color:t?"green":"red",children:t?"启用":"禁用"})},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:100},{title:"操作",key:"action",width:120,render:(t,a)=>e.jsxs(o,{size:"small",children:[e.jsx(x,{type:"link",size:"small",icon:e.jsx(I,{}),onClick:()=>{return T(e=a),A.setFieldsValue(e),void u(!0);var e},children:"编辑"}),e.jsx(v,{title:"确定要删除这个样本类型吗？",onConfirm:()=>(async e=>{try{s(t=>t.filter(t=>t.id!==e)),n.success("删除成功")}catch(t){n.error("删除失败")}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(x,{type:"link",size:"small",danger:!0,icon:e.jsx(S,{}),children:"删除"})})]})}];return t.useEffect(()=>{(async()=>{r(!0);try{await new Promise(e=>setTimeout(e,500)),s(k)}catch(e){n.error("获取样本类型列表失败")}finally{r(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(M,{level:3,style:{marginBottom:24},children:"样本类型管理"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>{T(null),A.resetFields(),u(!0)},children:"新增样本类型"})}),e.jsx(y,{columns:f,dataSource:a,rowKey:"id",loading:i,pagination:{total:a.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},scroll:{x:1e3}})]}),e.jsx(g,{title:j?"编辑样本类型":"新增样本类型",open:d,onCancel:()=>{u(!1),T(null),A.resetFields()},footer:null,width:600,children:e.jsxs(l,{form:A,layout:"vertical",onFinish:async e=>{try{if(j){const t={...j,...e,updatedAt:(new Date).toISOString().split("T")[0]};s(e=>e.map(e=>e.id===j.id?t:e)),n.success("样本类型更新成功")}else{const t={id:Date.now().toString(),...e,createdAt:(new Date).toISOString().split("T")[0],updatedAt:(new Date).toISOString().split("T")[0]};s(e=>[...e,t]),n.success("样本类型创建成功")}u(!1),T(null),A.resetFields()}catch(t){n.error("保存失败")}},children:[e.jsx(l.Item,{name:"name",label:"样本类型名称",rules:[{required:!0,message:"请输入样本类型名称"}],children:e.jsx(h,{placeholder:"请输入样本类型名称"})}),e.jsx(l.Item,{name:"code",label:"类型编码",rules:[{required:!0,message:"请输入类型编码"}],children:e.jsx(h,{placeholder:"请输入类型编码"})}),e.jsx(l.Item,{name:"category",label:"分类",rules:[{required:!0,message:"请选择分类"}],children:e.jsxs(m,{placeholder:"请选择分类",children:[e.jsx(q,{value:"临床样本",children:"临床样本"}),e.jsx(q,{value:"环境样本",children:"环境样本"}),e.jsx(q,{value:"食品样本",children:"食品样本"}),e.jsx(q,{value:"其他",children:"其他"})]})}),e.jsx(l.Item,{name:"description",label:"描述",children:e.jsx(h.TextArea,{placeholder:"请输入描述信息",rows:3})}),e.jsx(l.Item,{name:"storageCondition",label:"存储条件",rules:[{required:!0,message:"请输入存储条件"}],children:e.jsxs(m,{placeholder:"请选择存储条件",children:[e.jsx(q,{value:"室温",children:"室温"}),e.jsx(q,{value:"4°C",children:"4°C"}),e.jsx(q,{value:"-20°C",children:"-20°C"}),e.jsx(q,{value:"-80°C",children:"-80°C"})]})}),e.jsx(l.Item,{name:"processingTime",label:"处理时间(小时)",rules:[{required:!0,message:"请输入处理时间"}],children:e.jsx(h,{type:"number",placeholder:"请输入处理时间"})}),e.jsx(l.Item,{name:"isActive",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(m,{placeholder:"请选择状态",children:[e.jsx(q,{value:!0,children:"启用"}),e.jsx(q,{value:!1,children:"禁用"})]})}),e.jsx(l.Item,{children:e.jsxs(o,{children:[e.jsx(x,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(x,{onClick:()=>{u(!1),T(null),A.resetFields()},children:"取消"})]})})]})})]})},{Title:F}=d,{Option:O}=m,E=()=>{const[a,s]=t.useState([]),[i,r]=t.useState(!1),[d,u]=t.useState(!1),[j,A]=t.useState(null),[k]=l.useForm(),f=[{id:"1",name:"16S rRNA基因测序",code:"16S_SEQ",category:"微生物多样性",description:"细菌16S rRNA基因V3-V4区测序分析",price:800,duration:7,sampleTypes:["血液","粪便","唾液"],methodology:"Illumina NovaSeq",isActive:!0,createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"2",name:"ITS基因测序",code:"ITS_SEQ",category:"微生物多样性",description:"真菌ITS1-ITS2区域测序分析",price:900,duration:7,sampleTypes:["土壤","粪便"],methodology:"Illumina MiSeq",isActive:!0,createdAt:"2024-01-16",updatedAt:"2024-01-16"},{id:"3",name:"宏基因组测序",code:"WGS_META",category:"功能基因组",description:"全基因组鸟枪法测序",price:2500,duration:14,sampleTypes:["粪便","土壤"],methodology:"Illumina NovaSeq",isActive:!0,createdAt:"2024-01-17",updatedAt:"2024-01-17"},{id:"4",name:"代谢组学分析",code:"METABOLOME",category:"代谢分析",description:"非靶向代谢组学分析",price:3e3,duration:21,sampleTypes:["血液","尿液"],methodology:"LC-MS/MS",isActive:!1,createdAt:"2024-01-18",updatedAt:"2024-01-18"}],b=[{title:"项目名称",dataIndex:"name",key:"name",width:150},{title:"项目编码",dataIndex:"code",key:"code",width:120},{title:"分类",dataIndex:"category",key:"category",width:120},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"价格(元)",dataIndex:"price",key:"price",width:100,render:e=>`¥${e}`},{title:"周期(天)",dataIndex:"duration",key:"duration",width:80},{title:"适用样本",dataIndex:"sampleTypes",key:"sampleTypes",width:150,render:t=>e.jsx("div",{children:t.map(t=>e.jsx(w,{size:"small",style:{marginBottom:2},children:t},t))})},{title:"检测方法",dataIndex:"methodology",key:"methodology",width:120},{title:"状态",dataIndex:"isActive",key:"isActive",width:80,render:t=>e.jsx(w,{color:t?"green":"red",children:t?"启用":"禁用"})},{title:"操作",key:"action",width:120,render:(t,a)=>e.jsxs(o,{size:"small",children:[e.jsx(x,{type:"link",size:"small",icon:e.jsx(I,{}),onClick:()=>{return A(e=a),k.setFieldsValue(e),void u(!0);var e},children:"编辑"}),e.jsx(v,{title:"确定要删除这个检测项目吗？",onConfirm:()=>(async e=>{try{s(t=>t.filter(t=>t.id!==e)),n.success("删除成功")}catch(t){n.error("删除失败")}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(x,{type:"link",size:"small",danger:!0,icon:e.jsx(S,{}),children:"删除"})})]})}];return t.useEffect(()=>{(async()=>{r(!0);try{await new Promise(e=>setTimeout(e,500)),s(f)}catch(e){n.error("获取检测项目列表失败")}finally{r(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(F,{level:3,style:{marginBottom:24},children:"检测项目管理"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>{A(null),k.resetFields(),u(!0)},children:"新增检测项目"})}),e.jsx(y,{columns:b,dataSource:a,rowKey:"id",loading:i,pagination:{total:a.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},scroll:{x:1200}})]}),e.jsx(g,{title:j?"编辑检测项目":"新增检测项目",open:d,onCancel:()=>{u(!1),A(null),k.resetFields()},footer:null,width:700,children:e.jsxs(l,{form:k,layout:"vertical",onFinish:async e=>{try{if(j){const t={...j,...e,updatedAt:(new Date).toISOString().split("T")[0]};s(e=>e.map(e=>e.id===j.id?t:e)),n.success("检测项目更新成功")}else{const t={id:Date.now().toString(),...e,createdAt:(new Date).toISOString().split("T")[0],updatedAt:(new Date).toISOString().split("T")[0]};s(e=>[...e,t]),n.success("检测项目创建成功")}u(!1),A(null),k.resetFields()}catch(t){n.error("保存失败")}},children:[e.jsx(l.Item,{name:"name",label:"项目名称",rules:[{required:!0,message:"请输入项目名称"}],children:e.jsx(h,{placeholder:"请输入项目名称"})}),e.jsx(l.Item,{name:"code",label:"项目编码",rules:[{required:!0,message:"请输入项目编码"}],children:e.jsx(h,{placeholder:"请输入项目编码"})}),e.jsx(l.Item,{name:"category",label:"分类",rules:[{required:!0,message:"请选择分类"}],children:e.jsxs(m,{placeholder:"请选择分类",children:[e.jsx(O,{value:"微生物多样性",children:"微生物多样性"}),e.jsx(O,{value:"功能基因组",children:"功能基因组"}),e.jsx(O,{value:"代谢分析",children:"代谢分析"}),e.jsx(O,{value:"蛋白质组",children:"蛋白质组"}),e.jsx(O,{value:"其他",children:"其他"})]})}),e.jsx(l.Item,{name:"description",label:"描述",children:e.jsx(h.TextArea,{placeholder:"请输入项目描述",rows:3})}),e.jsx(l.Item,{name:"price",label:"价格(元)",rules:[{required:!0,message:"请输入价格"}],children:e.jsx(T,{placeholder:"请输入价格",min:0,style:{width:"100%"}})}),e.jsx(l.Item,{name:"duration",label:"检测周期(天)",rules:[{required:!0,message:"请输入检测周期"}],children:e.jsx(T,{placeholder:"请输入检测周期",min:1,style:{width:"100%"}})}),e.jsx(l.Item,{name:"sampleTypes",label:"适用样本类型",rules:[{required:!0,message:"请选择适用样本类型"}],children:e.jsxs(m,{mode:"multiple",placeholder:"请选择适用样本类型",allowClear:!0,children:[e.jsx(O,{value:"血液",children:"血液"}),e.jsx(O,{value:"唾液",children:"唾液"}),e.jsx(O,{value:"粪便",children:"粪便"}),e.jsx(O,{value:"土壤",children:"土壤"}),e.jsx(O,{value:"尿液",children:"尿液"}),e.jsx(O,{value:"其他",children:"其他"})]})}),e.jsx(l.Item,{name:"methodology",label:"检测方法",rules:[{required:!0,message:"请输入检测方法"}],children:e.jsx(h,{placeholder:"请输入检测方法"})}),e.jsx(l.Item,{name:"isActive",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(m,{placeholder:"请选择状态",children:[e.jsx(O,{value:!0,children:"启用"}),e.jsx(O,{value:!1,children:"禁用"})]})}),e.jsx(l.Item,{children:e.jsxs(o,{children:[e.jsx(x,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(x,{onClick:()=>{u(!1),A(null),k.resetFields()},children:"取消"})]})})]})})]})},{Title:z}=d,{Option:N}=m,B=()=>{const[a,s]=t.useState([]),[i,r]=t.useState(!1),[d,u]=t.useState(!1),[j,T]=t.useState(null),[f]=l.useForm(),b=[{id:"1",name:"Illumina NovaSeq 6000",model:"NovaSeq 6000",manufacturer:"Illumina",serialNumber:"NS500001",location:"测序实验室A",status:"running",purchaseDate:"2023-01-15",warrantyExpiry:"2026-01-15",lastMaintenance:"2024-01-10",nextMaintenance:"2024-04-10",specifications:{throughput:"6 Tb",readLength:"2x150 bp",runTime:"13-44 hours"},createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"2",name:"Illumina MiSeq",model:"MiSeq",manufacturer:"Illumina",serialNumber:"MS001234",location:"测序实验室B",status:"idle",purchaseDate:"2022-06-20",warrantyExpiry:"2025-06-20",lastMaintenance:"2024-01-05",nextMaintenance:"2024-04-05",specifications:{throughput:"15 Gb",readLength:"2x300 bp",runTime:"4-55 hours"},createdAt:"2024-01-16",updatedAt:"2024-01-16"},{id:"3",name:"Applied Biosystems 3500",model:"3500 Genetic Analyzer",manufacturer:"Applied Biosystems",serialNumber:"AB350001",location:"分子实验室",status:"maintenance",purchaseDate:"2021-03-10",warrantyExpiry:"2024-03-10",lastMaintenance:"2024-01-20",nextMaintenance:"2024-04-20",specifications:{capillaries:"8",readLength:"900 bp",runTime:"1-3 hours"},createdAt:"2024-01-17",updatedAt:"2024-01-17"},{id:"4",name:"Thermo Fisher Ion Torrent",model:"Ion GeneStudio S5",manufacturer:"Thermo Fisher",serialNumber:"IT550001",location:"测序实验室C",status:"error",purchaseDate:"2023-08-15",warrantyExpiry:"2026-08-15",lastMaintenance:"2024-01-15",nextMaintenance:"2024-04-15",specifications:{throughput:"50 Gb",readLength:"600 bp",runTime:"2-7 hours"},createdAt:"2024-01-18",updatedAt:"2024-01-18"}],C=e=>{switch(e){case"running":return"green";case"idle":return"blue";case"maintenance":return"orange";case"error":return"red";default:return"default"}},M=e=>{switch(e){case"running":return"运行中";case"idle":return"空闲";case"maintenance":return"维护中";case"error":return"故障";default:return"未知"}},q=[{title:"设备名称",dataIndex:"name",key:"name",width:150},{title:"型号",dataIndex:"model",key:"model",width:120},{title:"制造商",dataIndex:"manufacturer",key:"manufacturer",width:120},{title:"序列号",dataIndex:"serialNumber",key:"serialNumber",width:120},{title:"位置",dataIndex:"location",key:"location",width:120},{title:"状态",dataIndex:"status",key:"status",width:100,render:t=>e.jsx(w,{color:C(t),children:M(t)})},{title:"购买日期",dataIndex:"purchaseDate",key:"purchaseDate",width:100},{title:"保修到期",dataIndex:"warrantyExpiry",key:"warrantyExpiry",width:100},{title:"下次维护",dataIndex:"nextMaintenance",key:"nextMaintenance",width:100},{title:"操作",key:"action",width:120,render:(t,a)=>e.jsxs(o,{size:"small",children:[e.jsx(x,{type:"link",size:"small",icon:e.jsx(I,{}),onClick:()=>(e=>{T(e);const t={...e,purchaseDate:e.purchaseDate?k(e.purchaseDate):null,warrantyExpiry:e.warrantyExpiry?k(e.warrantyExpiry):null,lastMaintenance:e.lastMaintenance?k(e.lastMaintenance):null,nextMaintenance:e.nextMaintenance?k(e.nextMaintenance):null};f.setFieldsValue(t),u(!0)})(a),children:"编辑"}),e.jsx(v,{title:"确定要删除这个设备吗？",onConfirm:()=>(async e=>{try{s(t=>t.filter(t=>t.id!==e)),n.success("删除成功")}catch(t){n.error("删除失败")}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(x,{type:"link",size:"small",danger:!0,icon:e.jsx(S,{}),children:"删除"})})]})}];return t.useEffect(()=>{(async()=>{r(!0);try{await new Promise(e=>setTimeout(e,500)),s(b)}catch(e){n.error("获取设备列表失败")}finally{r(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(z,{level:3,style:{marginBottom:24},children:"设备管理"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>{T(null),f.resetFields(),u(!0)},children:"新增设备"})}),e.jsx(y,{columns:q,dataSource:a,rowKey:"id",loading:i,pagination:{total:a.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},scroll:{x:1200}})]}),e.jsx(g,{title:j?"编辑设备":"新增设备",open:d,onCancel:()=>{u(!1),T(null),f.resetFields()},footer:null,width:700,children:e.jsxs(l,{form:f,layout:"vertical",onFinish:async e=>{var t,a,i,r;try{const l={...e,purchaseDate:null==(t=e.purchaseDate)?void 0:t.format("YYYY-MM-DD"),warrantyExpiry:null==(a=e.warrantyExpiry)?void 0:a.format("YYYY-MM-DD"),lastMaintenance:null==(i=e.lastMaintenance)?void 0:i.format("YYYY-MM-DD"),nextMaintenance:null==(r=e.nextMaintenance)?void 0:r.format("YYYY-MM-DD")};if(j){const e={...j,...l,updatedAt:(new Date).toISOString().split("T")[0]};s(t=>t.map(t=>t.id===j.id?e:t)),n.success("设备信息更新成功")}else{const e={id:Date.now().toString(),...l,specifications:l.specifications||{},createdAt:(new Date).toISOString().split("T")[0],updatedAt:(new Date).toISOString().split("T")[0]};s(t=>[...t,e]),n.success("设备创建成功")}u(!1),T(null),f.resetFields()}catch(l){n.error("保存失败")}},children:[e.jsx(l.Item,{name:"name",label:"设备名称",rules:[{required:!0,message:"请输入设备名称"}],children:e.jsx(h,{placeholder:"请输入设备名称"})}),e.jsx(l.Item,{name:"model",label:"设备型号",rules:[{required:!0,message:"请输入设备型号"}],children:e.jsx(h,{placeholder:"请输入设备型号"})}),e.jsx(l.Item,{name:"manufacturer",label:"制造商",rules:[{required:!0,message:"请输入制造商"}],children:e.jsx(h,{placeholder:"请输入制造商"})}),e.jsx(l.Item,{name:"serialNumber",label:"序列号",rules:[{required:!0,message:"请输入序列号"}],children:e.jsx(h,{placeholder:"请输入序列号"})}),e.jsx(l.Item,{name:"location",label:"设备位置",rules:[{required:!0,message:"请输入设备位置"}],children:e.jsx(h,{placeholder:"请输入设备位置"})}),e.jsx(l.Item,{name:"status",label:"设备状态",rules:[{required:!0,message:"请选择设备状态"}],children:e.jsxs(m,{placeholder:"请选择设备状态",children:[e.jsx(N,{value:"running",children:"运行中"}),e.jsx(N,{value:"idle",children:"空闲"}),e.jsx(N,{value:"maintenance",children:"维护中"}),e.jsx(N,{value:"error",children:"故障"})]})}),e.jsx(l.Item,{name:"purchaseDate",label:"购买日期",rules:[{required:!0,message:"请选择购买日期"}],children:e.jsx(A,{placeholder:"请选择购买日期",style:{width:"100%"}})}),e.jsx(l.Item,{name:"warrantyExpiry",label:"保修到期日期",children:e.jsx(A,{placeholder:"请选择保修到期日期",style:{width:"100%"}})}),e.jsx(l.Item,{name:"lastMaintenance",label:"上次维护日期",children:e.jsx(A,{placeholder:"请选择上次维护日期",style:{width:"100%"}})}),e.jsx(l.Item,{name:"nextMaintenance",label:"下次维护日期",children:e.jsx(A,{placeholder:"请选择下次维护日期",style:{width:"100%"}})}),e.jsx(l.Item,{children:e.jsxs(o,{children:[e.jsx(x,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(x,{onClick:()=>{u(!1),T(null),f.resetFields()},children:"取消"})]})})]})})]})},L=()=>{const{setBreadcrumbs:l}=r();return t.useEffect(()=>{l([{title:"首页"},{title:"基础档案"}])},[l]),e.jsxs(a,{children:[e.jsx(s,{index:!0,element:e.jsx(i,{to:"customer",replace:!0})}),e.jsx(s,{path:"customer",element:e.jsx(C,{})}),e.jsx(s,{path:"sample-type",element:e.jsx(D,{})}),e.jsx(s,{path:"test-item",element:e.jsx(E,{})}),e.jsx(s,{path:"equipment",element:e.jsx(B,{})})]})};export{L as default};
