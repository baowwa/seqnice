import{j as e}from"./index-q4y2ftL-.js";import{r as t,h as s,i}from"./react-vendor-BSBC8BLg.js";import{$ as n,s as r,a as l,c as a,e as d,S as c,B as o,a1 as x,bd as h,n as u,a3 as m,a4 as j,V as p,a5 as g,ag as y,X as v,l as S,ai as T,ak as C,al as f,m as I,x as E,b9 as A,b8 as D,as as w,T as b,W as R,at as k,a6 as O,D as z,Y as N,aq as L,Z as _,ax as P,U as M,O as q,ah as B,o as Z,bf as F,am as G,a_ as V,E as Y,G as H,I as $,a7 as U,aW as W,ao as K,az as J,ac as Q,N as X,aQ as ee,b3 as te,bg as se,Q as ie,F as ne,bh as re,bi as le,H as ae}from"./antd-vendor-inL-Hoh7.js";var de=(e=>(e.ADMIN="admin",e.SAMPLE_RECEIVER="sample_receiver",e.LAB_TECHNICIAN="lab_technician",e.ANALYST="analyst",e.REPORTER="reporter",e))(de||{}),ce=(e=>(e.PENDING="pending",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.CANCELLED="cancelled",e))(ce||{}),oe=(e=>(e.PRODUCT_REGISTRATION="product_registration",e.RESEARCH_SERVICE="research_service",e.CLINICAL_DETECTION="clinical_detection",e))(oe||{}),xe=(e=>(e.LEAD="lead",e.COLLABORATIVE="collaborative",e))(xe||{}),he=(e=>(e.NOT_STARTED="not_started",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.BLOCKED="blocked",e))(he||{}),ue=(e=>(e.PENDING="pending",e.ASSIGNED="assigned",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.CANCELLED="cancelled",e))(ue||{});const{Search:me}=m,{TextArea:je}=m,{Option:pe}=j,ge=()=>{const[s,i]=t.useState([]),[I,E]=t.useState(!1),[A,D]=t.useState(!1),[w,b]=t.useState(null),[R]=n.useForm(),[k,O]=t.useState(""),[z,N]=t.useState(void 0);t.useEffect(()=>{L()},[]);const L=async()=>{E(!0);try{i([{id:"1",code:"PRODUCT_REG",name:"产品注册项目",description:"已正式立项",projectCount:12,status:"active"},{id:"2",code:"RD_VALIDATION",name:"研发验证项目",description:"未签订协议，或未正式立项",projectCount:8,status:"active"},{id:"3",code:"RESEARCH_TOPIC",name:"研究课题项目",description:"以发布研究成果、研究论文或课题申报为目的",projectCount:15,status:"active"},{id:"4",code:"RESEARCH_SERVICE",name:"科研服务项目",description:"通常指已签协议",projectCount:23,status:"active"},{id:"5",code:"CLINICAL_DETECTION",name:"临床检测项目",description:"通常指已签协议，或正式对外出具报告",projectCount:6,status:"active"},{id:"6",code:"OTHER",name:"其他",description:"其他类型项目",projectCount:3,status:"inactive"}])}catch(e){r.error("获取项目分类列表失败")}finally{E(!1)}},_=s.filter(e=>{const t=!k||e.name.toLowerCase().includes(k.toLowerCase())||e.code.toLowerCase().includes(k.toLowerCase())||e.description.toLowerCase().includes(k.toLowerCase()),s=void 0===z||e.status===z;return t&&s}),P=e=>{b(e||null),D(!0),e?R.setFieldsValue({code:e.code,name:e.name,description:e.description,status:e.status}):R.resetFields()},M=()=>{D(!1),b(null),R.resetFields()},q=[{title:"分类编码",dataIndex:"code",key:"code",width:150},{title:"分类名称",dataIndex:"name",key:"name",width:200},{title:"分类描述",dataIndex:"description",key:"description",ellipsis:!0,render:t=>e.jsx(y,{title:t,children:t||"-"})},{title:"关联项目数",dataIndex:"projectCount",key:"projectCount",width:120,align:"center",render:t=>e.jsx(v,{color:t>0?"blue":"default",children:t})},{title:"状态",dataIndex:"status",key:"status",width:100,align:"center",render:(t,s)=>e.jsx(S,{checked:"active"===t,onChange:e=>(async(e,t)=>{try{i(s=>s.map(s=>s.id===e?{...s,status:t}:s)),r.success("项目分类已"+("active"===t?"启用":"禁用"))}catch(s){r.error("状态更新失败")}})(s.id,e?"active":"inactive"),checkedChildren:"启用",unCheckedChildren:"禁用"})},{title:"操作",key:"action",width:150,fixed:"right",render:(t,n)=>e.jsxs(c,{size:"small",children:[e.jsx(y,{title:"编辑",children:e.jsx(o,{type:"text",size:"small",icon:e.jsx(T,{}),onClick:()=>P(n)})}),e.jsx(y,{title:"删除",children:e.jsx(C,{title:"确认删除",description:"删除后无法恢复，确认删除该项目分类吗？",onConfirm:()=>(async e=>{try{const t=s.find(t=>t.id===e);if(t&&t.projectCount>0)return void r.error("该分类下存在项目，无法删除");i(t=>t.filter(t=>t.id!==e)),r.success("项目分类删除成功")}catch(t){r.error("删除失败")}})(n.id),okText:"确认",cancelText:"取消",children:e.jsx(o,{type:"text",size:"small",danger:!0,icon:e.jsx(f,{})})})})]})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(l,{children:[e.jsxs(a,{justify:"space-between",align:"middle",style:{marginBottom:16},children:[e.jsx(d,{children:e.jsx("h2",{style:{margin:0},children:"项目分类管理"})}),e.jsx(d,{children:e.jsxs(c,{children:[e.jsx(o,{type:"primary",icon:e.jsx(x,{}),onClick:()=>P(),children:"新建分类"}),e.jsx(o,{icon:e.jsx(h,{}),onClick:()=>{r.info("导出功能开发中...")},children:"导出"}),e.jsx(o,{icon:e.jsx(u,{}),onClick:L,children:"刷新"})]})})]}),e.jsxs(a,{gutter:16,style:{marginBottom:16},children:[e.jsx(d,{span:8,children:e.jsx(me,{placeholder:"搜索分类名称、编码或描述...",allowClear:!0,onSearch:e=>{O(e)},style:{width:"100%"}})}),e.jsx(d,{span:6,children:e.jsxs(j,{placeholder:"状态筛选",allowClear:!0,style:{width:"100%"},onChange:e=>{N(e)},value:z,children:[e.jsx(pe,{value:"active",children:"启用"}),e.jsx(pe,{value:"inactive",children:"禁用"})]})})]}),e.jsx(p,{columns:q,dataSource:_,rowKey:"id",loading:I,pagination:{total:_.length,pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t[0]}-${t[1]} 条/共 ${e} 条`},scroll:{x:1200}})]}),e.jsx(g,{title:w?"编辑项目分类":"新建项目分类",open:A,onOk:async()=>{try{const e=await R.validateFields();if(w){const t={...w,...e};i(e=>e.map(e=>e.id===w.id?t:e)),r.success("项目分类更新成功")}else{const t={id:Date.now().toString(),...e,projectCount:0};i(e=>[...e,t]),r.success("项目分类创建成功")}M()}catch(e){r.error("保存失败")}},onCancel:M,width:600,destroyOnClose:!0,children:e.jsxs(n,{form:R,layout:"vertical",initialValues:{status:"active"},children:[e.jsx(n.Item,{label:"分类编码",name:"code",rules:[{required:!0,message:"请输入分类编码"},{pattern:/^[A-Z_]+$/,message:"分类编码只能包含大写字母和下划线"}],children:e.jsx(m,{placeholder:"请输入分类编码，如：PRODUCT_REG"})}),e.jsx(n.Item,{label:"分类名称",name:"name",rules:[{required:!0,message:"请输入分类名称"},{max:50,message:"分类名称不能超过50个字符"}],children:e.jsx(m,{placeholder:"请输入分类名称"})}),e.jsx(n.Item,{label:"分类描述",name:"description",rules:[{required:!0,message:"请输入分类描述"},{max:200,message:"描述不能超过200个字符"}],children:e.jsx(je,{rows:3,placeholder:"请输入分类描述",showCount:!0,maxLength:200})}),e.jsx(n.Item,{label:"状态",name:"status",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(j,{placeholder:"请选择状态",children:[e.jsx(pe,{value:"active",children:"启用"}),e.jsx(pe,{value:"inactive",children:"禁用"})]})})]})})]})},{Option:ye}=j,{TextArea:ve}=m,{Title:Se,Text:Te}=b,Ce=({projectId:s,centers:i,onCentersChange:h,readonly:u=!1})=>{const[y,S]=t.useState(!1),[b,R]=t.useState(null),[k]=n.useForm(),[O,z]=t.useState(!1),N=e=>({[xe.LEAD]:"主导中心",[xe.COLLABORATIVE]:"协作中心"}[e]),L=[{title:"中心名称",dataIndex:"centerName",key:"centerName",width:200,render:(t,s)=>{return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:t}),e.jsx(v,{color:(i=s.centerType,{[xe.LEAD]:"gold",[xe.COLLABORATIVE]:"blue"}[i]),size:"small",children:N(s.centerType)})]});var i}},{title:"联系人",key:"contact",width:180,render:(t,s)=>e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(E,{})," ",s.contactPerson]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[e.jsx(A,{})," ",s.contactPhone]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[e.jsx(D,{})," ",s.contactEmail]})]})},{title:"地址",dataIndex:"address",key:"address",width:200,render:t=>e.jsxs("div",{children:[e.jsx(w,{})," ",t]})},{title:"职责范围",dataIndex:"responsibilities",key:"responsibilities",width:250,render:t=>e.jsx("div",{children:t.map((t,s)=>e.jsx(v,{style:{marginBottom:2},children:t},s))})},{title:"加入时间",dataIndex:"joinDate",key:"joinDate",width:120,render:e=>new Date(e).toLocaleDateString()},{title:"状态",dataIndex:"isActive",key:"isActive",width:80,render:t=>e.jsx(v,{color:t?"green":"red",children:t?"活跃":"停用"})}];u||L.push({title:"操作",key:"action",width:120,fixed:"right",render:(t,s)=>e.jsxs(c,{size:"small",children:[e.jsx(o,{type:"text",icon:e.jsx(T,{}),onClick:()=>_(s),size:"small"}),e.jsx(C,{title:"确定要删除这个中心吗？",onConfirm:()=>P(s.id),okText:"确定",cancelText:"取消",children:e.jsx(o,{type:"text",icon:e.jsx(f,{}),danger:!0,size:"small"})})]})});const _=e=>{R(e),k.setFieldsValue({...e,responsibilities:e.responsibilities||[]}),S(!0)},P=e=>{const t=i.filter(t=>t.id!==e);h(t),r.success("中心删除成功")},M=(()=>{const e=i.filter(e=>e.centerType===xe.LEAD),t=i.filter(e=>e.centerType===xe.COLLABORATIVE),s=i.filter(e=>e.isActive);return{total:i.length,lead:e.length,collaborative:t.length,active:s.length}})();return e.jsxs("div",{children:[e.jsxs(a,{gutter:16,style:{marginBottom:16},children:[e.jsx(d,{span:6,children:e.jsx(l,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1890ff"},children:M.total}),e.jsx("div",{style:{color:"#666"},children:"总中心数"})]})})}),e.jsx(d,{span:6,children:e.jsx(l,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#faad14"},children:M.lead}),e.jsx("div",{style:{color:"#666"},children:"主导中心"})]})})}),e.jsx(d,{span:6,children:e.jsx(l,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1890ff"},children:M.collaborative}),e.jsx("div",{style:{color:"#666"},children:"协作中心"})]})})}),e.jsx(d,{span:6,children:e.jsx(l,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#52c41a"},children:M.active}),e.jsx("div",{style:{color:"#666"},children:"活跃中心"})]})})})]}),e.jsx(l,{title:"项目中心配置",extra:!u&&e.jsx(o,{type:"primary",icon:e.jsx(x,{}),onClick:()=>{R(null),k.resetFields(),S(!0)},children:"添加中心"}),children:e.jsx(p,{columns:L,dataSource:i,rowKey:"id",scroll:{x:1200},pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 个中心`}})}),e.jsx(g,{title:b?"编辑中心":"添加中心",open:y,onCancel:()=>{S(!1),k.resetFields()},footer:null,width:800,children:e.jsxs(n,{form:k,layout:"vertical",onFinish:async e=>{try{z(!0);const t={id:(null==b?void 0:b.id)||Date.now().toString(),projectId:s,centerId:e.centerId||Date.now().toString(),centerName:e.centerName,centerType:e.centerType,contactPerson:e.contactPerson,contactPhone:e.contactPhone,contactEmail:e.contactEmail,address:e.address,isActive:e.isActive??!0,joinDate:e.joinDate||(new Date).toISOString(),responsibilities:e.responsibilities||[],notes:e.notes,createdAt:(null==b?void 0:b.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()};let n;b?(n=i.map(e=>e.id===b.id?t:e),r.success("中心更新成功")):(n=[...i,t],r.success("中心添加成功")),h(n),S(!1),k.resetFields()}catch(t){r.error("操作失败")}finally{z(!1)}},children:[e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"centerName",label:"中心名称",rules:[{required:!0,message:"请输入中心名称"}],children:e.jsx(m,{placeholder:"请输入中心名称"})})}),e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"centerType",label:"中心类型",rules:[{required:!0,message:"请选择中心类型"}],children:e.jsxs(j,{placeholder:"请选择中心类型",children:[e.jsx(ye,{value:xe.LEAD,children:"主导中心"}),e.jsx(ye,{value:xe.COLLABORATIVE,children:"协作中心"})]})})})]}),e.jsx(I,{orientation:"left",children:"联系信息"}),e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"contactPerson",label:"联系人",rules:[{required:!0,message:"请输入联系人"}],children:e.jsx(m,{placeholder:"请输入联系人"})})}),e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"contactPhone",label:"联系电话",rules:[{required:!0,message:"请输入联系电话"}],children:e.jsx(m,{placeholder:"请输入联系电话"})})}),e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"contactEmail",label:"联系邮箱",rules:[{required:!0,message:"请输入联系邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(m,{placeholder:"请输入联系邮箱"})})})]}),e.jsx(n.Item,{name:"address",label:"地址",rules:[{required:!0,message:"请输入地址"}],children:e.jsx(m,{placeholder:"请输入地址"})}),e.jsx(n.Item,{name:"responsibilities",label:"职责范围",rules:[{required:!0,message:"请选择职责范围"}],children:e.jsxs(j,{mode:"tags",placeholder:"请输入或选择职责范围",style:{width:"100%"},children:[e.jsx(ye,{value:"样本采集",children:"样本采集"}),e.jsx(ye,{value:"样本处理",children:"样本处理"}),e.jsx(ye,{value:"实验检测",children:"实验检测"}),e.jsx(ye,{value:"数据分析",children:"数据分析"}),e.jsx(ye,{value:"质量控制",children:"质量控制"}),e.jsx(ye,{value:"报告生成",children:"报告生成"}),e.jsx(ye,{value:"项目协调",children:"项目协调"})]})}),e.jsx(n.Item,{name:"notes",label:"备注",children:e.jsx(ve,{rows:3,placeholder:"请输入备注信息"})}),e.jsx(n.Item,{name:"isActive",label:"状态",valuePropName:"checked",initialValue:!0,children:e.jsxs(j,{children:[e.jsx(ye,{value:!0,children:"活跃"}),e.jsx(ye,{value:!1,children:"停用"})]})}),e.jsx(n.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(c,{children:[e.jsx(o,{onClick:()=>S(!1),children:"取消"}),e.jsx(o,{type:"primary",htmlType:"submit",loading:O,children:b?"更新":"添加"})]})})]})})]})},{Option:fe}=j,{TextArea:Ie}=m,{Title:Ee,Text:Ae}=b,{RangePicker:De}=O,we=({projectId:s,stages:i,onStagesChange:h,readonly:u=!1,isMultiCenter:S=!1,centers:I=[],onStageTransition:E})=>{const[A,D]=t.useState(!1),[w,b]=t.useState(!1),[O,G]=t.useState(null),[V,Y]=t.useState(null),[H]=n.useForm(),[$]=n.useForm(),[U,W]=t.useState(!1),[K,J]=t.useState([]),[Q,X]=t.useState([]),ee=e=>({[he.NOT_STARTED]:"未开始",[he.IN_PROGRESS]:"进行中",[he.COMPLETED]:"已完成",[he.BLOCKED]:"阻塞"}[e]),te=e=>({[he.NOT_STARTED]:"default",[he.IN_PROGRESS]:"processing",[he.COMPLETED]:"success",[he.BLOCKED]:"error"}[e]),se=t=>({[he.NOT_STARTED]:e.jsx(M,{}),[he.IN_PROGRESS]:e.jsx(P,{}),[he.COMPLETED]:e.jsx(_,{}),[he.BLOCKED]:e.jsx(L,{})}[t]),ie=e=>{if(e.status===he.COMPLETED)return 100;if(e.status===he.NOT_STARTED)return 0;const t=K.filter(t=>t.stageId===e.id);if(0===t.length)return 0;const s=t.filter(e=>e.status===ue.COMPLETED);return Math.round(s.length/t.length*100)},ne=[{title:"阶段顺序",dataIndex:"order",key:"order",width:80,sorter:(e,t)=>e.order-t.order,render:t=>e.jsx("div",{style:{width:32,height:32,borderRadius:"50%",backgroundColor:"#1890ff",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:t})},{title:"阶段名称",dataIndex:"name",key:"name",width:200,render:(t,s)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:4},children:t}),e.jsx(Ae,{type:"secondary",style:{fontSize:"12px"},children:s.description})]})},{title:"状态",dataIndex:"status",key:"status",width:120,render:(t,s)=>e.jsxs("div",{children:[e.jsx(v,{color:te(t),icon:se(t),children:ee(t)}),e.jsx("div",{style:{marginTop:4},children:e.jsx(N,{percent:ie(s),size:"small",showInfo:!1})})]})},{title:"时间安排",key:"timeline",width:200,render:(t,s)=>e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["预计: ",s.estimatedDuration," 天"]}),s.actualDuration&&e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["实际: ",s.actualDuration," 天"]}),s.startDate&&e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["开始: ",q(s.startDate).format("MM-DD")]}),s.endDate&&e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["结束: ",q(s.endDate).format("MM-DD")]})]})},{title:"交付物",dataIndex:"deliverables",key:"deliverables",width:200,render:t=>e.jsxs("div",{children:[t.slice(0,2).map((t,s)=>e.jsx(v,{size:"small",style:{marginBottom:2},children:t},s)),t.length>2&&e.jsxs(v,{size:"small",style:{marginBottom:2},children:["+",t.length-2]})]})}];u||ne.push({title:"操作",key:"action",width:150,fixed:"right",render:(t,s)=>e.jsxs(c,{size:"small",children:[e.jsx(y,{title:"查看任务",children:e.jsx(o,{type:"text",icon:e.jsx(B,{}),onClick:()=>le(s),size:"small"})}),e.jsx(y,{title:"编辑阶段",children:e.jsx(o,{type:"text",icon:e.jsx(T,{}),onClick:()=>re(s),size:"small"})}),e.jsx(y,{title:"阶段配置",children:e.jsx(o,{type:"text",icon:e.jsx(Z,{}),onClick:()=>ae(),size:"small"})}),E&&e.jsx(y,{title:"阶段转换",children:e.jsx(o,{type:"text",icon:e.jsx(F,{}),onClick:()=>de(s),size:"small"})}),e.jsx(C,{title:"确定要删除这个阶段吗？",onConfirm:()=>ce(s.id),okText:"确定",cancelText:"取消",children:e.jsx(o,{type:"text",icon:e.jsx(f,{}),danger:!0,size:"small"})})]})});const re=e=>{G(e),H.setFieldsValue({...e,dateRange:e.startDate&&e.endDate?[q(e.startDate),q(e.endDate)]:void 0,prerequisites:e.prerequisites||[],deliverables:e.deliverables||[]}),D(!0)},le=e=>{Y(e);const t=[{id:"1",stageId:e.id,centerId:"center1",taskName:"样本预处理",taskType:"preprocessing",description:"对样本进行预处理操作",status:ue.COMPLETED,priority:"high",assignedTo:"user1",estimatedHours:8,actualHours:7,startDate:"2024-01-15",endDate:"2024-01-15",completionRate:100,sampleCount:50,completedSamples:50,qualityScore:95,notes:"任务完成质量良好",createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-01-15T18:00:00Z"},{id:"2",stageId:e.id,centerId:"center1",taskName:"质量检测",taskType:"quality_control",description:"对处理后的样本进行质量检测",status:ue.IN_PROGRESS,priority:"medium",assignedTo:"user2",estimatedHours:4,actualHours:2,startDate:"2024-01-16",completionRate:60,sampleCount:50,completedSamples:30,notes:"进展顺利",createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-01-16T15:00:00Z"}];J(t),b(!0)},ae=e=>{r.info("阶段配置功能开发中...")},de=e=>{const t=i.findIndex(t=>t.id===e.id);if(t<i.length-1){const s=i[t+1];null==E||E(e,s)}else r.info("当前已是最后一个阶段")},ce=e=>{const t=i.filter(t=>t.id!==e);h(t),r.success("阶段删除成功")},oe=(()=>{const e=i.filter(e=>e.status===he.NOT_STARTED),t=i.filter(e=>e.status===he.IN_PROGRESS),s=i.filter(e=>e.status===he.COMPLETED),n=i.filter(e=>e.status===he.BLOCKED);return{total:i.length,notStarted:e.length,inProgress:t.length,completed:s.length,blocked:n.length}})();return e.jsxs("div",{children:[e.jsxs(a,{gutter:16,style:{marginBottom:16},children:[e.jsx(d,{span:6,children:e.jsx(l,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1890ff"},children:oe.total}),e.jsx("div",{style:{color:"#666"},children:"总阶段数"})]})})}),e.jsx(d,{span:6,children:e.jsx(l,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#faad14"},children:oe.inProgress}),e.jsx("div",{style:{color:"#666"},children:"进行中"})]})})}),e.jsx(d,{span:6,children:e.jsx(l,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#52c41a"},children:oe.completed}),e.jsx("div",{style:{color:"#666"},children:"已完成"})]})})}),e.jsx(d,{span:6,children:e.jsx(l,{size:"small",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f5222d"},children:oe.blocked}),e.jsx("div",{style:{color:"#666"},children:"阻塞"})]})})})]}),i.length>0&&e.jsx(l,{title:"阶段时间线",style:{marginBottom:16},children:e.jsx(R,{children:i.sort((e,t)=>e.order-t.order).map(t=>e.jsx(R.Item,{color:te(t.status),dot:se(t.status),children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:t.name}),e.jsx("div",{style:{color:"#666",fontSize:"12px"},children:t.description}),e.jsxs("div",{style:{marginTop:4},children:[e.jsx(v,{color:te(t.status),size:"small",children:ee(t.status)}),e.jsxs("span",{style:{marginLeft:8,fontSize:"12px",color:"#666"},children:["预计 ",t.estimatedDuration," 天"]})]})]})},t.id))})}),e.jsx(l,{title:"项目阶段管理",extra:!u&&e.jsx(o,{type:"primary",icon:e.jsx(x,{}),onClick:()=>{G(null),H.resetFields();const e=Math.max(...i.map(e=>e.order),0);H.setFieldsValue({order:e+1}),D(!0)},children:"添加阶段"}),children:e.jsx(p,{columns:ne,dataSource:i,rowKey:"id",scroll:{x:1200},pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 个阶段`}})}),e.jsx(g,{title:O?"编辑阶段":"添加阶段",open:A,onCancel:()=>{D(!1),H.resetFields()},footer:null,width:800,children:e.jsxs(n,{form:H,layout:"vertical",onFinish:async e=>{var t,n,l,a;try{W(!0);const d={id:(null==O?void 0:O.id)||Date.now().toString(),projectId:s,name:e.name,description:e.description,order:e.order,status:e.status||he.NOT_STARTED,startDate:null==(n=null==(t=e.dateRange)?void 0:t[0])?void 0:n.toISOString(),endDate:null==(a=null==(l=e.dateRange)?void 0:l[1])?void 0:a.toISOString(),estimatedDuration:e.estimatedDuration,actualDuration:null==O?void 0:O.actualDuration,prerequisites:e.prerequisites||[],deliverables:e.deliverables||[],isActive:e.isActive??!0,createdAt:(null==O?void 0:O.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()};let c;O?(c=i.map(e=>e.id===O.id?d:e),r.success("阶段更新成功")):(c=[...i,d],r.success("阶段添加成功")),c.sort((e,t)=>e.order-t.order),h(c),D(!1),H.resetFields()}catch(d){r.error("操作失败")}finally{W(!1)}},children:[e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:16,children:e.jsx(n.Item,{name:"name",label:"阶段名称",rules:[{required:!0,message:"请输入阶段名称"}],children:e.jsx(m,{placeholder:"请输入阶段名称"})})}),e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"order",label:"阶段顺序",rules:[{required:!0,message:"请输入阶段顺序"}],children:e.jsx(k,{min:1,placeholder:"阶段顺序",style:{width:"100%"}})})})]}),e.jsx(n.Item,{name:"description",label:"阶段描述",rules:[{required:!0,message:"请输入阶段描述"}],children:e.jsx(Ie,{rows:3,placeholder:"请输入阶段描述"})}),e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"estimatedDuration",label:"预计持续天数",rules:[{required:!0,message:"请输入预计持续天数"}],children:e.jsx(k,{min:1,placeholder:"预计持续天数",style:{width:"100%"}})})}),e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"status",label:"阶段状态",children:e.jsxs(j,{placeholder:"请选择阶段状态",children:[e.jsx(fe,{value:he.NOT_STARTED,children:"未开始"}),e.jsx(fe,{value:he.IN_PROGRESS,children:"进行中"}),e.jsx(fe,{value:he.COMPLETED,children:"已完成"}),e.jsx(fe,{value:he.BLOCKED,children:"阻塞"})]})})})]}),e.jsx(n.Item,{name:"dateRange",label:"计划时间",children:e.jsx(De,{style:{width:"100%"}})}),e.jsx(n.Item,{name:"prerequisites",label:"前置条件",children:e.jsx(j,{mode:"tags",placeholder:"请输入前置条件",style:{width:"100%"}})}),e.jsx(n.Item,{name:"deliverables",label:"交付物",rules:[{required:!0,message:"请输入交付物"}],children:e.jsxs(j,{mode:"tags",placeholder:"请输入交付物",style:{width:"100%"},children:[e.jsx(fe,{value:"样本处理报告",children:"样本处理报告"}),e.jsx(fe,{value:"质量控制报告",children:"质量控制报告"}),e.jsx(fe,{value:"检测数据",children:"检测数据"}),e.jsx(fe,{value:"分析结果",children:"分析结果"}),e.jsx(fe,{value:"阶段总结",children:"阶段总结"})]})}),e.jsx(n.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(c,{children:[e.jsx(o,{onClick:()=>D(!1),children:"取消"}),e.jsx(o,{type:"primary",htmlType:"submit",loading:U,children:O?"更新":"添加"})]})})]})}),e.jsx(z,{title:`${null==V?void 0:V.name} - 任务管理`,placement:"right",width:800,open:w,onClose:()=>b(!1),children:V&&e.jsxs("div",{children:[e.jsx(l,{size:"small",style:{marginBottom:16},children:e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"阶段状态"}),e.jsx(v,{color:te(V.status),children:ee(V.status)})]})}),e.jsx(d,{span:12,children:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"完成进度"}),e.jsx(N,{percent:ie(V),size:"small"})]})})]})}),e.jsx(p,{dataSource:K,rowKey:"id",size:"small",pagination:!1,columns:[{title:"任务名称",dataIndex:"taskName",key:"taskName"},{title:"状态",dataIndex:"status",key:"status",render:t=>e.jsx(v,{color:t===ue.COMPLETED?"green":"blue",children:t===ue.COMPLETED?"已完成":"进行中"})},{title:"进度",dataIndex:"completionRate",key:"completionRate",render:t=>e.jsx(N,{percent:t,size:"small"})},{title:"样本进度",key:"sampleProgress",render:(t,s)=>e.jsxs("span",{children:[s.completedSamples,"/",s.sampleCount]})}]})]})})]})},{Option:be}=j,{TextArea:Re}=m,{TabPane:ke}=G,{Text:Oe,Title:ze}=b,Ne=({modal:s=!1,visible:i=!1,onClose:h,onSelectTemplate:u})=>{const[I,E]=t.useState([]),[A,D]=t.useState(!1),[w,b]=t.useState(!1),[R,k]=t.useState(null),[O]=n.useForm(),[z,N]=t.useState("basic");t.useEffect(()=>{L()},[]);const L=async()=>{D(!0);try{await new Promise(e=>setTimeout(e,500));const e=[{id:"1",name:"产品注册标准模板",type:oe.PRODUCT_REGISTRATION,description:"用于产品注册项目的标准模板，包含完整的注册流程和阶段配置",isMultiCenter:!1,isMultiStage:!0,defaultStages:[{name:"前期准备",description:"收集产品资料，准备注册文件",order:1,status:he.NOT_STARTED,estimatedDuration:7,prerequisites:[],deliverables:["产品技术文档","质量标准文件"],isActive:!0},{name:"检测验证",description:"进行产品检测和验证",order:2,status:he.NOT_STARTED,estimatedDuration:14,prerequisites:[],deliverables:["检测报告","验证报告"],isActive:!0},{name:"注册申报",description:"提交注册申请材料",order:3,status:he.NOT_STARTED,estimatedDuration:30,prerequisites:[],deliverables:["注册申请书","技术审查报告"],isActive:!0}],defaultCenterTypes:[],estimatedDuration:51,isActive:!0,createdBy:"admin",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",name:"科研服务标准模板",type:oe.RESEARCH_SERVICE,description:"用于科研服务项目的标准模板，支持多中心协作",isMultiCenter:!0,isMultiStage:!0,defaultStages:[{name:"项目启动",description:"项目启动会议，确定研究方案",order:1,status:he.NOT_STARTED,estimatedDuration:3,prerequisites:[],deliverables:["研究方案","项目计划书"],isActive:!0},{name:"样本收集",description:"收集和处理研究样本",order:2,status:he.NOT_STARTED,estimatedDuration:21,prerequisites:[],deliverables:["样本清单","质控报告"],isActive:!0},{name:"数据分析",description:"进行数据分析和结果解读",order:3,status:he.NOT_STARTED,estimatedDuration:14,prerequisites:[],deliverables:["分析报告","数据图表"],isActive:!0},{name:"报告撰写",description:"撰写最终研究报告",order:4,status:he.NOT_STARTED,estimatedDuration:7,prerequisites:[],deliverables:["最终报告","数据包"],isActive:!0}],defaultCenterTypes:[xe.LEAD,xe.COLLABORATIVE],estimatedDuration:45,isActive:!0,createdBy:"admin",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",name:"临床检测标准模板",type:oe.CLINICAL_DETECTION,description:"用于临床检测项目的标准模板，注重质量控制",isMultiCenter:!1,isMultiStage:!0,defaultStages:[{name:"样本接收",description:"接收和登记临床样本",order:1,status:he.NOT_STARTED,estimatedDuration:1,prerequisites:[],deliverables:["样本登记表","接收确认单"],isActive:!0},{name:"样本检测",description:"进行样本检测分析",order:2,status:he.NOT_STARTED,estimatedDuration:3,prerequisites:[],deliverables:["检测数据","质控记录"],isActive:!0},{name:"结果审核",description:"审核检测结果和质量",order:3,status:he.NOT_STARTED,estimatedDuration:1,prerequisites:[],deliverables:["审核报告","质量评估"],isActive:!0},{name:"报告发放",description:"生成和发放检测报告",order:4,status:he.NOT_STARTED,estimatedDuration:1,prerequisites:[],deliverables:["检测报告","发放记录"],isActive:!0}],defaultCenterTypes:[],estimatedDuration:6,isActive:!0,createdBy:"admin",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}];E(e)}catch(e){r.error("获取模板列表失败")}finally{D(!1)}},P=e=>({[oe.PRODUCT_REGISTRATION]:"产品注册",[oe.RESEARCH_SERVICE]:"科研服务",[oe.CLINICAL_DETECTION]:"临床检测"}[e]),M=e=>({[oe.PRODUCT_REGISTRATION]:"blue",[oe.RESEARCH_SERVICE]:"green",[oe.CLINICAL_DETECTION]:"orange"}[e]),q=[{title:"模板信息",key:"templateInfo",width:300,render:(t,s)=>{return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[(i=s.type,{[oe.PRODUCT_REGISTRATION]:e.jsx($,{}),[oe.RESEARCH_SERVICE]:e.jsx(H,{}),[oe.CLINICAL_DETECTION]:e.jsx(Y,{})}[i]),e.jsx("span",{style:{fontWeight:500,marginLeft:8},children:s.name})]}),e.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:4},children:s.description}),e.jsx(v,{color:M(s.type),children:P(s.type)})]});var i}},{title:"配置信息",key:"settings",width:200,render:(t,s)=>{var i,n;return e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"12px",marginBottom:2},children:["阶段数: ",(null==(i=s.defaultStages)?void 0:i.length)||0]}),e.jsxs("div",{style:{fontSize:"12px",marginBottom:2},children:["中心类型: ",(null==(n=s.defaultCenterTypes)?void 0:n.length)||0]}),e.jsxs("div",{style:{fontSize:"12px",marginBottom:2},children:["预计周期: ",s.estimatedDuration||0," 天"]}),e.jsxs("div",{style:{fontSize:"12px"},children:["多中心: ",s.isMultiCenter?"是":"否"]})]})}},{title:"状态",dataIndex:"isActive",key:"isActive",width:80,render:t=>e.jsx(v,{color:t?"success":"default",children:t?"启用":"禁用"})},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:120,render:t=>e.jsx("span",{style:{fontSize:"12px"},children:new Date(t).toLocaleDateString()})},{title:"操作",key:"action",width:200,fixed:"right",render:(t,s)=>e.jsxs(c,{size:"small",children:[u&&e.jsx(y,{title:"应用模板",children:e.jsx(o,{type:"primary",size:"small",icon:e.jsx(_,{}),onClick:()=>{return e=s,void(u&&(u(e),r.success(`已应用模板：${e.name}`),h&&h()));var e},children:"应用"})}),e.jsx(y,{title:"编辑",children:e.jsx(o,{type:"text",icon:e.jsx(T,{}),onClick:()=>{return k(e=s),O.setFieldsValue(e),void b(!0);var e}})}),e.jsx(y,{title:"复制",children:e.jsx(o,{type:"text",icon:e.jsx(V,{}),onClick:()=>(async e=>{try{const t={...e,id:Date.now().toString(),name:`${e.name} - 副本`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};E([...I,t]),r.success("模板复制成功")}catch(t){r.error("复制模板失败")}})(s)})}),e.jsx(C,{title:"确定要删除这个模板吗？",onConfirm:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),E(I.filter(t=>t.id!==e)),r.success("模板删除成功")}catch(t){r.error("删除模板失败")}})(s.id),okText:"确定",cancelText:"取消",children:e.jsx(y,{title:"删除",children:e.jsx(o,{type:"text",danger:!0,icon:e.jsx(f,{})})})})]})}],B=e.jsxs("div",{children:[e.jsx(l,{title:"项目模板管理",extra:e.jsx(o,{type:"primary",icon:e.jsx(x,{}),onClick:()=>{k(null),O.resetFields(),b(!0)},children:"新建模板"}),children:e.jsx(p,{columns:q,dataSource:I,rowKey:"id",loading:A,scroll:{x:1e3},pagination:{total:I.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})}),e.jsx(g,{title:R?"编辑模板":"新建模板",open:w,onCancel:()=>{b(!1),O.resetFields()},footer:null,width:800,children:e.jsxs(n,{form:O,layout:"vertical",onFinish:async e=>{try{if(D(!0),await new Promise(e=>setTimeout(e,1e3)),R){const t={...R,...e,updatedAt:(new Date).toISOString()};E(I.map(e=>e.id===R.id?t:e)),r.success("模板更新成功")}else{const t={id:Date.now().toString(),...e,defaultStages:[],defaultCenterTypes:[],createdBy:"current_user",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};E([...I,t]),r.success("模板创建成功")}b(!1),O.resetFields()}catch(t){r.error("操作失败")}finally{D(!1)}},children:[e.jsxs(G,{activeKey:z,onChange:N,children:[e.jsxs(ke,{tab:"基本信息",children:[e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"name",label:"模板名称",rules:[{required:!0,message:"请输入模板名称"}],children:e.jsx(m,{placeholder:"请输入模板名称"})})}),e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"type",label:"项目类型",rules:[{required:!0,message:"请选择项目类型"}],children:e.jsxs(j,{placeholder:"请选择项目类型",children:[e.jsx(be,{value:oe.PRODUCT_REGISTRATION,children:"产品注册"}),e.jsx(be,{value:oe.RESEARCH_SERVICE,children:"科研服务"}),e.jsx(be,{value:oe.CLINICAL_DETECTION,children:"临床检测"})]})})})]}),e.jsx(n.Item,{name:"description",label:"模板描述",rules:[{required:!0,message:"请输入模板描述"}],children:e.jsx(Re,{rows:3,placeholder:"请输入模板描述"})}),e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"estimatedDuration",label:"预计周期（天）",children:e.jsx(m,{type:"number",placeholder:"请输入预计周期"})})}),e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"isActive",label:"启用状态",valuePropName:"checked",children:e.jsx(S,{})})})]}),e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"isMultiCenter",label:"支持多中心",valuePropName:"checked",children:e.jsx(S,{})})}),e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"isMultiStage",label:"支持多阶段",valuePropName:"checked",children:e.jsx(S,{})})})]})]},"basic"),e.jsx(ke,{tab:"阶段配置",children:e.jsxs("div",{style:{textAlign:"center",padding:"40px 0",color:"#999"},children:[e.jsx(Z,{style:{fontSize:"48px",marginBottom:"16px"}}),e.jsx("div",{children:"阶段配置功能开发中..."}),e.jsx("div",{style:{fontSize:"12px",marginTop:"8px"},children:"保存模板后可在项目中配置具体阶段"})]})},"stages"),e.jsx(ke,{tab:"中心配置",children:e.jsxs("div",{style:{textAlign:"center",padding:"40px 0",color:"#999"},children:[e.jsx(Z,{style:{fontSize:"48px",marginBottom:"16px"}}),e.jsx("div",{children:"中心配置功能开发中..."}),e.jsx("div",{style:{fontSize:"12px",marginTop:"8px"},children:"保存模板后可在项目中配置具体中心"})]})},"centers")]}),e.jsx(n.Item,{style:{textAlign:"right",marginTop:24,marginBottom:0},children:e.jsxs(c,{children:[e.jsx(o,{onClick:()=>b(!1),children:"取消"}),e.jsx(o,{type:"primary",htmlType:"submit",loading:A,children:R?"更新":"创建"})]})})]})})]});return s?e.jsx(g,{title:"选择项目模板",open:i,onCancel:h,footer:null,width:1200,children:B}):B},{Step:Le}=U,{TextArea:_e}=m,{Option:Pe}=j,{Text:Me,Title:qe}=b,Be=({visible:s,onClose:i,project:a,currentStage:d,targetStage:x,onTransitionSuccess:h})=>{const[u,m]=t.useState(!1),[j,p]=t.useState(!1),[y,S]=t.useState([]),[T,C]=t.useState(0),[f]=n.useForm(),[I,E]=t.useState("");t.useEffect(()=>{s&&d&&x&&A()},[s,d,x]);const A=()=>{const e=[];"前期准备"===d.name&&"检测验证"===x.name?e.push({id:"task_completion_1",name:"任务完成度检查",description:"确保当前阶段所有必需任务已完成",required:!0,status:"pending",type:"task_completion"},{id:"document_1",name:"文档完整性检查",description:"验证所有必需文档已上传并审核通过",required:!0,status:"pending",type:"document"},{id:"data_quality_1",name:"数据质量审核",description:"检查数据完整性和准确性",required:!0,status:"pending",type:"data_quality"}):"检测验证"===d.name&&"注册申报"===x.name?e.push({id:"task_completion_2",name:"检测任务完成",description:"所有检测项目已完成并通过质控",required:!0,status:"pending",type:"task_completion"},{id:"approval_1",name:"质量经理审批",description:"质量经理已审核并批准检测结果",required:!0,status:"pending",type:"approval"},{id:"document_2",name:"检测报告生成",description:"检测报告已生成并经过审核",required:!0,status:"pending",type:"document"}):e.push({id:"task_completion_general",name:"任务完成度检查",description:"确保当前阶段所有任务已完成",required:!0,status:"pending",type:"task_completion"},{id:"approval_general",name:"阶段负责人审批",description:"阶段负责人已确认可以进入下一阶段",required:!0,status:"pending",type:"approval"}),S(e)},D=t=>{switch(t.status){case"passed":return e.jsx(_,{style:{color:"#52c41a"}});case"failed":return e.jsx(ee,{style:{color:"#ff4d4f"}});case"checking":return e.jsx(X,{size:"small"});default:return e.jsx(M,{style:{color:"#faad14"}})}},w=async e=>{S(t=>t.map(t=>t.id===e.id?{...t,status:"checking"}:t));try{await new Promise(e=>setTimeout(e,1e3+2e3*Math.random()));const t=Math.random()>.3;let s="";if(t)s="检查通过";else switch(e.type){case"task_completion":s="还有3个任务未完成";break;case"data_quality":s="发现2处数据质量问题";break;case"approval":s="等待审批人确认";break;case"document":s="缺少必需文档";break;default:s="检查未通过"}return S(i=>i.map(i=>i.id===e.id?{...i,status:t?"passed":"failed",message:s}:i)),t}catch(t){return S(t=>t.map(t=>t.id===e.id?{...t,status:"failed",message:"检查过程中发生错误"}:t)),!1}},b=()=>y.filter(e=>e.required).every(e=>"passed"===e.status);return e.jsxs(g,{title:"阶段转换",open:s,onCancel:i,width:800,footer:null,children:[e.jsx("div",{style:{marginBottom:24},children:e.jsxs(U,{current:1,size:"small",children:[e.jsx(Le,{title:d.name,status:"finish",icon:e.jsx(_,{})}),e.jsx(Le,{title:"条件验证",status:"process",icon:e.jsx(W,{})}),e.jsx(Le,{title:x.name,status:"wait",icon:e.jsx(F,{})})]})}),e.jsx(l,{title:"转换概览",size:"small",style:{marginBottom:16},children:e.jsxs(K,{column:2,size:"small",children:[e.jsx(K.Item,{label:"项目名称",children:a.name}),e.jsx(K.Item,{label:"项目编号",children:a.code}),e.jsx(K.Item,{label:"当前阶段",children:d.name}),e.jsx(K.Item,{label:"目标阶段",children:x.name})]})}),e.jsx(l,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"转换条件检查"}),e.jsxs("div",{children:[e.jsx(N,{percent:(()=>{const e=y.length,t=y.filter(e=>"passed"===e.status).length;return e>0?Math.round(t/e*100):0})(),size:"small",style:{width:100,marginRight:16}}),e.jsx(o,{type:"primary",size:"small",loading:j,onClick:async()=>{p(!0);try{S(e=>e.map(e=>({...e,status:"pending"})));for(const e of y)await w(e);r.success("条件检查完成")}catch(e){r.error("条件检查失败")}finally{p(!1)}},children:"重新检查"})]})]}),size:"small",style:{marginBottom:16},children:e.jsx(J,{dataSource:y,renderItem:t=>{return e.jsx(J.Item,{actions:[e.jsx(o,{type:"link",size:"small",loading:"checking"===t.status,onClick:()=>w(t),children:"检查"})],children:e.jsx(J.Item.Meta,{avatar:D(t),title:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[(s=t.type,{task_completion:e.jsx(_,{}),data_quality:e.jsx(W,{}),approval:e.jsx(se,{}),document:e.jsx($,{}),custom:e.jsx(te,{})}[s]),e.jsxs("span",{style:{marginLeft:8},children:[t.name,t.required&&e.jsx(v,{color:"red",size:"small",style:{marginLeft:8},children:"必需"})]})]}),description:e.jsxs("div",{children:[e.jsx("div",{children:t.description}),t.message&&e.jsx(Me,{type:"passed"===t.status?"success":"danger",style:{fontSize:"12px"},children:t.message})]})})});var s}})}),!b()&&e.jsx(Q,{message:"转换条件未满足",description:"请确保所有必需条件都通过检查后再执行阶段转换",type:"warning",showIcon:!0,style:{marginBottom:16}}),e.jsx(l,{title:"转换备注",size:"small",style:{marginBottom:24},children:e.jsx(_e,{rows:3,placeholder:"请输入阶段转换的备注信息（可选）",value:I,onChange:e=>E(e.target.value)})}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs(c,{children:[e.jsx(o,{onClick:i,children:"取消"}),e.jsx(o,{type:"primary",loading:u,disabled:!b(),onClick:async()=>{const e=y.filter(e=>e.required);if(e.filter(e=>"passed"===e.status).length<e.length)r.error("请先通过所有必需条件检查");else{m(!0);try{await new Promise(e=>setTimeout(e,2e3));const e={...d,status:he.COMPLETED},t={...x,status:he.IN_PROGRESS};r.success(`成功从"${d.name}"转换到"${x.name}"`),h(e,t),i()}catch(t){r.error("阶段转换失败")}finally{m(!1)}}},children:"执行转换"})]})})]})},{Option:Ze}=j,{TextArea:Fe}=m,{RangePicker:Ge}=O,{TabPane:Ve}=G,{Step:Ye}=U,He=()=>{var s,i;const[h,u]=t.useState([]),[A,D]=t.useState([]),[w,b]=t.useState([]),[R,k]=t.useState(!1),[O,z]=t.useState(!1),[L,_]=t.useState(!1),[P,M]=t.useState(null),[Z,F]=t.useState(null),[V]=n.useForm(),[Y,H]=t.useState(""),[U,W]=t.useState(""),[K,J]=t.useState("basic"),[Q,X]=t.useState([]),[ee,te]=t.useState([]),[se,ae]=t.useState(!1),[xe,he]=t.useState(!1),[ue,me]=t.useState({current:null,target:null});t.useEffect(()=>{je(),pe(),ge()},[]);const je=async()=>{k(!0);try{await new Promise(e=>setTimeout(e,500));const e=[{id:"1",name:"肠道菌群多样性分析项目",code:"PRJ001",type:oe.RESEARCH_SERVICE,customerId:"1",customer:{id:"1",name:"北京大学医学院",code:"PKU001",contact:"张教授",phone:"010-12345678",email:"zhang@pku.edu.cn",address:"北京市海淀区学院路38号",type:"research",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},description:"研究肠道菌群与疾病的关系",status:ce.IN_PROGRESS,priority:"high",startDate:"2024-01-15",expectedEndDate:"2024-03-15",actualEndDate:void 0,assignedTo:"1",assignedUser:{id:"1",username:"zhangsan",name:"张三",email:"zhangsan@example.com",role:de.ANALYST,department:"分析部",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},budget:5e4,progress:75,isMultiCenter:!0,centers:[],isMultiStage:!0,stages:[],createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-02-25T15:30:00Z"},{id:"2",name:"土壤微生物群落结构研究",code:"PRJ002",type:oe.RESEARCH_SERVICE,customerId:"2",customer:{id:"2",name:"中科院生态环境研究中心",code:"CAS001",contact:"李研究员",phone:"010-87654321",email:"li@cas.cn",address:"北京市朝阳区大屯路18号",type:"research",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},description:"分析不同土壤类型的微生物群落结构",status:ce.PENDING,priority:"medium",startDate:"2024-03-01",expectedEndDate:"2024-05-01",assignedTo:"2",assignedUser:{id:"2",username:"lisi",name:"李四",email:"lisi@example.com",role:de.ANALYST,department:"分析部",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},budget:8e4,progress:0,isMultiCenter:!1,isMultiStage:!0,createdAt:"2024-02-01T10:00:00Z",updatedAt:"2024-02-01T10:00:00Z"}];u(e)}catch(e){r.error("获取项目列表失败")}finally{k(!1)}},pe=async()=>{D([{id:"1",name:"北京大学医学院",code:"PKU001",contact:"张教授",phone:"010-12345678",email:"zhang@pku.edu.cn",address:"北京市海淀区学院路38号",type:"research",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",name:"中科院生态环境研究中心",code:"CAS001",contact:"李研究员",phone:"010-87654321",email:"li@cas.cn",address:"北京市朝阳区大屯路18号",type:"research",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",name:"清华大学生命科学学院",code:"THU001",contact:"王教授",phone:"010-11111111",email:"wang@tsinghua.edu.cn",address:"北京市海淀区清华园1号",type:"research",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}])},ge=async()=>{const e=[{id:"1",username:"zhangsan",name:"张三",email:"zhangsan@example.com",role:de.ADMIN,department:"管理部",position:"项目经理",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",username:"lisi",name:"李四",email:"lisi@example.com",role:de.ANALYST,department:"分析部",position:"高级分析师",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",username:"wangwu",name:"王五",email:"wangwu@example.com",role:de.LAB_TECHNICIAN,department:"实验部",position:"实验技师",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"4",username:"zhaoliu",name:"赵六",email:"zhaoliu@example.com",role:de.ANALYST,department:"分析部",position:"分析师",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}];b(e)},ye=e=>({[ce.PENDING]:"待开始",[ce.IN_PROGRESS]:"进行中",[ce.COMPLETED]:"已完成",[ce.CANCELLED]:"已取消"}[e]),ve=e=>({[ce.PENDING]:"default",[ce.IN_PROGRESS]:"processing",[ce.COMPLETED]:"success",[ce.CANCELLED]:"error"}[e]),Se=e=>({low:"低",medium:"中",high:"高",urgent:"紧急"}[e]||e),Te=e=>({low:"green",medium:"blue",high:"orange",urgent:"red"}[e]||"default"),fe=e=>({[oe.PRODUCT_REGISTRATION]:"产品注册",[oe.RESEARCH_SERVICE]:"科研服务",[oe.CLINICAL_DETECTION]:"临床检测"}[e]),Ie=h.filter(e=>{const t=!Y||e.name.toLowerCase().includes(Y.toLowerCase())||e.code.toLowerCase().includes(Y.toLowerCase())||e.customer.name.toLowerCase().includes(Y.toLowerCase()),s=!U||e.status===U;return t&&s}),Ee={total:h.length,pending:h.filter(e=>e.status===ce.PENDING).length,inProgress:h.filter(e=>e.status===ce.IN_PROGRESS).length,completed:h.filter(e=>e.status===ce.COMPLETED).length,totalBudget:h.reduce((e,t)=>e+(t.budget||0),0)},Ae=[{title:"项目信息",key:"projectInfo",width:300,render:(t,s)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:4},children:s.name}),e.jsxs("div",{style:{fontSize:"12px",color:"#666",marginBottom:2},children:["编号: ",s.code]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["类型: ",fe(s.type)]}),e.jsxs("div",{style:{marginTop:4},children:[s.isMultiCenter&&e.jsx(v,{color:"blue",icon:e.jsx(re,{}),children:"多中心"}),s.isMultiStage&&e.jsx(v,{color:"green",icon:e.jsx(le,{}),children:"多阶段"})]})]})},{title:"客户信息",key:"customer",width:200,render:(t,s)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:s.customer.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:s.customer.contact})]})},{title:"状态",dataIndex:"status",key:"status",width:120,render:t=>e.jsx(v,{color:ve(t),children:ye(t)})},{title:"进度",dataIndex:"progress",key:"progress",width:120,render:t=>e.jsx(N,{percent:t,size:"small"})},{title:"项目经理",key:"manager",width:120,render:(t,s)=>e.jsxs("div",{children:[e.jsx(E,{style:{marginRight:4}}),s.assignedUser.name]})},{title:"时间安排",key:"schedule",width:200,render:(t,s)=>e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["开始: ",q(s.startDate).format("MM-DD")]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["预计结束: ",q(s.expectedEndDate).format("MM-DD")]}),s.actualEndDate&&e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["实际结束: ",q(s.actualEndDate).format("MM-DD")]})]})},{title:"预算",dataIndex:"budget",key:"budget",width:120,render:t=>e.jsxs("span",{children:["¥",null==t?void 0:t.toLocaleString()]})},{title:"优先级",dataIndex:"priority",key:"priority",width:80,render:t=>e.jsx(v,{color:Te(t),children:Se(t)})},{title:"操作",key:"action",width:150,fixed:"right",render:(t,s)=>e.jsxs(c,{size:"small",children:[e.jsx(y,{title:"查看详情",children:e.jsx(o,{type:"text",icon:e.jsx(B,{}),onClick:()=>(F(s),void _(!0))})}),e.jsx(y,{title:"编辑",children:e.jsx(o,{type:"text",icon:e.jsx(T,{}),onClick:()=>{return M(e=s),V.setFieldsValue({...e,dateRange:[q(e.startDate),q(e.expectedEndDate)]}),void z(!0);var e}})}),e.jsx(C,{title:"确定要删除这个项目吗？",onConfirm:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),u(h.filter(t=>t.id!==e)),r.success("项目删除成功")}catch(t){r.error("删除项目失败")}})(s.id),okText:"确定",cancelText:"取消",children:e.jsx(y,{title:"删除",children:e.jsx(o,{type:"text",danger:!0,icon:e.jsx(f,{})})})})]})}];return e.jsxs("div",{children:[e.jsxs(a,{gutter:16,style:{marginBottom:16},children:[e.jsx(d,{span:6,children:e.jsx(l,{children:e.jsx(ie,{title:"项目总数",value:Ee.total,prefix:e.jsx(ne,{})})})}),e.jsx(d,{span:6,children:e.jsx(l,{children:e.jsx(ie,{title:"进行中",value:Ee.inProgress,valueStyle:{color:"#1890ff"}})})}),e.jsx(d,{span:6,children:e.jsx(l,{children:e.jsx(ie,{title:"已完成",value:Ee.completed,valueStyle:{color:"#52c41a"}})})}),e.jsx(d,{span:6,children:e.jsx(l,{children:e.jsx(ie,{title:"总预算",value:Ee.totalBudget,formatter:e=>`¥${null==e?void 0:e.toLocaleString()}`})})})]}),e.jsx(l,{title:"项目管理",extra:e.jsxs(c,{children:[e.jsx(m.Search,{placeholder:"搜索项目名称、编号或客户",value:Y,onChange:e=>H(e.target.value),style:{width:250}}),e.jsxs(j,{placeholder:"筛选状态",value:U,onChange:W,style:{width:120},allowClear:!0,children:[e.jsx(Ze,{value:ce.PENDING,children:"待开始"}),e.jsx(Ze,{value:ce.IN_PROGRESS,children:"进行中"}),e.jsx(Ze,{value:ce.COMPLETED,children:"已完成"}),e.jsx(Ze,{value:ce.CANCELLED,children:"已取消"})]}),e.jsx(o,{type:"primary",icon:e.jsx(x,{}),onClick:()=>{M(null),V.resetFields(),z(!0)},children:"新建项目"})]}),children:e.jsx(p,{columns:Ae,dataSource:Ie,rowKey:"id",loading:R,scroll:{x:1500},pagination:{total:Ie.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})}),e.jsx(g,{title:P?"编辑项目":"新建项目",open:O,onCancel:()=>{z(!1),V.resetFields()},footer:null,width:1e3,children:e.jsxs(n,{form:V,layout:"vertical",onFinish:async e=>{try{k(!0),await new Promise(e=>setTimeout(e,1e3));const t={...e,startDate:e.dateRange[0].format("YYYY-MM-DD"),expectedEndDate:e.dateRange[1].format("YYYY-MM-DD"),customer:A.find(t=>t.id===e.customerId),assignedUser:w.find(t=>t.id===e.assignedTo),progress:P?P.progress:0};if(P){const e={...P,...t,updatedAt:(new Date).toISOString()};u(h.map(t=>t.id===P.id?e:t)),r.success("项目更新成功")}else{const e={id:Date.now().toString(),code:`PRJ${String(h.length+1).padStart(3,"0")}`,...t,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};u([...h,e]),r.success("项目创建成功")}z(!1),V.resetFields()}catch(t){r.error("操作失败")}finally{k(!1)}},children:[e.jsxs(G,{activeKey:K,onChange:J,children:[e.jsxs(Ve,{tab:"基本信息",children:[!P&&e.jsx("div",{style:{marginBottom:16,textAlign:"right"},children:e.jsx(o,{type:"dashed",icon:e.jsx($,{}),onClick:()=>ae(!0),children:"从模板创建"})}),e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"name",label:"项目名称",rules:[{required:!0,message:"请输入项目名称"}],children:e.jsx(m,{placeholder:"请输入项目名称"})})}),e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"type",label:"项目类型",rules:[{required:!0,message:"请选择项目类型"}],children:e.jsxs(j,{placeholder:"请选择项目类型",children:[e.jsx(Ze,{value:oe.PRODUCT_REGISTRATION,children:"产品注册"}),e.jsx(Ze,{value:oe.RESEARCH_SERVICE,children:"科研服务"}),e.jsx(Ze,{value:oe.CLINICAL_DETECTION,children:"临床检测"})]})})})]}),e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"customerId",label:"客户",rules:[{required:!0,message:"请选择客户"}],children:e.jsx(j,{placeholder:"请选择客户",children:A.map(t=>e.jsx(Ze,{value:t.id,children:t.name},t.id))})})}),e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"assignedTo",label:"项目经理",rules:[{required:!0,message:"请选择项目经理"}],children:e.jsx(j,{placeholder:"请选择项目经理",children:w.filter(e=>e.role===de.ADMIN||e.role===de.ANALYST).map(t=>e.jsx(Ze,{value:t.id,children:t.name},t.id))})})})]}),e.jsx(n.Item,{name:"description",label:"项目描述",rules:[{required:!0,message:"请输入项目描述"}],children:e.jsx(Fe,{rows:3,placeholder:"请输入项目描述"})}),e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"priority",label:"优先级",rules:[{required:!0,message:"请选择优先级"}],children:e.jsxs(j,{placeholder:"请选择优先级",children:[e.jsx(Ze,{value:"low",children:"低"}),e.jsx(Ze,{value:"medium",children:"中"}),e.jsx(Ze,{value:"high",children:"高"}),e.jsx(Ze,{value:"urgent",children:"紧急"})]})})}),e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"budget",label:"项目预算",rules:[{required:!0,message:"请输入项目预算"}],children:e.jsx(m,{type:"number",placeholder:"请输入项目预算",addonAfter:"元"})})}),e.jsx(d,{span:8,children:e.jsx(n.Item,{name:"dateRange",label:"项目周期",rules:[{required:!0,message:"请选择项目周期"}],children:e.jsx(Ge,{style:{width:"100%"}})})})]}),e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"isMultiCenter",label:"多中心项目",valuePropName:"checked",children:e.jsx(S,{})})}),e.jsx(d,{span:12,children:e.jsx(n.Item,{name:"isMultiStage",label:"多阶段项目",valuePropName:"checked",children:e.jsx(S,{})})})]})]},"basic"),e.jsx(Ve,{tab:"中心配置",children:e.jsx(Ce,{projectId:(null==P?void 0:P.id)||"",centers:Q,onCentersChange:X})},"centers"),e.jsx(Ve,{tab:"阶段配置",children:e.jsx(we,{projectId:(null==P?void 0:P.id)||"",stages:ee,onStagesChange:te,onStageTransition:(e,t)=>{me({current:e,target:t}),he(!0)}})},"stages")]}),e.jsx(n.Item,{style:{textAlign:"right",marginTop:24,marginBottom:0},children:e.jsxs(c,{children:[e.jsx(o,{onClick:()=>z(!1),children:"取消"}),e.jsx(o,{type:"primary",htmlType:"submit",loading:R,children:P?"更新":"创建"})]})})]})}),e.jsx(Ne,{modal:!0,visible:se,onClose:()=>ae(!1),onSelectTemplate:e=>{V.setFieldsValue({name:`${e.name} - 项目`,type:e.type,description:e.description,isMultiCenter:e.isMultiCenter,isMultiStage:e.isMultiStage,estimatedDuration:e.estimatedDuration}),e.defaultStages&&e.defaultStages.length,e.defaultCenterTypes&&e.defaultCenterTypes.length,ae(!1),r.success(`已应用模板：${e.name}`)}}),e.jsx(g,{title:"项目详情",open:L,onCancel:()=>_(!1),footer:[e.jsx(o,{onClick:()=>_(!1),children:"关闭"},"close")],width:800,children:Z&&e.jsxs("div",{children:[e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsxs(l,{size:"small",title:"基本信息",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"项目编号："}),Z.code]}),e.jsxs("p",{children:[e.jsx("strong",{children:"项目名称："}),Z.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"项目类型："}),fe(Z.type)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"客户："}),Z.customer.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"项目经理："}),Z.assignedUser.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"状态："}),e.jsx(v,{color:ve(Z.status),style:{marginLeft:8},children:ye(Z.status)})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"优先级："}),e.jsx(v,{color:Te(Z.priority),style:{marginLeft:8},children:Se(Z.priority)})]})]})}),e.jsx(d,{span:12,children:e.jsxs(l,{size:"small",title:"进度信息",children:[e.jsx("p",{children:e.jsx("strong",{children:"整体进度："})}),e.jsx(N,{percent:Z.progress}),e.jsxs("p",{children:[e.jsx("strong",{children:"开始日期："}),q(Z.startDate).format("YYYY-MM-DD")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"预计结束："}),q(Z.expectedEndDate).format("YYYY-MM-DD")]}),Z.actualEndDate&&e.jsxs("p",{children:[e.jsx("strong",{children:"实际结束："}),q(Z.actualEndDate).format("YYYY-MM-DD")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"项目预算："}),"¥",(Z.budget||0).toLocaleString()]})]})})]}),e.jsx(I,{}),e.jsx(l,{size:"small",title:"项目描述",children:e.jsx("p",{children:Z.description})}),(Z.isMultiCenter||Z.isMultiStage)&&e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsxs(a,{gutter:16,children:[Z.isMultiCenter&&e.jsx(d,{span:12,children:e.jsxs(l,{size:"small",title:"多中心配置",children:[e.jsx(v,{color:"blue",icon:e.jsx(re,{}),children:"多中心项目"}),e.jsxs("p",{style:{marginTop:8},children:["中心数量: ",(null==(s=Z.centers)?void 0:s.length)||0]})]})}),Z.isMultiStage&&e.jsx(d,{span:12,children:e.jsxs(l,{size:"small",title:"多阶段配置",children:[e.jsx(v,{color:"green",icon:e.jsx(le,{}),children:"多阶段项目"}),e.jsxs("p",{style:{marginTop:8},children:["阶段数量: ",(null==(i=Z.stages)?void 0:i.length)||0]})]})})]})]})]})}),Z&&ue.current&&ue.target&&e.jsx(Be,{visible:xe,onClose:()=>he(!1),project:Z,currentStage:ue.current,targetStage:ue.target,onTransitionSuccess:(e,t)=>{if(Z){const s={...Z,updatedAt:(new Date).toISOString()};u(h.map(e=>e.id===Z.id?s:e)),r.success(`阶段转换成功：${e.name} → ${t.name}`)}he(!1)}})]})},{Title:$e,Text:Ue}=b,We=()=>{const[n,r]=t.useState("dashboard"),c=[{name:"全部项目",count:68,color:"#1890ff"},{name:"产品注册",count:25,color:"#52c41a"},{name:"研发验证",count:18,color:"#faad14"},{name:"科研服务",count:15,color:"#722ed1"},{name:"临床检测",count:10,color:"#eb2f96"}],x=[{id:"P-REG-2024-001",name:"产品注册项目",type:"结核杆菌检测试剂注册申请",status:"研发验证阶段",progress:75,responsible:"张主任",client:"XX医院",samples:200},{id:"P-RS-2024-002",name:"科研服务项目",type:"HIV病毒载量检测服务",status:"服务执行阶段",progress:50,responsible:"李医生",client:"XX医院",samples:200},{id:"P-RD-2024-003",name:"研发验证项目",type:"新型肿瘤标志物检测方法开发",status:"方案设计阶段",progress:30,responsible:"王研究员",client:"XX医院",samples:150}];return"category"===n?e.jsx(ge,{}):"management"===n?e.jsx(He,{}):e.jsx("div",{children:e.jsxs(s,{children:[e.jsx(i,{index:!0,element:e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:24},children:e.jsx($e,{level:3,style:{margin:0},children:"项目工作台"})}),e.jsxs(a,{gutter:16,style:{marginBottom:24},children:[e.jsx(d,{span:8,children:e.jsx(o,{type:"default",size:"large",block:!0,onClick:()=>r("management"),children:"项目看板"})}),e.jsx(d,{span:8,children:e.jsx(o,{type:"default",size:"large",block:!0,onClick:()=>r("management"),children:"我的任务"})}),e.jsx(d,{span:8,children:e.jsx(o,{type:"default",size:"large",block:!0,onClick:()=>r("management"),children:"项目统计"})})]}),e.jsx(l,{title:"项目分类视图",style:{marginBottom:24},children:e.jsx(a,{gutter:[16,16],children:c.map((t,s)=>e.jsx(d,{span:4,children:e.jsxs("div",{style:{textAlign:"center",padding:"16px",border:"1px solid #f0f0f0",borderRadius:"6px",cursor:"pointer"},onClick:()=>r("management"),children:[e.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:t.color,borderRadius:"50%",margin:"0 auto 8px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(ne,{style:{color:"white",fontSize:"18px"}})}),e.jsx("div",{style:{fontSize:"14px",marginBottom:"4px"},children:t.name}),e.jsx("div",{style:{fontSize:"18px",fontWeight:"bold",color:t.color},children:t.count})]})},s))})}),e.jsx(l,{title:"项目列表",children:e.jsx(J,{itemLayout:"vertical",dataSource:x,renderItem:t=>e.jsx(J.Item,{actions:[e.jsx(o,{type:"text",icon:e.jsx(B,{}),onClick:()=>r("management"),children:"进入项目"}),e.jsx(o,{type:"text",icon:e.jsx(T,{}),children:"样本管理"}),e.jsx(o,{type:"text",icon:e.jsx($,{}),children:"检测任务"}),e.jsx(o,{type:"text",icon:e.jsx(ae,{}),children:"报告生成"})],children:e.jsx(J.Item.Meta,{avatar:e.jsx("div",{style:{width:"8px",height:"40px",backgroundColor:"#1890ff",borderRadius:"4px"}}),title:e.jsxs("div",{children:[e.jsx(Ue,{strong:!0,children:t.name}),e.jsx(v,{color:"blue",style:{marginLeft:8},children:t.type})]}),description:e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:8},children:e.jsxs(Ue,{type:"secondary",children:["状态：",t.status," | 进度：",t.progress,"% | 负责人：",t.responsible]})}),e.jsx("div",{style:{marginBottom:8},children:e.jsxs(Ue,{type:"secondary",children:["关联协议：",t.id," | 实验中心：实验中心A（3个中心）"]})}),e.jsx("div",{style:{marginBottom:8},children:e.jsxs(Ue,{type:"secondary",children:["客户：",t.client," | 样本数：",t.samples,"例"]})}),e.jsx(N,{percent:t.progress,size:"small"})]})})},t.id)})}),e.jsx(l,{title:"快速操作",style:{marginTop:24},children:e.jsxs(a,{gutter:16,children:[e.jsx(d,{span:6,children:e.jsx(o,{type:"primary",block:!0,onClick:()=>r("management"),children:"新建项目"})}),e.jsx(d,{span:6,children:e.jsx(o,{block:!0,onClick:()=>r("management"),children:"项目模板"})}),e.jsx(d,{span:6,children:e.jsx(o,{block:!0,onClick:()=>r("management"),children:"批量导入"})}),e.jsx(d,{span:6,children:e.jsx(o,{block:!0,onClick:()=>r("management"),children:"项目归档"})})]})})]})}),e.jsx(i,{path:"category",element:e.jsx(ge,{})}),e.jsx(i,{path:"management",element:e.jsx(He,{})})]})})};export{We as default};
