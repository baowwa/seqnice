import{j as e}from"./index-DuFe5DRh.js";import{r as t,h as a,i as l,N as r}from"./react-vendor-BSBC8BLg.js";import{u as i}from"./index-BMhoGvBt.js";import{$ as s,s as n,T as d,a as c,S as o,a3 as h,an as m,a4 as u,B as x,a1 as p,bd as j,V as y,a5 as g,X as w,ai as v,ak as b,al as I,a6 as f,O as C,c as A,d as T,at as S,av as k,ag as q,as as D,be as N,x as B,J as P,G as L,A as F,ad as z}from"./antd-vendor-BuqAAsAf.js";const{Title:O}=d,{Option:Z}=u,M=()=>{const{setBreadcrumbs:a}=i(),[l,r]=t.useState([]),[d,f]=t.useState(!1),[C,A]=t.useState(!1),[T,S]=t.useState(null),[k,q]=t.useState(""),[D,N]=t.useState(""),[B,P]=t.useState(""),[L]=s.useForm();t.useEffect(()=>{a([{title:"首页"},{title:"基础档案"},{title:"客户管理"}]),F()},[a]);const F=async()=>{f(!0);try{await new Promise(e=>setTimeout(e,1e3));r([{id:"1",name:"第一人民医院",code:"HOSP001",contact:"张医生",phone:"13800138001",email:"zhang@hospital1.com",address:"北京市朝阳区医院路1号",type:"hospital",status:"active",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",name:"生物技术研究院",code:"RES001",contact:"李研究员",phone:"13800138002",email:"li@biotech.com",address:"上海市浦东新区科技园区",type:"research",status:"active",createdAt:"2024-01-02T00:00:00Z",updatedAt:"2024-01-02T00:00:00Z"},{id:"3",name:"华大基因科技公司",code:"COM001",contact:"王经理",phone:"13800138003",email:"wang@genomics.com",address:"深圳市南山区高新技术园",type:"company",status:"active",createdAt:"2024-01-03T00:00:00Z",updatedAt:"2024-01-03T00:00:00Z"}])}catch(e){n.error("加载客户数据失败")}finally{f(!1)}},z=e=>{S(e||null),A(!0),e?L.setFieldsValue(e):L.resetFields()},M=()=>{A(!1),S(null),L.resetFields()},E=l.filter(e=>{const t=!k||e.name.toLowerCase().includes(k.toLowerCase())||e.code.toLowerCase().includes(k.toLowerCase())||e.contact.toLowerCase().includes(k.toLowerCase()),a=!D||e.status===D,l=!B||e.type===B;return t&&a&&l}),Y=[{title:"客户编码",dataIndex:"code",key:"code",width:120},{title:"客户名称",dataIndex:"name",key:"name",render:t=>e.jsx("span",{style:{fontWeight:500},children:t})},{title:"客户类型",dataIndex:"type",key:"type",width:100,render:t=>{const a={hospital:{color:"blue",text:"医院"},research:{color:"green",text:"科研院所"},company:{color:"orange",text:"企业"}}[t];return e.jsx(w,{color:a.color,children:a.text})}},{title:"联系人",dataIndex:"contact",key:"contact",width:100},{title:"联系电话",dataIndex:"phone",key:"phone",width:130},{title:"邮箱",dataIndex:"email",key:"email",width:180},{title:"状态",dataIndex:"status",key:"status",width:80,render:t=>e.jsx(w,{color:"active"===t?"green":"red",children:"active"===t?"启用":"禁用"})},{title:"操作",key:"action",width:120,render:(t,a)=>e.jsxs(o,{children:[e.jsx(x,{type:"link",icon:e.jsx(v,{}),onClick:()=>z(a),size:"small",children:"编辑"}),e.jsx(b,{title:"确定要删除这个客户吗？",onConfirm:()=>(async e=>{try{await new Promise(e=>setTimeout(e,500)),r(t=>t.filter(t=>t.id!==e)),n.success("客户删除成功")}catch(t){n.error("删除失败")}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(x,{type:"link",danger:!0,icon:e.jsx(I,{}),size:"small",children:"删除"})})]})}];return e.jsxs("div",{children:[e.jsx(O,{level:3,style:{marginBottom:24},children:"客户管理"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(o,{wrap:!0,children:[e.jsx(h,{placeholder:"搜索客户名称、编码或联系人",prefix:e.jsx(m,{}),value:k,onChange:e=>q(e.target.value),style:{width:250}}),e.jsxs(u,{placeholder:"客户类型",value:B,onChange:P,style:{width:120},allowClear:!0,children:[e.jsx(Z,{value:"hospital",children:"医院"}),e.jsx(Z,{value:"research",children:"科研院所"}),e.jsx(Z,{value:"company",children:"企业"})]}),e.jsxs(u,{placeholder:"状态",value:D,onChange:N,style:{width:100},allowClear:!0,children:[e.jsx(Z,{value:"active",children:"启用"}),e.jsx(Z,{value:"inactive",children:"禁用"})]}),e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>z(),children:"新增客户"}),e.jsx(x,{icon:e.jsx(j,{}),children:"导出"})]})}),e.jsx(y,{columns:Y,dataSource:E,rowKey:"id",loading:d,pagination:{total:E.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]}),e.jsx(g,{title:T?"编辑客户":"新增客户",open:C,onCancel:M,footer:null,width:600,children:e.jsxs(s,{form:L,layout:"vertical",onFinish:async e=>{try{if(await new Promise(e=>setTimeout(e,1e3)),T)r(t=>t.map(t=>t.id===T.id?{...t,...e,updatedAt:(new Date).toISOString()}:t)),n.success("客户信息更新成功");else{const t={id:Date.now().toString(),...e,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};r(e=>[...e,t]),n.success("客户添加成功")}M()}catch(t){n.error("保存失败")}},children:[e.jsx(s.Item,{name:"code",label:"客户编码",rules:[{required:!0,message:"请输入客户编码"}],children:e.jsx(h,{placeholder:"请输入客户编码"})}),e.jsx(s.Item,{name:"name",label:"客户名称",rules:[{required:!0,message:"请输入客户名称"}],children:e.jsx(h,{placeholder:"请输入客户名称"})}),e.jsx(s.Item,{name:"type",label:"客户类型",rules:[{required:!0,message:"请选择客户类型"}],children:e.jsxs(u,{placeholder:"请选择客户类型",children:[e.jsx(Z,{value:"hospital",children:"医院"}),e.jsx(Z,{value:"research",children:"科研院所"}),e.jsx(Z,{value:"company",children:"企业"})]})}),e.jsx(s.Item,{name:"contact",label:"联系人",rules:[{required:!0,message:"请输入联系人"}],children:e.jsx(h,{placeholder:"请输入联系人"})}),e.jsx(s.Item,{name:"phone",label:"联系电话",rules:[{required:!0,message:"请输入联系电话"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],children:e.jsx(h,{placeholder:"请输入联系电话"})}),e.jsx(s.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入正确的邮箱格式"}],children:e.jsx(h,{placeholder:"请输入邮箱"})}),e.jsx(s.Item,{name:"address",label:"地址",rules:[{required:!0,message:"请输入地址"}],children:e.jsx(h.TextArea,{placeholder:"请输入地址",rows:3})}),e.jsx(s.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(u,{placeholder:"请选择状态",children:[e.jsx(Z,{value:"active",children:"启用"}),e.jsx(Z,{value:"inactive",children:"禁用"})]})}),e.jsx(s.Item,{style:{marginBottom:0,textAlign:"right"},children:e.jsxs(o,{children:[e.jsx(x,{onClick:M,children:"取消"}),e.jsx(x,{type:"primary",htmlType:"submit",children:"保存"})]})})]})})]})},{Title:E}=d,{Option:Y}=u,R=()=>{const[a,l]=t.useState([]),[r,i]=t.useState(!1),[d,m]=t.useState(!1),[j,f]=t.useState(null),[C]=s.useForm(),A=[{id:"1",name:"血液",code:"BLOOD",category:"临床样本",description:"全血、血清、血浆等血液样本",storageCondition:"-80°C",processingTime:24,isActive:!0,createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"2",name:"唾液",code:"SALIVA",category:"临床样本",description:"口腔唾液样本",storageCondition:"4°C",processingTime:12,isActive:!0,createdAt:"2024-01-16",updatedAt:"2024-01-16"},{id:"3",name:"粪便",code:"STOOL",category:"临床样本",description:"粪便微生物组样本",storageCondition:"-20°C",processingTime:48,isActive:!0,createdAt:"2024-01-17",updatedAt:"2024-01-17"},{id:"4",name:"土壤",code:"SOIL",category:"环境样本",description:"土壤微生物组样本",storageCondition:"-20°C",processingTime:72,isActive:!1,createdAt:"2024-01-18",updatedAt:"2024-01-18"}],T=[{title:"样本类型名称",dataIndex:"name",key:"name",width:120},{title:"类型编码",dataIndex:"code",key:"code",width:100},{title:"分类",dataIndex:"category",key:"category",width:100},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"存储条件",dataIndex:"storageCondition",key:"storageCondition",width:100},{title:"处理时间(小时)",dataIndex:"processingTime",key:"processingTime",width:120},{title:"状态",dataIndex:"isActive",key:"isActive",width:80,render:t=>e.jsx(w,{color:t?"green":"red",children:t?"启用":"禁用"})},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:100},{title:"操作",key:"action",width:120,render:(t,a)=>e.jsxs(o,{size:"small",children:[e.jsx(x,{type:"link",size:"small",icon:e.jsx(v,{}),onClick:()=>{return f(e=a),C.setFieldsValue(e),void m(!0);var e},children:"编辑"}),e.jsx(b,{title:"确定要删除这个样本类型吗？",onConfirm:()=>(async e=>{try{l(t=>t.filter(t=>t.id!==e)),n.success("删除成功")}catch(t){n.error("删除失败")}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(x,{type:"link",size:"small",danger:!0,icon:e.jsx(I,{}),children:"删除"})})]})}];return t.useEffect(()=>{(async()=>{i(!0);try{await new Promise(e=>setTimeout(e,500)),l(A)}catch(e){n.error("获取样本类型列表失败")}finally{i(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(E,{level:3,style:{marginBottom:24},children:"样本类型管理"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>{f(null),C.resetFields(),m(!0)},children:"新增样本类型"})}),e.jsx(y,{columns:T,dataSource:a,rowKey:"id",loading:r,pagination:{total:a.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},scroll:{x:1e3}})]}),e.jsx(g,{title:j?"编辑样本类型":"新增样本类型",open:d,onCancel:()=>{m(!1),f(null),C.resetFields()},footer:null,width:600,children:e.jsxs(s,{form:C,layout:"vertical",onFinish:async e=>{try{if(j){const t={...j,...e,updatedAt:(new Date).toISOString().split("T")[0]};l(e=>e.map(e=>e.id===j.id?t:e)),n.success("样本类型更新成功")}else{const t={id:Date.now().toString(),...e,createdAt:(new Date).toISOString().split("T")[0],updatedAt:(new Date).toISOString().split("T")[0]};l(e=>[...e,t]),n.success("样本类型创建成功")}m(!1),f(null),C.resetFields()}catch(t){n.error("保存失败")}},children:[e.jsx(s.Item,{name:"name",label:"样本类型名称",rules:[{required:!0,message:"请输入样本类型名称"}],children:e.jsx(h,{placeholder:"请输入样本类型名称"})}),e.jsx(s.Item,{name:"code",label:"类型编码",rules:[{required:!0,message:"请输入类型编码"}],children:e.jsx(h,{placeholder:"请输入类型编码"})}),e.jsx(s.Item,{name:"category",label:"分类",rules:[{required:!0,message:"请选择分类"}],children:e.jsxs(u,{placeholder:"请选择分类",children:[e.jsx(Y,{value:"临床样本",children:"临床样本"}),e.jsx(Y,{value:"环境样本",children:"环境样本"}),e.jsx(Y,{value:"食品样本",children:"食品样本"}),e.jsx(Y,{value:"其他",children:"其他"})]})}),e.jsx(s.Item,{name:"description",label:"描述",children:e.jsx(h.TextArea,{placeholder:"请输入描述信息",rows:3})}),e.jsx(s.Item,{name:"storageCondition",label:"存储条件",rules:[{required:!0,message:"请输入存储条件"}],children:e.jsxs(u,{placeholder:"请选择存储条件",children:[e.jsx(Y,{value:"室温",children:"室温"}),e.jsx(Y,{value:"4°C",children:"4°C"}),e.jsx(Y,{value:"-20°C",children:"-20°C"}),e.jsx(Y,{value:"-80°C",children:"-80°C"})]})}),e.jsx(s.Item,{name:"processingTime",label:"处理时间(小时)",rules:[{required:!0,message:"请输入处理时间"}],children:e.jsx(h,{type:"number",placeholder:"请输入处理时间"})}),e.jsx(s.Item,{name:"isActive",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(u,{placeholder:"请选择状态",children:[e.jsx(Y,{value:!0,children:"启用"}),e.jsx(Y,{value:!1,children:"禁用"})]})}),e.jsx(s.Item,{children:e.jsxs(o,{children:[e.jsx(x,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(x,{onClick:()=>{m(!1),f(null),C.resetFields()},children:"取消"})]})})]})})]})},{Title:_}=d,{Option:G}=u,$=()=>{const[a,l]=t.useState([]),[r,i]=t.useState(!1),[d,m]=t.useState(!1),[j,A]=t.useState(null),[T]=s.useForm(),S=[{id:"1",name:"Illumina NovaSeq 6000",model:"NovaSeq 6000",manufacturer:"Illumina",serialNumber:"NS500001",location:"测序实验室A",status:"running",purchaseDate:"2023-01-15",warrantyExpiry:"2026-01-15",lastMaintenance:"2024-01-10",nextMaintenance:"2024-04-10",specifications:{throughput:"6 Tb",readLength:"2x150 bp",runTime:"13-44 hours"},createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"2",name:"Illumina MiSeq",model:"MiSeq",manufacturer:"Illumina",serialNumber:"MS001234",location:"测序实验室B",status:"idle",purchaseDate:"2022-06-20",warrantyExpiry:"2025-06-20",lastMaintenance:"2024-01-05",nextMaintenance:"2024-04-05",specifications:{throughput:"15 Gb",readLength:"2x300 bp",runTime:"4-55 hours"},createdAt:"2024-01-16",updatedAt:"2024-01-16"},{id:"3",name:"Applied Biosystems 3500",model:"3500 Genetic Analyzer",manufacturer:"Applied Biosystems",serialNumber:"AB350001",location:"分子实验室",status:"maintenance",purchaseDate:"2021-03-10",warrantyExpiry:"2024-03-10",lastMaintenance:"2024-01-20",nextMaintenance:"2024-04-20",specifications:{capillaries:"8",readLength:"900 bp",runTime:"1-3 hours"},createdAt:"2024-01-17",updatedAt:"2024-01-17"},{id:"4",name:"Thermo Fisher Ion Torrent",model:"Ion GeneStudio S5",manufacturer:"Thermo Fisher",serialNumber:"IT550001",location:"测序实验室C",status:"error",purchaseDate:"2023-08-15",warrantyExpiry:"2026-08-15",lastMaintenance:"2024-01-15",nextMaintenance:"2024-04-15",specifications:{throughput:"50 Gb",readLength:"600 bp",runTime:"2-7 hours"},createdAt:"2024-01-18",updatedAt:"2024-01-18"}],k=e=>{switch(e){case"running":return"green";case"idle":return"blue";case"maintenance":return"orange";case"error":return"red";default:return"default"}},q=e=>{switch(e){case"running":return"运行中";case"idle":return"空闲";case"maintenance":return"维护中";case"error":return"故障";default:return"未知"}},D=[{title:"设备名称",dataIndex:"name",key:"name",width:150},{title:"型号",dataIndex:"model",key:"model",width:120},{title:"制造商",dataIndex:"manufacturer",key:"manufacturer",width:120},{title:"序列号",dataIndex:"serialNumber",key:"serialNumber",width:120},{title:"位置",dataIndex:"location",key:"location",width:120},{title:"状态",dataIndex:"status",key:"status",width:100,render:t=>e.jsx(w,{color:k(t),children:q(t)})},{title:"购买日期",dataIndex:"purchaseDate",key:"purchaseDate",width:100},{title:"保修到期",dataIndex:"warrantyExpiry",key:"warrantyExpiry",width:100},{title:"下次维护",dataIndex:"nextMaintenance",key:"nextMaintenance",width:100},{title:"操作",key:"action",width:120,render:(t,a)=>e.jsxs(o,{size:"small",children:[e.jsx(x,{type:"link",size:"small",icon:e.jsx(v,{}),onClick:()=>(e=>{A(e);const t={...e,purchaseDate:e.purchaseDate?C(e.purchaseDate):null,warrantyExpiry:e.warrantyExpiry?C(e.warrantyExpiry):null,lastMaintenance:e.lastMaintenance?C(e.lastMaintenance):null,nextMaintenance:e.nextMaintenance?C(e.nextMaintenance):null};T.setFieldsValue(t),m(!0)})(a),children:"编辑"}),e.jsx(b,{title:"确定要删除这个设备吗？",onConfirm:()=>(async e=>{try{l(t=>t.filter(t=>t.id!==e)),n.success("删除成功")}catch(t){n.error("删除失败")}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(x,{type:"link",size:"small",danger:!0,icon:e.jsx(I,{}),children:"删除"})})]})}];return t.useEffect(()=>{(async()=>{i(!0);try{await new Promise(e=>setTimeout(e,500)),l(S)}catch(e){n.error("获取设备列表失败")}finally{i(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(_,{level:3,style:{marginBottom:24},children:"设备管理"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>{A(null),T.resetFields(),m(!0)},children:"新增设备"})}),e.jsx(y,{columns:D,dataSource:a,rowKey:"id",loading:r,pagination:{total:a.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},scroll:{x:1200}})]}),e.jsx(g,{title:j?"编辑设备":"新增设备",open:d,onCancel:()=>{m(!1),A(null),T.resetFields()},footer:null,width:700,children:e.jsxs(s,{form:T,layout:"vertical",onFinish:async e=>{var t,a,r,i;try{const s={...e,purchaseDate:null==(t=e.purchaseDate)?void 0:t.format("YYYY-MM-DD"),warrantyExpiry:null==(a=e.warrantyExpiry)?void 0:a.format("YYYY-MM-DD"),lastMaintenance:null==(r=e.lastMaintenance)?void 0:r.format("YYYY-MM-DD"),nextMaintenance:null==(i=e.nextMaintenance)?void 0:i.format("YYYY-MM-DD")};if(j){const e={...j,...s,updatedAt:(new Date).toISOString().split("T")[0]};l(t=>t.map(t=>t.id===j.id?e:t)),n.success("设备信息更新成功")}else{const e={id:Date.now().toString(),...s,specifications:s.specifications||{},createdAt:(new Date).toISOString().split("T")[0],updatedAt:(new Date).toISOString().split("T")[0]};l(t=>[...t,e]),n.success("设备创建成功")}m(!1),A(null),T.resetFields()}catch(s){n.error("保存失败")}},children:[e.jsx(s.Item,{name:"name",label:"设备名称",rules:[{required:!0,message:"请输入设备名称"}],children:e.jsx(h,{placeholder:"请输入设备名称"})}),e.jsx(s.Item,{name:"model",label:"设备型号",rules:[{required:!0,message:"请输入设备型号"}],children:e.jsx(h,{placeholder:"请输入设备型号"})}),e.jsx(s.Item,{name:"manufacturer",label:"制造商",rules:[{required:!0,message:"请输入制造商"}],children:e.jsx(h,{placeholder:"请输入制造商"})}),e.jsx(s.Item,{name:"serialNumber",label:"序列号",rules:[{required:!0,message:"请输入序列号"}],children:e.jsx(h,{placeholder:"请输入序列号"})}),e.jsx(s.Item,{name:"location",label:"设备位置",rules:[{required:!0,message:"请输入设备位置"}],children:e.jsx(h,{placeholder:"请输入设备位置"})}),e.jsx(s.Item,{name:"status",label:"设备状态",rules:[{required:!0,message:"请选择设备状态"}],children:e.jsxs(u,{placeholder:"请选择设备状态",children:[e.jsx(G,{value:"running",children:"运行中"}),e.jsx(G,{value:"idle",children:"空闲"}),e.jsx(G,{value:"maintenance",children:"维护中"}),e.jsx(G,{value:"error",children:"故障"})]})}),e.jsx(s.Item,{name:"purchaseDate",label:"购买日期",rules:[{required:!0,message:"请选择购买日期"}],children:e.jsx(f,{placeholder:"请选择购买日期",style:{width:"100%"}})}),e.jsx(s.Item,{name:"warrantyExpiry",label:"保修到期日期",children:e.jsx(f,{placeholder:"请选择保修到期日期",style:{width:"100%"}})}),e.jsx(s.Item,{name:"lastMaintenance",label:"上次维护日期",children:e.jsx(f,{placeholder:"请选择上次维护日期",style:{width:"100%"}})}),e.jsx(s.Item,{name:"nextMaintenance",label:"下次维护日期",children:e.jsx(f,{placeholder:"请选择下次维护日期",style:{width:"100%"}})}),e.jsx(s.Item,{children:e.jsxs(o,{children:[e.jsx(x,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(x,{onClick:()=>{m(!1),A(null),T.resetFields()},children:"取消"})]})})]})})]})},{Option:V}=u,{TextArea:J}=h,{Title:K}=d,Q=()=>{const{setBreadcrumbs:a}=i(),[l,r]=t.useState([]),[d,D]=t.useState(!1),[N,B]=t.useState(!1),[P,L]=t.useState(null),[F,z]=t.useState(""),[O,Z]=t.useState(""),[M,E]=t.useState(""),[Y]=s.useForm();t.useEffect(()=>{a([{title:"首页"},{title:"基础档案"},{title:"试剂档案"}]),R()},[a]);const R=async()=>{D(!0);try{await new Promise(e=>setTimeout(e,800));r([{id:"1",name:"Taq DNA聚合酶",code:"REA001",brand:"Thermo Fisher",specification:"500U",lotNumber:"TF20240301",expiryDate:"2024-12-31",storageCondition:"-20°C",quantity:25,unit:"支",price:580,supplier:"赛默飞世尔科技",category:"酶类试剂",status:"normal",description:"高保真DNA聚合酶，适用于PCR扩增",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-02-20T14:30:00Z"},{id:"2",name:"dNTP混合液",code:"REA002",brand:"NEB",specification:"10mM",lotNumber:"NEB20240215",expiryDate:"2024-08-15",storageCondition:"-20°C",quantity:5,unit:"管",price:320,supplier:"新英格兰生物实验室",category:"核酸试剂",status:"low_stock",description:"四种dNTP等摩尔混合液",createdAt:"2024-02-01T09:15:00Z",updatedAt:"2024-02-25T16:45:00Z"},{id:"3",name:"DNA Marker",code:"REA003",brand:"Takara",specification:"100bp-10kb",lotNumber:"TK20231201",expiryDate:"2024-06-30",storageCondition:"-20°C",quantity:0,unit:"支",price:180,supplier:"宝生物工程",category:"分子标准",status:"out_of_stock",description:"DNA分子量标准，100bp-10kb",createdAt:"2023-12-05T11:20:00Z",updatedAt:"2024-02-28T10:15:00Z"},{id:"4",name:"SYBR Green染料",code:"REA004",brand:"Applied Biosystems",specification:"1ml",lotNumber:"AB20240101",expiryDate:"2024-04-30",storageCondition:"4°C避光",quantity:12,unit:"瓶",price:450,supplier:"应用生物系统",category:"荧光染料",status:"expired",description:"qPCR荧光染料，高灵敏度",createdAt:"2024-01-10T08:30:00Z",updatedAt:"2024-03-01T12:00:00Z"}])}catch(e){n.error("获取试剂列表失败")}finally{D(!1)}},_=e=>{L(e||null),e?Y.setFieldsValue({...e,expiryDate:C(e.expiryDate)}):Y.resetFields(),B(!0)},G=()=>{B(!1),L(null),Y.resetFields()},$=(e,t)=>0===e?"out_of_stock":e<=10?"low_stock":C(t).isBefore(C(),"day")?"expired":"normal",Q=e=>({normal:"green",expired:"red",low_stock:"orange",out_of_stock:"volcano"}[e]),U=e=>({normal:"正常",expired:"已过期",low_stock:"库存不足",out_of_stock:"缺货"}[e]),H=l.filter(e=>{const t=!F||e.name.toLowerCase().includes(F.toLowerCase())||e.code.toLowerCase().includes(F.toLowerCase())||e.brand.toLowerCase().includes(F.toLowerCase())||e.supplier.toLowerCase().includes(F.toLowerCase()),a=!O||e.status===O,l=!M||e.category===M;return t&&a&&l}),W=[{title:"试剂编码",dataIndex:"code",key:"code",width:100,fixed:"left"},{title:"试剂名称",dataIndex:"name",key:"name",width:150,fixed:"left"},{title:"品牌",dataIndex:"brand",key:"brand",width:120},{title:"规格",dataIndex:"specification",key:"specification",width:100},{title:"批号",dataIndex:"lotNumber",key:"lotNumber",width:120},{title:"有效期",dataIndex:"expiryDate",key:"expiryDate",width:110,render:(t,a)=>{const l=C(t).isBefore(C(),"day"),r=C(t).diff(C(),"day")<=30&&!l;return e.jsxs("span",{style:{color:l?"#ff4d4f":r?"#fa8c16":void 0},children:[C(t).format("YYYY-MM-DD"),(l||r)&&e.jsx(k,{style:{marginLeft:4,color:"#fa8c16"}})]})}},{title:"存储条件",dataIndex:"storageCondition",key:"storageCondition",width:100},{title:"库存",dataIndex:"quantity",key:"quantity",width:80,render:(t,a)=>e.jsxs("span",{style:{color:0===t?"#ff4d4f":t<=10?"#fa8c16":void 0},children:[t," ",a.unit]})},{title:"单价",dataIndex:"price",key:"price",width:80,render:e=>`¥${e.toFixed(2)}`},{title:"供应商",dataIndex:"supplier",key:"supplier",width:120,ellipsis:!0},{title:"分类",dataIndex:"category",key:"category",width:100},{title:"状态",dataIndex:"status",key:"status",width:80,render:t=>e.jsx(w,{color:Q(t),children:U(t)})},{title:"操作",key:"action",width:120,fixed:"right",render:(t,a)=>e.jsxs(o,{children:[e.jsx(q,{title:"编辑",children:e.jsx(x,{type:"text",icon:e.jsx(v,{}),onClick:()=>_(a),size:"small"})}),e.jsx(b,{title:"确定要删除这个试剂吗？",onConfirm:()=>(async e=>{try{D(!0),await new Promise(e=>setTimeout(e,500)),r(l.filter(t=>t.id!==e)),n.success("试剂删除成功")}catch(t){n.error("删除失败")}finally{D(!1)}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(q,{title:"删除",children:e.jsx(x,{type:"text",danger:!0,icon:e.jsx(I,{}),size:"small"})})})]})}];return e.jsxs("div",{children:[e.jsx(K,{level:3,style:{marginBottom:24},children:"试剂档案"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(o,{wrap:!0,children:[e.jsx(h,{placeholder:"搜索试剂名称、编码、品牌或供应商",prefix:e.jsx(m,{}),value:F,onChange:e=>z(e.target.value),style:{width:280}}),e.jsxs(u,{placeholder:"试剂分类",value:M,onChange:E,style:{width:120},allowClear:!0,children:[e.jsx(V,{value:"酶类试剂",children:"酶类试剂"}),e.jsx(V,{value:"核酸试剂",children:"核酸试剂"}),e.jsx(V,{value:"分子标准",children:"分子标准"}),e.jsx(V,{value:"荧光染料",children:"荧光染料"}),e.jsx(V,{value:"缓冲液",children:"缓冲液"}),e.jsx(V,{value:"其他",children:"其他"})]}),e.jsxs(u,{placeholder:"状态",value:O,onChange:Z,style:{width:100},allowClear:!0,children:[e.jsx(V,{value:"normal",children:"正常"}),e.jsx(V,{value:"expired",children:"已过期"}),e.jsx(V,{value:"low_stock",children:"库存不足"}),e.jsx(V,{value:"out_of_stock",children:"缺货"})]}),e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>_(),children:"新增试剂"}),e.jsx(x,{icon:e.jsx(j,{}),children:"导出"})]})}),e.jsx(y,{columns:W,dataSource:H,rowKey:"id",loading:d,scroll:{x:1500},pagination:{total:H.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]}),e.jsx(g,{title:P?"编辑试剂":"新增试剂",open:N,onCancel:G,footer:null,width:800,children:e.jsxs(s,{form:Y,layout:"vertical",onFinish:async e=>{try{D(!0),await new Promise(e=>setTimeout(e,1e3));const t={...e,expiryDate:e.expiryDate.format("YYYY-MM-DD"),status:$(e.quantity,e.expiryDate.format("YYYY-MM-DD"))};if(P){const e={...P,...t,updatedAt:(new Date).toISOString()};r(l.map(t=>t.id===P.id?e:t)),n.success("试剂信息更新成功")}else{const e={id:Date.now().toString(),...t,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};r([...l,e]),n.success("试剂添加成功")}G()}catch(t){n.error("操作失败")}finally{D(!1)}},children:[e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"code",label:"试剂编码",rules:[{required:!0,message:"请输入试剂编码"}],children:e.jsx(h,{placeholder:"请输入试剂编码"})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"name",label:"试剂名称",rules:[{required:!0,message:"请输入试剂名称"}],children:e.jsx(h,{placeholder:"请输入试剂名称"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"brand",label:"品牌",rules:[{required:!0,message:"请输入品牌"}],children:e.jsx(h,{placeholder:"请输入品牌"})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"specification",label:"规格",rules:[{required:!0,message:"请输入规格"}],children:e.jsx(h,{placeholder:"请输入规格"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"lotNumber",label:"批号",rules:[{required:!0,message:"请输入批号"}],children:e.jsx(h,{placeholder:"请输入批号"})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"expiryDate",label:"有效期",rules:[{required:!0,message:"请选择有效期"}],children:e.jsx(f,{style:{width:"100%"}})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"storageCondition",label:"存储条件",rules:[{required:!0,message:"请输入存储条件"}],children:e.jsx(h,{placeholder:"如：-20°C、4°C避光等"})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"quantity",label:"库存数量",rules:[{required:!0,message:"请输入库存数量"}],children:e.jsx(S,{min:0,style:{width:"100%"}})})}),e.jsx(T,{span:4,children:e.jsx(s.Item,{name:"unit",label:"单位",rules:[{required:!0,message:"请输入单位"}],children:e.jsxs(u,{placeholder:"单位",children:[e.jsx(V,{value:"支",children:"支"}),e.jsx(V,{value:"管",children:"管"}),e.jsx(V,{value:"瓶",children:"瓶"}),e.jsx(V,{value:"盒",children:"盒"}),e.jsx(V,{value:"ml",children:"ml"}),e.jsx(V,{value:"μl",children:"μl"}),e.jsx(V,{value:"g",children:"g"}),e.jsx(V,{value:"mg",children:"mg"})]})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"price",label:"单价（元）",rules:[{required:!0,message:"请输入单价"}],children:e.jsx(S,{min:0,precision:2,style:{width:"100%"}})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"supplier",label:"供应商",rules:[{required:!0,message:"请输入供应商"}],children:e.jsx(h,{placeholder:"请输入供应商"})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"category",label:"试剂分类",rules:[{required:!0,message:"请选择试剂分类"}],children:e.jsxs(u,{placeholder:"请选择试剂分类",children:[e.jsx(V,{value:"酶类试剂",children:"酶类试剂"}),e.jsx(V,{value:"核酸试剂",children:"核酸试剂"}),e.jsx(V,{value:"分子标准",children:"分子标准"}),e.jsx(V,{value:"荧光染料",children:"荧光染料"}),e.jsx(V,{value:"缓冲液",children:"缓冲液"}),e.jsx(V,{value:"其他",children:"其他"})]})})})]}),e.jsx(s.Item,{name:"description",label:"描述",children:e.jsx(J,{rows:3,placeholder:"请输入试剂描述信息"})}),e.jsx(s.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(o,{children:[e.jsx(x,{onClick:G,children:"取消"}),e.jsx(x,{type:"primary",htmlType:"submit",loading:d,children:P?"更新":"添加"})]})})]})})]})},{Option:U}=u,{TextArea:H}=h,{Title:W}=d,X=()=>{const{setBreadcrumbs:a}=i(),[l,r]=t.useState([]),[d,f]=t.useState(!1),[C,S]=t.useState(!1),[k,N]=t.useState(null),[B,P]=t.useState(""),[L,F]=t.useState(""),[z,O]=t.useState(""),[Z]=s.useForm();t.useEffect(()=>{a([{title:"首页"},{title:"基础档案"},{title:"实验室列表"}]),M()},[a]);const M=async()=>{f(!0);try{await new Promise(e=>setTimeout(e,800));r([{id:"1",name:"分子生物学实验室",code:"LAB001",type:"molecular",location:"A栋3楼",floor:"3F",area:120,capacity:8,manager:"张三",phone:"010-12345678",email:"molecular@seqnice.com",equipment:["PCR仪","电泳仪","离心机","移液器"],certification:["CNAS","CAP"],status:"active",description:"主要进行DNA/RNA提取、PCR扩增、基因克隆等分子生物学实验",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-02-20T14:30:00Z"},{id:"2",name:"微生物实验室",code:"LAB002",type:"microbiology",location:"A栋2楼",floor:"2F",area:80,capacity:6,manager:"李四",phone:"010-12345679",email:"micro@seqnice.com",equipment:["培养箱","显微镜","高压灭菌器","超净工作台"],certification:["CNAS"],status:"active",description:"进行细菌培养、菌株鉴定、抗生素敏感性测试等微生物学实验",createdAt:"2024-01-10T09:00:00Z",updatedAt:"2024-02-15T11:20:00Z"},{id:"3",name:"生化分析实验室",code:"LAB003",type:"biochemistry",location:"B栋1楼",floor:"1F",area:100,capacity:10,manager:"王五",phone:"010-12345680",email:"biochem@seqnice.com",equipment:["分光光度计","酶标仪","电化学分析仪","液相色谱仪"],certification:["ISO15189","CNAS"],status:"active",description:"进行蛋白质分析、酶活性检测、代谢物分析等生化实验",createdAt:"2024-01-05T14:00:00Z",updatedAt:"2024-02-10T16:45:00Z"},{id:"4",name:"病理诊断实验室",code:"LAB004",type:"pathology",location:"B栋2楼",floor:"2F",area:150,capacity:12,manager:"赵六",phone:"010-12345681",email:"pathology@seqnice.com",equipment:["切片机","染色机","显微镜","图像分析系统"],certification:["CAP","ISO15189"],status:"maintenance",description:"进行组织病理学检查、细胞学诊断、免疫组化等病理诊断",createdAt:"2023-12-20T11:30:00Z",updatedAt:"2024-02-25T09:15:00Z"}])}catch(e){n.error("获取实验室列表失败")}finally{f(!1)}},E=e=>{N(e||null),e?Z.setFieldsValue(e):Z.resetFields(),S(!0)},Y=()=>{S(!1),N(null),Z.resetFields()},R=e=>({molecular:"blue",microbiology:"green",biochemistry:"orange",pathology:"purple",other:"default"}[e]),_=e=>({molecular:"分子生物学",microbiology:"微生物学",biochemistry:"生物化学",pathology:"病理学",other:"其他"}[e]),G=e=>({active:"green",inactive:"red",maintenance:"orange"}[e]),$=e=>({active:"正常使用",inactive:"停用",maintenance:"维护中"}[e]),V=l.filter(e=>{const t=!B||e.name.toLowerCase().includes(B.toLowerCase())||e.code.toLowerCase().includes(B.toLowerCase())||e.manager.toLowerCase().includes(B.toLowerCase())||e.location.toLowerCase().includes(B.toLowerCase()),a=!L||e.type===L,l=!z||e.status===z;return t&&a&&l}),J=[{title:"实验室编码",dataIndex:"code",key:"code",width:100,fixed:"left"},{title:"实验室名称",dataIndex:"name",key:"name",width:150,fixed:"left"},{title:"类型",dataIndex:"type",key:"type",width:100,render:t=>e.jsx(w,{color:R(t),children:_(t)})},{title:"位置",dataIndex:"location",key:"location",width:120,render:(t,a)=>e.jsxs(o,{children:[e.jsx(D,{}),t]})},{title:"面积",dataIndex:"area",key:"area",width:80,render:e=>`${e}㎡`},{title:"容量",dataIndex:"capacity",key:"capacity",width:80,render:e=>`${e}人`},{title:"负责人",dataIndex:"manager",key:"manager",width:100},{title:"联系电话",dataIndex:"phone",key:"phone",width:120},{title:"主要设备",dataIndex:"equipment",key:"equipment",width:200,render:t=>e.jsxs("div",{children:[t.slice(0,3).map((t,a)=>e.jsx(w,{size:"small",style:{marginBottom:2},children:t},a)),t.length>3&&e.jsxs(w,{size:"small",style:{marginBottom:2},children:["+",t.length-3]})]})},{title:"认证资质",dataIndex:"certification",key:"certification",width:120,render:t=>e.jsx("div",{children:t.map((t,a)=>e.jsx(w,{color:"blue",size:"small",style:{marginBottom:2},children:t},a))})},{title:"状态",dataIndex:"status",key:"status",width:100,render:t=>e.jsx(w,{color:G(t),children:$(t)})},{title:"操作",key:"action",width:120,fixed:"right",render:(t,a)=>e.jsxs(o,{children:[e.jsx(q,{title:"编辑",children:e.jsx(x,{type:"text",icon:e.jsx(v,{}),onClick:()=>E(a),size:"small"})}),e.jsx(b,{title:"确定要删除这个实验室吗？",onConfirm:()=>(async e=>{try{f(!0),await new Promise(e=>setTimeout(e,500)),r(l.filter(t=>t.id!==e)),n.success("实验室删除成功")}catch(t){n.error("删除失败")}finally{f(!1)}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(q,{title:"删除",children:e.jsx(x,{type:"text",danger:!0,icon:e.jsx(I,{}),size:"small"})})})]})}];return e.jsxs("div",{children:[e.jsx(W,{level:3,style:{marginBottom:24},children:"实验室列表"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(o,{wrap:!0,children:[e.jsx(h,{placeholder:"搜索实验室名称、编码、负责人或位置",prefix:e.jsx(m,{}),value:B,onChange:e=>P(e.target.value),style:{width:280}}),e.jsxs(u,{placeholder:"实验室类型",value:L,onChange:F,style:{width:120},allowClear:!0,children:[e.jsx(U,{value:"molecular",children:"分子生物学"}),e.jsx(U,{value:"microbiology",children:"微生物学"}),e.jsx(U,{value:"biochemistry",children:"生物化学"}),e.jsx(U,{value:"pathology",children:"病理学"}),e.jsx(U,{value:"other",children:"其他"})]}),e.jsxs(u,{placeholder:"状态",value:z,onChange:O,style:{width:100},allowClear:!0,children:[e.jsx(U,{value:"active",children:"正常使用"}),e.jsx(U,{value:"inactive",children:"停用"}),e.jsx(U,{value:"maintenance",children:"维护中"})]}),e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>E(),children:"新增实验室"}),e.jsx(x,{icon:e.jsx(j,{}),children:"导出"})]})}),e.jsx(y,{columns:J,dataSource:V,rowKey:"id",loading:d,scroll:{x:1400},pagination:{total:V.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]}),e.jsx(g,{title:k?"编辑实验室":"新增实验室",open:C,onCancel:Y,footer:null,width:800,children:e.jsxs(s,{form:Z,layout:"vertical",onFinish:async e=>{try{if(f(!0),await new Promise(e=>setTimeout(e,1e3)),k){const t={...k,...e,updatedAt:(new Date).toISOString()};r(l.map(e=>e.id===k.id?t:e)),n.success("实验室信息更新成功")}else{const t={id:Date.now().toString(),...e,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};r([...l,t]),n.success("实验室添加成功")}Y()}catch(t){n.error("操作失败")}finally{f(!1)}},children:[e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"code",label:"实验室编码",rules:[{required:!0,message:"请输入实验室编码"}],children:e.jsx(h,{placeholder:"请输入实验室编码"})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"name",label:"实验室名称",rules:[{required:!0,message:"请输入实验室名称"}],children:e.jsx(h,{placeholder:"请输入实验室名称"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"type",label:"实验室类型",rules:[{required:!0,message:"请选择实验室类型"}],children:e.jsxs(u,{placeholder:"请选择实验室类型",children:[e.jsx(U,{value:"molecular",children:"分子生物学"}),e.jsx(U,{value:"microbiology",children:"微生物学"}),e.jsx(U,{value:"biochemistry",children:"生物化学"}),e.jsx(U,{value:"pathology",children:"病理学"}),e.jsx(U,{value:"other",children:"其他"})]})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(u,{placeholder:"请选择状态",children:[e.jsx(U,{value:"active",children:"正常使用"}),e.jsx(U,{value:"inactive",children:"停用"}),e.jsx(U,{value:"maintenance",children:"维护中"})]})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"location",label:"位置",rules:[{required:!0,message:"请输入位置"}],children:e.jsx(h,{placeholder:"如：A栋3楼"})})}),e.jsx(T,{span:6,children:e.jsx(s.Item,{name:"area",label:"面积（㎡）",rules:[{required:!0,message:"请输入面积"}],children:e.jsx(h,{type:"number",placeholder:"面积"})})}),e.jsx(T,{span:6,children:e.jsx(s.Item,{name:"capacity",label:"容量（人）",rules:[{required:!0,message:"请输入容量"}],children:e.jsx(h,{type:"number",placeholder:"容量"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"manager",label:"负责人",rules:[{required:!0,message:"请输入负责人"}],children:e.jsx(h,{placeholder:"请输入负责人"})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"phone",label:"联系电话",rules:[{required:!0,message:"请输入联系电话"}],children:e.jsx(h,{placeholder:"请输入联系电话"})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(h,{placeholder:"请输入邮箱"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"equipment",label:"主要设备",rules:[{required:!0,message:"请选择主要设备"}],children:e.jsxs(u,{mode:"tags",placeholder:"请输入或选择主要设备",style:{width:"100%"},children:[e.jsx(U,{value:"PCR仪",children:"PCR仪"}),e.jsx(U,{value:"电泳仪",children:"电泳仪"}),e.jsx(U,{value:"离心机",children:"离心机"}),e.jsx(U,{value:"移液器",children:"移液器"}),e.jsx(U,{value:"培养箱",children:"培养箱"}),e.jsx(U,{value:"显微镜",children:"显微镜"}),e.jsx(U,{value:"高压灭菌器",children:"高压灭菌器"}),e.jsx(U,{value:"超净工作台",children:"超净工作台"}),e.jsx(U,{value:"分光光度计",children:"分光光度计"}),e.jsx(U,{value:"酶标仪",children:"酶标仪"})]})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"certification",label:"认证资质",children:e.jsxs(u,{mode:"tags",placeholder:"请输入或选择认证资质",style:{width:"100%"},children:[e.jsx(U,{value:"CNAS",children:"CNAS"}),e.jsx(U,{value:"CAP",children:"CAP"}),e.jsx(U,{value:"ISO15189",children:"ISO15189"}),e.jsx(U,{value:"ISO17025",children:"ISO17025"}),e.jsx(U,{value:"GLP",children:"GLP"})]})})})]}),e.jsx(s.Item,{name:"description",label:"描述",children:e.jsx(H,{rows:3,placeholder:"请输入实验室描述信息"})}),e.jsx(s.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(o,{children:[e.jsx(x,{onClick:Y,children:"取消"}),e.jsx(x,{type:"primary",htmlType:"submit",loading:d,children:k?"更新":"添加"})]})})]})})]})},{Option:ee}=u,{TextArea:te}=h,{Title:ae}=d,le=()=>{const{setBreadcrumbs:a}=i(),[l,r]=t.useState([]),[d,f]=t.useState(!1),[C,S]=t.useState(!1),[k,D]=t.useState(null),[L,F]=t.useState(""),[z,O]=t.useState(""),[Z,M]=t.useState(""),[E]=s.useForm();t.useEffect(()=>{a([{title:"首页"},{title:"基础档案"},{title:"科室列表"}]),Y()},[a]);const Y=async()=>{f(!0);try{await new Promise(e=>setTimeout(e,800));r([{id:"1",name:"检验科",code:"DEPT001",type:"laboratory",level:1,director:"张主任",phone:"010-12345678",email:"lab@seqnice.com",location:"A栋2-3楼",staffCount:25,responsibilities:["临床检验","病理诊断","质量控制","科研教学"],status:"active",description:"负责医院所有临床检验工作，包括生化、免疫、微生物、分子诊断等",createdAt:"2024-01-01T08:00:00Z",updatedAt:"2024-02-20T10:30:00Z"},{id:"2",name:"分子诊断室",code:"DEPT002",type:"laboratory",parentId:"1",parentName:"检验科",level:2,director:"李医生",phone:"010-12345679",email:"molecular@seqnice.com",location:"A栋3楼301",staffCount:8,responsibilities:["基因检测","PCR检测","测序分析","遗传咨询"],status:"active",description:"专门从事分子生物学检测，包括病原体检测、遗传病筛查等",createdAt:"2024-01-05T09:00:00Z",updatedAt:"2024-02-18T14:20:00Z"},{id:"3",name:"微生物室",code:"DEPT003",type:"laboratory",parentId:"1",parentName:"检验科",level:2,director:"王医生",phone:"010-12345680",email:"micro@seqnice.com",location:"A栋2楼201",staffCount:6,responsibilities:["细菌培养","药敏试验","真菌检测","病毒检测"],status:"active",description:"负责各类病原微生物的分离培养和鉴定工作",createdAt:"2024-01-03T10:00:00Z",updatedAt:"2024-02-15T16:45:00Z"},{id:"4",name:"临床科",code:"DEPT004",type:"clinical",level:1,director:"赵主任",phone:"010-12345681",email:"clinical@seqnice.com",location:"B栋1-5楼",staffCount:120,responsibilities:["患者诊疗","临床研究","教学培训","学术交流"],status:"active",description:"负责患者的临床诊疗工作，与检验科密切配合",createdAt:"2023-12-15T08:30:00Z",updatedAt:"2024-02-10T11:15:00Z"},{id:"5",name:"内科",code:"DEPT005",type:"clinical",parentId:"4",parentName:"临床科",level:2,director:"孙医生",phone:"010-12345682",email:"internal@seqnice.com",location:"B栋2楼",staffCount:35,responsibilities:["内科疾病诊治","慢病管理","急诊处理","会诊服务"],status:"active",description:"负责内科系统疾病的诊断和治疗",createdAt:"2023-12-20T09:00:00Z",updatedAt:"2024-02-08T13:30:00Z"},{id:"6",name:"行政管理部",code:"DEPT006",type:"administrative",level:1,director:"周主任",phone:"010-12345683",email:"admin@seqnice.com",location:"C栋1楼",staffCount:15,responsibilities:["人事管理","财务管理","行政事务","后勤保障"],status:"active",description:"负责医院的行政管理和后勤保障工作",createdAt:"2023-11-01T08:00:00Z",updatedAt:"2024-01-25T15:20:00Z"},{id:"7",name:"科研部",code:"DEPT007",type:"research",level:1,director:"吴教授",phone:"010-12345684",email:"research@seqnice.com",location:"D栋3楼",staffCount:12,responsibilities:["科研项目管理","学术论文发表","专利申请","产学研合作"],status:"active",description:"负责医院的科研工作和学术发展",createdAt:"2023-10-15T10:00:00Z",updatedAt:"2024-02-05T09:45:00Z"}])}catch(e){n.error("获取科室列表失败")}finally{f(!1)}},R=e=>{D(e||null),e?E.setFieldsValue(e):E.resetFields(),S(!0)},_=()=>{S(!1),D(null),E.resetFields()},G=e=>({clinical:"blue",laboratory:"green",administrative:"orange",support:"purple",research:"red"}[e]),$=e=>({clinical:"临床科室",laboratory:"检验科室",administrative:"行政科室",support:"支持科室",research:"科研科室"}[e]),V=e=>"active"===e?"green":"red",J=e=>"active"===e?"正常":"停用",K=l.filter(e=>{const t=!L||e.name.toLowerCase().includes(L.toLowerCase())||e.code.toLowerCase().includes(L.toLowerCase())||e.director.toLowerCase().includes(L.toLowerCase())||e.location.toLowerCase().includes(L.toLowerCase()),a=!z||e.type===z,l=!Z||e.status===Z;return t&&a&&l}),Q=[{title:"科室编码",dataIndex:"code",key:"code",width:100,fixed:"left"},{title:"科室名称",dataIndex:"name",key:"name",width:150,fixed:"left",render:(t,a)=>e.jsxs(o,{children:[a.level>1&&e.jsx("span",{style:{color:"#999",marginRight:4},children:"└─"}),t]})},{title:"上级科室",dataIndex:"parentName",key:"parentName",width:120,render:e=>e||"-"},{title:"类型",dataIndex:"type",key:"type",width:100,render:t=>e.jsx(w,{color:G(t),children:$(t)})},{title:"负责人",dataIndex:"director",key:"director",width:100,render:t=>e.jsxs(o,{children:[e.jsx(B,{}),t]})},{title:"联系电话",dataIndex:"phone",key:"phone",width:120},{title:"位置",dataIndex:"location",key:"location",width:120},{title:"人员数量",dataIndex:"staffCount",key:"staffCount",width:100,render:t=>e.jsxs(o,{children:[e.jsx(P,{}),t,"人"]})},{title:"主要职责",dataIndex:"responsibilities",key:"responsibilities",width:200,render:t=>e.jsxs("div",{children:[t.slice(0,2).map((t,a)=>e.jsx(w,{size:"small",style:{marginBottom:2},children:t},a)),t.length>2&&e.jsxs(w,{size:"small",style:{marginBottom:2},children:["+",t.length-2]})]})},{title:"状态",dataIndex:"status",key:"status",width:80,render:t=>e.jsx(w,{color:V(t),children:J(t)})},{title:"操作",key:"action",width:120,fixed:"right",render:(t,a)=>e.jsxs(o,{children:[e.jsx(q,{title:"编辑",children:e.jsx(x,{type:"text",icon:e.jsx(v,{}),onClick:()=>R(a),size:"small"})}),e.jsx(b,{title:"确定要删除这个科室吗？",onConfirm:()=>(async e=>{try{if(f(!0),l.some(t=>t.parentId===e))return void n.error("该科室下还有子科室，无法删除");await new Promise(e=>setTimeout(e,500)),r(l.filter(t=>t.id!==e)),n.success("科室删除成功")}catch(t){n.error("删除失败")}finally{f(!1)}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(q,{title:"删除",children:e.jsx(x,{type:"text",danger:!0,icon:e.jsx(I,{}),size:"small"})})})]})}];return e.jsxs("div",{children:[e.jsx(ae,{level:3,style:{marginBottom:24},children:"科室列表"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(o,{wrap:!0,children:[e.jsx(h,{placeholder:"搜索科室名称、编码、负责人或位置",prefix:e.jsx(m,{}),value:L,onChange:e=>F(e.target.value),style:{width:280}}),e.jsxs(u,{placeholder:"科室类型",value:z,onChange:O,style:{width:120},allowClear:!0,children:[e.jsx(ee,{value:"clinical",children:"临床科室"}),e.jsx(ee,{value:"laboratory",children:"检验科室"}),e.jsx(ee,{value:"administrative",children:"行政科室"}),e.jsx(ee,{value:"support",children:"支持科室"}),e.jsx(ee,{value:"research",children:"科研科室"})]}),e.jsxs(u,{placeholder:"状态",value:Z,onChange:M,style:{width:100},allowClear:!0,children:[e.jsx(ee,{value:"active",children:"正常"}),e.jsx(ee,{value:"inactive",children:"停用"})]}),e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>R(),children:"新增科室"}),e.jsx(x,{icon:e.jsx(j,{}),children:"导出"})]})}),e.jsx(y,{columns:Q,dataSource:K,rowKey:"id",loading:d,scroll:{x:1300},pagination:{total:K.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]}),e.jsx(g,{title:k?"编辑科室":"新增科室",open:C,onCancel:_,footer:null,width:800,children:e.jsxs(s,{form:E,layout:"vertical",onFinish:async e=>{try{if(f(!0),await new Promise(e=>setTimeout(e,1e3)),k){const t={...k,...e,updatedAt:(new Date).toISOString()};r(l.map(e=>e.id===k.id?t:e)),n.success("科室信息更新成功")}else{const t=e.parentId?l.find(t=>t.id===e.parentId):null,a={id:Date.now().toString(),...e,parentName:null==t?void 0:t.name,level:t?t.level+1:1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};r([...l,a]),n.success("科室添加成功")}_()}catch(t){n.error("操作失败")}finally{f(!1)}},children:[e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"code",label:"科室编码",rules:[{required:!0,message:"请输入科室编码"}],children:e.jsx(h,{placeholder:"请输入科室编码"})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"name",label:"科室名称",rules:[{required:!0,message:"请输入科室名称"}],children:e.jsx(h,{placeholder:"请输入科室名称"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"type",label:"科室类型",rules:[{required:!0,message:"请选择科室类型"}],children:e.jsxs(u,{placeholder:"请选择科室类型",children:[e.jsx(ee,{value:"clinical",children:"临床科室"}),e.jsx(ee,{value:"laboratory",children:"检验科室"}),e.jsx(ee,{value:"administrative",children:"行政科室"}),e.jsx(ee,{value:"support",children:"支持科室"}),e.jsx(ee,{value:"research",children:"科研科室"})]})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"parentId",label:"上级科室",children:e.jsx(N,{placeholder:"请选择上级科室",treeData:(()=>{const e=[],t=new Map;return l.forEach(e=>{t.set(e.id,{value:e.id,title:e.name,children:[]})}),l.forEach(a=>{const l=t.get(a.id);a.parentId&&t.has(a.parentId)?t.get(a.parentId).children.push(l):e.push(l)}),e})(),allowClear:!0})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(u,{placeholder:"请选择状态",children:[e.jsx(ee,{value:"active",children:"正常"}),e.jsx(ee,{value:"inactive",children:"停用"})]})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"director",label:"负责人",rules:[{required:!0,message:"请输入负责人"}],children:e.jsx(h,{placeholder:"请输入负责人"})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"phone",label:"联系电话",rules:[{required:!0,message:"请输入联系电话"}],children:e.jsx(h,{placeholder:"请输入联系电话"})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(h,{placeholder:"请输入邮箱"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"location",label:"位置",rules:[{required:!0,message:"请输入位置"}],children:e.jsx(h,{placeholder:"如：A栋2-3楼"})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"staffCount",label:"人员数量",rules:[{required:!0,message:"请输入人员数量"}],children:e.jsx(h,{type:"number",placeholder:"人员数量"})})})]}),e.jsx(s.Item,{name:"responsibilities",label:"主要职责",rules:[{required:!0,message:"请输入主要职责"}],children:e.jsxs(u,{mode:"tags",placeholder:"请输入主要职责",style:{width:"100%"},children:[e.jsx(ee,{value:"临床检验",children:"临床检验"}),e.jsx(ee,{value:"病理诊断",children:"病理诊断"}),e.jsx(ee,{value:"质量控制",children:"质量控制"}),e.jsx(ee,{value:"科研教学",children:"科研教学"}),e.jsx(ee,{value:"患者诊疗",children:"患者诊疗"}),e.jsx(ee,{value:"临床研究",children:"临床研究"}),e.jsx(ee,{value:"人事管理",children:"人事管理"}),e.jsx(ee,{value:"财务管理",children:"财务管理"}),e.jsx(ee,{value:"行政事务",children:"行政事务"}),e.jsx(ee,{value:"后勤保障",children:"后勤保障"})]})}),e.jsx(s.Item,{name:"description",label:"描述",children:e.jsx(te,{rows:3,placeholder:"请输入科室描述信息"})}),e.jsx(s.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(o,{children:[e.jsx(x,{onClick:_,children:"取消"}),e.jsx(x,{type:"primary",htmlType:"submit",loading:d,children:k?"更新":"添加"})]})})]})})]})},{Option:re}=u,{TextArea:ie}=h,{Title:se}=d,ne=()=>{const{setBreadcrumbs:a}=i(),[l,r]=t.useState([]),[d,f]=t.useState(!1),[C,S]=t.useState(!1),[k,D]=t.useState(null),[N,O]=t.useState(""),[Z,M]=t.useState(""),[E,Y]=t.useState(""),[R]=s.useForm();t.useEffect(()=>{a([{title:"首页"},{title:"基础档案"},{title:"实验小组"}]),_()},[a]);const _=async()=>{f(!0);try{await new Promise(e=>setTimeout(e,800));r([{id:"1",name:"分子诊断小组",code:"GROUP001",type:"molecular",departmentId:"2",departmentName:"分子诊断室",laboratoryId:"1",laboratoryName:"分子生物学实验室",leader:"张医生",leaderId:"user001",members:[{id:"user001",name:"张医生",role:"leader",title:"主任医师",phone:"13800138001",email:"zhang@seqnice.com"},{id:"user002",name:"李技师",role:"member",title:"主管技师",phone:"13800138002",email:"li@seqnice.com"},{id:"user003",name:"王技师",role:"member",title:"技师",phone:"13800138003",email:"wang@seqnice.com"},{id:"user004",name:"赵实习生",role:"intern",title:"实习生",phone:"13800138004",email:"zhao@seqnice.com"}],memberCount:4,specialties:["PCR检测","基因测序","突变分析","病原体检测"],equipment:["实时荧光PCR仪","基因测序仪","电泳仪","核酸提取仪"],projects:["结核分枝杆菌耐药基因检测","HPV基因分型","肿瘤基因突变检测"],status:"active",description:"专门从事分子诊断技术的实验小组，具备丰富的PCR和测序经验",createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-02-20T14:30:00Z"},{id:"2",name:"微生物检测小组",code:"GROUP002",type:"microbiology",departmentId:"3",departmentName:"微生物室",laboratoryId:"2",laboratoryName:"微生物实验室",leader:"李主管",leaderId:"user005",members:[{id:"user005",name:"李主管",role:"leader",title:"主管技师",phone:"13800138005",email:"li.manager@seqnice.com"},{id:"user006",name:"陈技师",role:"member",title:"技师",phone:"13800138006",email:"chen@seqnice.com"},{id:"user007",name:"刘技师",role:"member",title:"技师",phone:"13800138007",email:"liu@seqnice.com"}],memberCount:3,specialties:["细菌培养","药敏试验","真菌检测","厌氧菌培养"],equipment:["培养箱","厌氧培养系统","药敏分析仪","显微镜"],projects:["血培养检测","尿培养检测","痰培养检测","药敏试验"],status:"active",description:"负责各类临床标本的微生物培养和药敏试验",createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-02-18T11:20:00Z"},{id:"3",name:"生化检测小组",code:"GROUP003",type:"biochemistry",departmentId:"1",departmentName:"检验科",laboratoryId:"3",laboratoryName:"生化分析实验室",leader:"王主任",leaderId:"user008",members:[{id:"user008",name:"王主任",role:"leader",title:"副主任医师",phone:"13800138008",email:"wang.director@seqnice.com"},{id:"user009",name:"周技师",role:"member",title:"主管技师",phone:"13800138009",email:"zhou@seqnice.com"},{id:"user010",name:"吴技师",role:"member",title:"技师",phone:"13800138010",email:"wu@seqnice.com"},{id:"user011",name:"孙技师",role:"member",title:"技师",phone:"13800138011",email:"sun@seqnice.com"},{id:"user012",name:"马实习生",role:"intern",title:"实习生",phone:"13800138012",email:"ma@seqnice.com"}],memberCount:5,specialties:["生化分析","免疫检测","酶学检测","电解质分析"],equipment:["全自动生化分析仪","化学发光免疫分析仪","电解质分析仪","血气分析仪"],projects:["肝功能检测","肾功能检测","血脂检测","心肌酶检测"],status:"active",description:"负责临床生化和免疫检测项目",createdAt:"2024-01-05T08:30:00Z",updatedAt:"2024-02-15T16:45:00Z"},{id:"4",name:"病理诊断小组",code:"GROUP004",type:"pathology",departmentId:"1",departmentName:"检验科",laboratoryId:"4",laboratoryName:"病理诊断实验室",leader:"赵教授",leaderId:"user013",members:[{id:"user013",name:"赵教授",role:"leader",title:"主任医师",phone:"13800138013",email:"zhao.prof@seqnice.com"},{id:"user014",name:"钱医生",role:"member",title:"副主任医师",phone:"13800138014",email:"qian@seqnice.com"}],memberCount:2,specialties:["组织病理学","细胞病理学","免疫组化","分子病理"],equipment:["切片机","染色机","显微镜","图像分析系统"],projects:["肿瘤病理诊断","活检病理诊断","细胞学检查"],status:"inactive",description:"专门从事病理诊断工作的小组，目前因设备维护暂停工作",createdAt:"2023-12-20T14:00:00Z",updatedAt:"2024-02-25T09:15:00Z"},{id:"5",name:"科研创新小组",code:"GROUP005",type:"research",departmentId:"7",departmentName:"科研部",laboratoryId:"1",laboratoryName:"分子生物学实验室",leader:"吴教授",leaderId:"user015",members:[{id:"user015",name:"吴教授",role:"leader",title:"教授",phone:"13800138015",email:"wu.prof@seqnice.com"},{id:"user016",name:"郑博士",role:"member",title:"副研究员",phone:"13800138016",email:"zheng@seqnice.com"},{id:"user017",name:"冯硕士",role:"member",title:"助理研究员",phone:"13800138017",email:"feng@seqnice.com"}],memberCount:3,specialties:["新技术研发","方法学验证","科研项目管理","学术论文撰写"],equipment:["高通量测序仪","质谱仪","流式细胞仪","共聚焦显微镜"],projects:["液体活检技术研发","多重PCR方法开发","生物标志物筛选"],status:"active",description:"致力于检验医学新技术研发和创新的科研小组",createdAt:"2023-10-15T11:00:00Z",updatedAt:"2024-02-10T13:30:00Z"}])}catch(e){n.error("获取实验小组列表失败")}finally{f(!1)}},G=e=>{D(e||null),e?R.setFieldsValue({...e,memberIds:e.members.map(e=>e.id)}):R.resetFields(),S(!0)},$=()=>{S(!1),D(null),R.resetFields()},V=e=>({molecular:"blue",microbiology:"green",biochemistry:"orange",pathology:"purple",research:"red"}[e]),J=e=>({molecular:"分子诊断",microbiology:"微生物检测",biochemistry:"生化检测",pathology:"病理诊断",research:"科研创新"}[e]),K=e=>({active:"green",inactive:"orange",disbanded:"red"}[e]),Q=e=>({active:"活跃",inactive:"暂停",disbanded:"解散"}[e]),U=e=>({leader:"组长",member:"成员",intern:"实习生"}[e]),H=l.filter(e=>{const t=!N||e.name.toLowerCase().includes(N.toLowerCase())||e.code.toLowerCase().includes(N.toLowerCase())||e.leader.toLowerCase().includes(N.toLowerCase())||e.departmentName.toLowerCase().includes(N.toLowerCase()),a=!Z||e.type===Z,l=!E||e.status===E;return t&&a&&l}),W=[{title:"小组编码",dataIndex:"code",key:"code",width:100,fixed:"left"},{title:"小组名称",dataIndex:"name",key:"name",width:150,fixed:"left",render:(t,a)=>e.jsxs(o,{children:[e.jsx(L,{}),t]})},{title:"类型",dataIndex:"type",key:"type",width:100,render:t=>e.jsx(w,{color:V(t),children:J(t)})},{title:"所属科室",dataIndex:"departmentName",key:"departmentName",width:120},{title:"所属实验室",dataIndex:"laboratoryName",key:"laboratoryName",width:140},{title:"组长",dataIndex:"leader",key:"leader",width:100,render:t=>e.jsxs(o,{children:[e.jsx(F,{size:"small",icon:e.jsx(B,{})}),t]})},{title:"成员",dataIndex:"members",key:"members",width:200,render:t=>e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:4},children:[e.jsx(P,{})," ",t.length,"人"]}),e.jsxs("div",{children:[t.slice(0,3).map((t,a)=>{return e.jsxs(w,{color:(l=t.role,{leader:"red",member:"blue",intern:"green"}[l]),size:"small",style:{marginBottom:2},children:[t.name,"(",U(t.role),")"]},a);var l}),t.length>3&&e.jsxs(w,{size:"small",style:{marginBottom:2},children:["+",t.length-3]})]})]})},{title:"专业领域",dataIndex:"specialties",key:"specialties",width:180,render:t=>e.jsxs("div",{children:[t.slice(0,2).map((t,a)=>e.jsx(w,{size:"small",style:{marginBottom:2},children:t},a)),t.length>2&&e.jsxs(w,{size:"small",style:{marginBottom:2},children:["+",t.length-2]})]})},{title:"在研项目",dataIndex:"projects",key:"projects",width:150,render:t=>e.jsx(z,{count:t.length,showZero:!0,children:e.jsx("span",{children:"项目数量"})})},{title:"状态",dataIndex:"status",key:"status",width:80,render:t=>e.jsx(w,{color:K(t),children:Q(t)})},{title:"操作",key:"action",width:120,fixed:"right",render:(t,a)=>e.jsxs(o,{children:[e.jsx(q,{title:"编辑",children:e.jsx(x,{type:"text",icon:e.jsx(v,{}),onClick:()=>G(a),size:"small"})}),e.jsx(b,{title:"确定要删除这个实验小组吗？",onConfirm:()=>(async e=>{try{f(!0),await new Promise(e=>setTimeout(e,500)),r(l.filter(t=>t.id!==e)),n.success("实验小组删除成功")}catch(t){n.error("删除失败")}finally{f(!1)}})(a.id),okText:"确定",cancelText:"取消",children:e.jsx(q,{title:"删除",children:e.jsx(x,{type:"text",danger:!0,icon:e.jsx(I,{}),size:"small"})})})]})}];return e.jsxs("div",{children:[e.jsx(se,{level:3,style:{marginBottom:24},children:"实验小组"}),e.jsxs(c,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(o,{wrap:!0,children:[e.jsx(h,{placeholder:"搜索小组名称、编码、组长或科室",prefix:e.jsx(m,{}),value:N,onChange:e=>O(e.target.value),style:{width:280}}),e.jsxs(u,{placeholder:"小组类型",value:Z,onChange:M,style:{width:120},allowClear:!0,children:[e.jsx(re,{value:"molecular",children:"分子诊断"}),e.jsx(re,{value:"microbiology",children:"微生物检测"}),e.jsx(re,{value:"biochemistry",children:"生化检测"}),e.jsx(re,{value:"pathology",children:"病理诊断"}),e.jsx(re,{value:"research",children:"科研创新"})]}),e.jsxs(u,{placeholder:"状态",value:E,onChange:Y,style:{width:100},allowClear:!0,children:[e.jsx(re,{value:"active",children:"活跃"}),e.jsx(re,{value:"inactive",children:"暂停"}),e.jsx(re,{value:"disbanded",children:"解散"})]}),e.jsx(x,{type:"primary",icon:e.jsx(p,{}),onClick:()=>G(),children:"新增小组"}),e.jsx(x,{icon:e.jsx(j,{}),children:"导出"})]})}),e.jsx(y,{columns:W,dataSource:H,rowKey:"id",loading:d,scroll:{x:1400},pagination:{total:H.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}})]}),e.jsx(g,{title:k?"编辑实验小组":"新增实验小组",open:C,onCancel:$,footer:null,width:800,children:e.jsxs(s,{form:R,layout:"vertical",onFinish:async e=>{var t,a;try{if(f(!0),await new Promise(e=>setTimeout(e,1e3)),k){const a={...k,...e,memberCount:(null==(t=e.members)?void 0:t.length)||0,updatedAt:(new Date).toISOString()};r(l.map(e=>e.id===k.id?a:e)),n.success("实验小组信息更新成功")}else{const t={id:Date.now().toString(),...e,memberCount:(null==(a=e.members)?void 0:a.length)||0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};r([...l,t]),n.success("实验小组添加成功")}$()}catch(i){n.error("操作失败")}finally{f(!1)}},children:[e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"code",label:"小组编码",rules:[{required:!0,message:"请输入小组编码"}],children:e.jsx(h,{placeholder:"请输入小组编码"})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"name",label:"小组名称",rules:[{required:!0,message:"请输入小组名称"}],children:e.jsx(h,{placeholder:"请输入小组名称"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"type",label:"小组类型",rules:[{required:!0,message:"请选择小组类型"}],children:e.jsxs(u,{placeholder:"请选择小组类型",children:[e.jsx(re,{value:"molecular",children:"分子诊断"}),e.jsx(re,{value:"microbiology",children:"微生物检测"}),e.jsx(re,{value:"biochemistry",children:"生化检测"}),e.jsx(re,{value:"pathology",children:"病理诊断"}),e.jsx(re,{value:"research",children:"科研创新"})]})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"departmentName",label:"所属科室",rules:[{required:!0,message:"请输入所属科室"}],children:e.jsx(h,{placeholder:"请输入所属科室"})})}),e.jsx(T,{span:8,children:e.jsx(s.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(u,{placeholder:"请选择状态",children:[e.jsx(re,{value:"active",children:"活跃"}),e.jsx(re,{value:"inactive",children:"暂停"}),e.jsx(re,{value:"disbanded",children:"解散"})]})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"laboratoryName",label:"所属实验室",rules:[{required:!0,message:"请输入所属实验室"}],children:e.jsx(h,{placeholder:"请输入所属实验室"})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"leader",label:"组长",rules:[{required:!0,message:"请输入组长"}],children:e.jsx(h,{placeholder:"请输入组长"})})})]}),e.jsxs(A,{gutter:16,children:[e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"specialties",label:"专业领域",rules:[{required:!0,message:"请选择专业领域"}],children:e.jsxs(u,{mode:"tags",placeholder:"请输入或选择专业领域",style:{width:"100%"},children:[e.jsx(re,{value:"PCR检测",children:"PCR检测"}),e.jsx(re,{value:"基因测序",children:"基因测序"}),e.jsx(re,{value:"突变分析",children:"突变分析"}),e.jsx(re,{value:"病原体检测",children:"病原体检测"}),e.jsx(re,{value:"细菌培养",children:"细菌培养"}),e.jsx(re,{value:"药敏试验",children:"药敏试验"}),e.jsx(re,{value:"生化分析",children:"生化分析"}),e.jsx(re,{value:"免疫检测",children:"免疫检测"}),e.jsx(re,{value:"组织病理学",children:"组织病理学"}),e.jsx(re,{value:"细胞病理学",children:"细胞病理学"})]})})}),e.jsx(T,{span:12,children:e.jsx(s.Item,{name:"equipment",label:"主要设备",children:e.jsxs(u,{mode:"tags",placeholder:"请输入或选择主要设备",style:{width:"100%"},children:[e.jsx(re,{value:"PCR仪",children:"PCR仪"}),e.jsx(re,{value:"测序仪",children:"测序仪"}),e.jsx(re,{value:"培养箱",children:"培养箱"}),e.jsx(re,{value:"显微镜",children:"显微镜"}),e.jsx(re,{value:"生化分析仪",children:"生化分析仪"}),e.jsx(re,{value:"免疫分析仪",children:"免疫分析仪"})]})})})]}),e.jsx(s.Item,{name:"projects",label:"在研项目",children:e.jsx(u,{mode:"tags",placeholder:"请输入在研项目",style:{width:"100%"}})}),e.jsx(s.Item,{name:"description",label:"描述",children:e.jsx(ie,{rows:3,placeholder:"请输入实验小组描述信息"})}),e.jsx(s.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(o,{children:[e.jsx(x,{onClick:$,children:"取消"}),e.jsx(x,{type:"primary",htmlType:"submit",loading:d,children:k?"更新":"添加"})]})})]})})]})},de=()=>{const{setBreadcrumbs:s}=i();return t.useEffect(()=>{s([{title:"首页"},{title:"基础档案"}])},[s]),e.jsxs(a,{children:[e.jsx(l,{index:!0,element:e.jsx(r,{to:"customer",replace:!0})}),e.jsx(l,{path:"customer",element:e.jsx(M,{})}),e.jsx(l,{path:"sample-type",element:e.jsx(R,{})}),e.jsx(l,{path:"equipment",element:e.jsx($,{})}),e.jsx(l,{path:"reagent",element:e.jsx(Q,{})}),e.jsx(l,{path:"laboratory",element:e.jsx(X,{})}),e.jsx(l,{path:"department",element:e.jsx(le,{})}),e.jsx(l,{path:"experiment-group",element:e.jsx(ne,{})})]})};export{de as default};
