import{j as e}from"./index-DyvGJ5NW.js";import{a as l}from"./react-vendor-DKSb2WWV.js";import{a0 as a,a as t,W as d,D as s,a2 as n,a3 as o,S as i,B as r,Y as c,s as m}from"./antd-vendor-CqkZOb36.js";const x=()=>{const x=1001,h=l.useMemo(()=>[{label:"正式",value:1},{label:"自定义",value:2}],[]),u=l.useMemo(()=>[{label:"qPCR",value:"QPCR"},{label:"测序",value:"SEQ"},{label:"显微镜",value:"MIC"}],[]),p=l.useMemo(()=>[{label:"结核分枝杆菌检测",value:"STD_MTB"},{label:"HIV抗体检测",value:"STD_HIV"},{label:"HBV表面抗原",value:"STD_HBV"}],[]),j=l.useMemo(()=>[{label:"检验一科",value:2001},{label:"分子检验科",value:2002},{label:"免疫检验科",value:2003}],[]),y=l.useMemo(()=>[{label:"启用",value:1},{label:"停用",value:0}],[]),[I,b]=l.useState([{code:"IPJ-000001",name:"结核分枝杆菌检测",type:1,standardProjectCode:"STD_MTB",description:"结核分枝杆菌分子检测，联合多靶标判读",methodologyCode:"SEQ",departmentId:2002,status:1,organizationId:x},{code:"IPJ-000002",name:"HIV抗体检测",type:1,standardProjectCode:"STD_HIV",description:"HIV抗体酶联法筛查",methodologyCode:"QPCR",departmentId:2003,status:1,organizationId:x}]),[g,C]=l.useState(!1),[v,w]=l.useState(null),[S]=a.useForm(),f=()=>{C(!1),w(null),S.resetFields()},k=(e,l)=>{const a=e.find(e=>e.value===l);return a?a.label:String(l??"")},P=[{title:"检测项目编码",dataIndex:"code",key:"code",width:160},{title:"检测项目名称",dataIndex:"name",key:"name",width:200},{title:"检测项目类型",dataIndex:"type",key:"type",width:120,render:e=>k(h,e)},{title:"标准检测项目",dataIndex:"standardProjectCode",key:"standardProjectCode",width:180,render:e=>k(p,e)},{title:"方法学",dataIndex:"methodologyCode",key:"methodologyCode",width:120,render:e=>k(u,e)},{title:"检验科室",dataIndex:"departmentId",key:"departmentId",width:140,render:e=>k(j,e)},{title:"状态",dataIndex:"status",key:"status",width:100,render:l=>1===l?e.jsx(c,{color:"green",children:"启用"}):e.jsx(c,{color:"red",children:"停用"})},{title:"组织",dataIndex:"organizationId",key:"organizationId",width:100},{title:"操作",key:"action",fixed:"right",width:160,render:(l,a)=>e.jsxs(i,{children:[e.jsx(r,{type:"link",onClick:()=>(e=>{w(e),S.setFieldsValue(e),C(!0)})(a),children:"编辑"}),e.jsx(r,{type:"link",danger:!0,onClick:()=>{return e=a.code,b(l=>l.filter(l=>l.code!==e)),void m.success("已删除项目");var e},children:"删除"})]})}];return e.jsxs(t,{title:"检验项目库",extra:e.jsx(i,{children:e.jsx(r,{type:"primary",onClick:()=>{w(null),S.resetFields(),S.setFieldsValue({code:`IPJ-${String(I.length+1).padStart(6,"0")}`,status:1,organizationId:x}),C(!0)},children:"新增项目"})}),style:{height:"100%",display:"flex",flexDirection:"column"},bodyStyle:{padding:0,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:16},children:e.jsx(d,{rowKey:"code",columns:P,dataSource:I,size:"small",scroll:{x:1100,y:520},pagination:{pageSize:10}})}),e.jsx(s,{title:v?"编辑检验项目":"新增检验项目",width:520,open:g,onClose:f,destroyOnClose:!0,footer:e.jsxs(i,{style:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(r,{onClick:f,children:"取消"}),e.jsx(r,{type:"primary",onClick:async()=>{const e=await S.validateFields();v?(b(l=>l.map(l=>l.code===v.code?{...v,...e}:l)),m.success("已更新项目")):(b(l=>[{...e},...l]),m.success("已新增项目")),C(!1)},children:"保存"})]}),children:e.jsxs(a,{form:S,layout:"vertical",children:[e.jsx(a.Item,{label:"检测项目编码",name:"code",children:e.jsx(n,{disabled:!0})}),e.jsx(a.Item,{label:"检测项目名称",name:"name",rules:[{required:!0,message:"请输入检测项目名称"}],children:e.jsx(n,{maxLength:100,placeholder:"请输入项目名称"})}),e.jsx(a.Item,{label:"检测项目类型",name:"type",children:e.jsx(o,{options:h,allowClear:!0,placeholder:"请选择类型"})}),e.jsx(a.Item,{label:"标准检测项目",name:"standardProjectCode",children:e.jsx(o,{options:p,allowClear:!0,placeholder:"请选择标准项目"})}),e.jsx(a.Item,{label:"检测项目描述",name:"description",children:e.jsx(n.TextArea,{rows:3,maxLength:500,placeholder:"可选，填写项目描述"})}),e.jsx(a.Item,{label:"方法学",name:"methodologyCode",children:e.jsx(o,{options:u,allowClear:!0,placeholder:"请选择方法学"})}),e.jsx(a.Item,{label:"检验科室",name:"departmentId",children:e.jsx(o,{options:j,allowClear:!0,placeholder:"请选择科室"})}),e.jsx(a.Item,{label:"状态",name:"status",initialValue:1,children:e.jsx(o,{options:y})}),e.jsx(a.Item,{label:"组织",name:"organizationId",children:e.jsx(n,{disabled:!0})})]})})]})};export{x as default};
