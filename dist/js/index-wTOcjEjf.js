import{j as e}from"./index-BLG7Shib.js";import{r as t,h as i,i as l,N as r}from"./react-vendor-CntIoGE-.js";import{$ as s,T as a,a as n,B as d,a1 as c,V as o,a5 as m,a3 as h,a4 as x,at as p,S as u,s as j,X as g,ai as y,ak as I,al as v,an as S,k as f,ag as w,aq as A,I as C,u as q}from"./antd-vendor-D5rArj2z.js";const{Title:b}=a,{Option:k}=x,R=()=>{const[i,l]=t.useState([]),[r,a]=t.useState(!1),[S,f]=t.useState(!1),[w,A]=t.useState(null),[C]=s.useForm(),q=[{id:"1",name:"16S rRNA基因测序",code:"16S_SEQ",category:"微生物多样性",description:"细菌16S rRNA基因V3-V4区测序分析",price:800,duration:7,sampleTypes:["血液","粪便","唾液"],methodology:"Illumina NovaSeq",isActive:!0,createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"2",name:"ITS基因测序",code:"ITS_SEQ",category:"微生物多样性",description:"真菌ITS1-ITS2区域测序分析",price:900,duration:7,sampleTypes:["土壤","粪便"],methodology:"Illumina MiSeq",isActive:!0,createdAt:"2024-01-16",updatedAt:"2024-01-16"},{id:"3",name:"宏基因组测序",code:"WGS_META",category:"功能基因组",description:"全基因组鸟枪法测序",price:2500,duration:14,sampleTypes:["粪便","土壤"],methodology:"Illumina NovaSeq",isActive:!0,createdAt:"2024-01-17",updatedAt:"2024-01-17"},{id:"4",name:"代谢组学分析",code:"METABOLOME",category:"代谢分析",description:"非靶向代谢组学分析",price:3e3,duration:21,sampleTypes:["血液","尿液"],methodology:"LC-MS/MS",isActive:!1,createdAt:"2024-01-18",updatedAt:"2024-01-18"}],R=[{title:"项目名称",dataIndex:"name",key:"name",width:150},{title:"项目编码",dataIndex:"code",key:"code",width:120},{title:"分类",dataIndex:"category",key:"category",width:120},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"价格(元)",dataIndex:"price",key:"price",width:100,render:e=>`¥${e}`},{title:"周期(天)",dataIndex:"duration",key:"duration",width:80},{title:"适用样本",dataIndex:"sampleTypes",key:"sampleTypes",width:150,render:t=>e.jsx("div",{children:t.map(t=>e.jsx(g,{size:"small",style:{marginBottom:2},children:t},t))})},{title:"检测方法",dataIndex:"methodology",key:"methodology",width:120},{title:"状态",dataIndex:"isActive",key:"isActive",width:80,render:t=>e.jsx(g,{color:t?"green":"red",children:t?"启用":"禁用"})},{title:"操作",key:"action",width:120,render:(t,i)=>e.jsxs(u,{size:"small",children:[e.jsx(d,{type:"link",size:"small",icon:e.jsx(y,{}),onClick:()=>{return A(e=i),C.setFieldsValue(e),void f(!0);var e},children:"编辑"}),e.jsx(I,{title:"确定要删除这个检测项目吗？",onConfirm:()=>(async e=>{try{l(t=>t.filter(t=>t.id!==e)),j.success("删除成功")}catch(t){j.error("删除失败")}})(i.id),okText:"确定",cancelText:"取消",children:e.jsx(d,{type:"link",size:"small",danger:!0,icon:e.jsx(v,{}),children:"删除"})})]})}];return t.useEffect(()=>{(async()=>{a(!0);try{await new Promise(e=>setTimeout(e,500)),l(q)}catch(e){j.error("获取检测项目列表失败")}finally{a(!1)}})()},[]),e.jsxs("div",{children:[e.jsx(b,{level:3,style:{marginBottom:24},children:"检测项目管理"}),e.jsxs(n,{className:"content-card",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(d,{type:"primary",icon:e.jsx(c,{}),onClick:()=>{A(null),C.resetFields(),f(!0)},children:"新增检测项目"})}),e.jsx(o,{columns:R,dataSource:i,rowKey:"id",loading:r,pagination:{total:i.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},scroll:{x:1200}})]}),e.jsx(m,{title:w?"编辑检测项目":"新增检测项目",open:S,onCancel:()=>{f(!1),A(null),C.resetFields()},footer:null,width:700,children:e.jsxs(s,{form:C,layout:"vertical",onFinish:async e=>{try{if(w){const t={...w,...e,updatedAt:(new Date).toISOString().split("T")[0]};l(e=>e.map(e=>e.id===w.id?t:e)),j.success("检测项目更新成功")}else{const t={id:Date.now().toString(),...e,createdAt:(new Date).toISOString().split("T")[0],updatedAt:(new Date).toISOString().split("T")[0]};l(e=>[...e,t]),j.success("检测项目创建成功")}f(!1),A(null),C.resetFields()}catch(t){j.error("保存失败")}},children:[e.jsx(s.Item,{name:"name",label:"项目名称",rules:[{required:!0,message:"请输入项目名称"}],children:e.jsx(h,{placeholder:"请输入项目名称"})}),e.jsx(s.Item,{name:"code",label:"项目编码",rules:[{required:!0,message:"请输入项目编码"}],children:e.jsx(h,{placeholder:"请输入项目编码"})}),e.jsx(s.Item,{name:"category",label:"分类",rules:[{required:!0,message:"请选择分类"}],children:e.jsxs(x,{placeholder:"请选择分类",children:[e.jsx(k,{value:"微生物多样性",children:"微生物多样性"}),e.jsx(k,{value:"功能基因组",children:"功能基因组"}),e.jsx(k,{value:"代谢分析",children:"代谢分析"}),e.jsx(k,{value:"蛋白质组",children:"蛋白质组"}),e.jsx(k,{value:"其他",children:"其他"})]})}),e.jsx(s.Item,{name:"description",label:"描述",children:e.jsx(h.TextArea,{placeholder:"请输入项目描述",rows:3})}),e.jsx(s.Item,{name:"price",label:"价格(元)",rules:[{required:!0,message:"请输入价格"}],children:e.jsx(p,{placeholder:"请输入价格",min:0,style:{width:"100%"}})}),e.jsx(s.Item,{name:"duration",label:"检测周期(天)",rules:[{required:!0,message:"请输入检测周期"}],children:e.jsx(p,{placeholder:"请输入检测周期",min:1,style:{width:"100%"}})}),e.jsx(s.Item,{name:"sampleTypes",label:"适用样本类型",rules:[{required:!0,message:"请选择适用样本类型"}],children:e.jsxs(x,{mode:"multiple",placeholder:"请选择适用样本类型",allowClear:!0,children:[e.jsx(k,{value:"血液",children:"血液"}),e.jsx(k,{value:"唾液",children:"唾液"}),e.jsx(k,{value:"粪便",children:"粪便"}),e.jsx(k,{value:"土壤",children:"土壤"}),e.jsx(k,{value:"尿液",children:"尿液"}),e.jsx(k,{value:"其他",children:"其他"})]})}),e.jsx(s.Item,{name:"methodology",label:"检测方法",rules:[{required:!0,message:"请输入检测方法"}],children:e.jsx(h,{placeholder:"请输入检测方法"})}),e.jsx(s.Item,{name:"isActive",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(x,{placeholder:"请选择状态",children:[e.jsx(k,{value:!0,children:"启用"}),e.jsx(k,{value:!1,children:"禁用"})]})}),e.jsx(s.Item,{children:e.jsxs(u,{children:[e.jsx(d,{type:"primary",htmlType:"submit",children:"保存"}),e.jsx(d,{onClick:()=>{f(!1),A(null),C.resetFields()},children:"取消"})]})})]})})]})},{Option:T}=x,{TextArea:N}=h,D=()=>{const[i,l]=t.useState([{id:"1",name:"EGFR基因突变检测",code:"EGFR_MUT",testItemId:"1",testItemName:"肺癌基因检测",category:"基因突变",type:"qualitative",referenceRange:"野生型",normalValue:"未检出突变",abnormalCriteria:"检出突变",clinicalSignificance:"用于指导靶向治疗药物选择",methodologyId:"1",methodologyName:"NGS测序",sampleType:["血液","组织"],reportOrder:1,isActive:!0,isRequired:!0,description:"EGFR基因19、21外显子突变检测",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"2",name:"KRAS基因突变检测",code:"KRAS_MUT",testItemId:"1",testItemName:"肺癌基因检测",category:"基因突变",type:"qualitative",referenceRange:"野生型",normalValue:"未检出突变",abnormalCriteria:"检出突变",clinicalSignificance:"用于预测治疗反应性",methodologyId:"1",methodologyName:"NGS测序",sampleType:["血液","组织"],reportOrder:2,isActive:!0,isRequired:!1,description:"KRAS基因2、3、4外显子突变检测",createdAt:"2024-01-15",updatedAt:"2024-01-15"},{id:"3",name:"HER2基因扩增检测",code:"HER2_AMP",testItemId:"2",testItemName:"乳腺癌基因检测",category:"基因扩增",type:"quantitative",unit:"拷贝数",referenceRange:"<2.0",normalValue:"<2.0",abnormalCriteria:"≥2.0",clinicalSignificance:"用于HER2靶向治疗指导",methodologyId:"2",methodologyName:"qPCR",sampleType:["组织"],reportOrder:1,isActive:!0,isRequired:!0,description:"HER2基因拷贝数检测",createdAt:"2024-01-16",updatedAt:"2024-01-16"},{id:"4",name:"MSI微卫星不稳定性",code:"MSI_STATUS",testItemId:"3",testItemName:"结直肠癌基因检测",category:"微卫星",type:"qualitative",referenceRange:"MSS",normalValue:"MSS（微卫星稳定）",abnormalCriteria:"MSI-H（高度不稳定）",clinicalSignificance:"用于免疫治疗疗效预测",methodologyId:"1",methodologyName:"NGS测序",sampleType:["组织"],reportOrder:1,isActive:!0,isRequired:!0,description:"5个微卫星位点不稳定性检测",createdAt:"2024-01-17",updatedAt:"2024-01-17"}]),[r,a]=t.useState(!1),[C,q]=t.useState(null),[b]=s.useForm(),[k,R]=t.useState(""),D=e=>{q(e||null),e?b.setFieldsValue(e):b.resetFields(),a(!0)},P=i.filter(e=>e.name.toLowerCase().includes(k.toLowerCase())||e.code.toLowerCase().includes(k.toLowerCase())||e.testItemName.toLowerCase().includes(k.toLowerCase())),F=[{title:"项目名称",dataIndex:"name",key:"name",width:200,render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:i.code})]})},{title:"所属检测项目",dataIndex:"testItemName",key:"testItemName",width:150},{title:"类别",dataIndex:"category",key:"category",width:100},{title:"类型",dataIndex:"type",key:"type",width:100,render:t=>{const i={quantitative:{text:"定量",color:"blue"},qualitative:{text:"定性",color:"green"},"semi-quantitative":{text:"半定量",color:"orange"}}[t];return e.jsx(g,{color:i.color,children:i.text})}},{title:"参考范围",dataIndex:"referenceRange",key:"referenceRange",width:120,render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{children:t}),i.unit&&e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["单位: ",i.unit]})]})},{title:"方法学",dataIndex:"methodologyName",key:"methodologyName",width:100},{title:"样本类型",dataIndex:"sampleType",key:"sampleType",width:120,render:t=>e.jsx("div",{children:t.map(t=>e.jsx(g,{size:"small",children:t},t))})},{title:"报告顺序",dataIndex:"reportOrder",key:"reportOrder",width:80,align:"center"},{title:"状态",key:"status",width:100,render:t=>e.jsxs("div",{children:[e.jsx(g,{color:t.isActive?"green":"red",children:t.isActive?"启用":"禁用"}),t.isRequired&&e.jsx(g,{color:"orange",children:"必检"})]})},{title:"临床意义",dataIndex:"clinicalSignificance",key:"clinicalSignificance",width:200,ellipsis:{showTitle:!1},render:t=>e.jsx(w,{placement:"topLeft",title:t,children:t})},{title:"操作",key:"action",width:120,fixed:"right",render:t=>e.jsxs(u,{children:[e.jsx(d,{type:"link",icon:e.jsx(y,{}),onClick:()=>D(t),size:"small",children:"编辑"}),e.jsx(I,{title:"确定删除这个分析项目吗？",onConfirm:()=>{return e=t.id,l(t=>t.filter(t=>t.id!==e)),void j.success("分析项目删除成功");var e},okText:"确定",cancelText:"取消",icon:e.jsx(A,{style:{color:"red"}}),children:e.jsx(d,{type:"link",danger:!0,icon:e.jsx(v,{}),size:"small",children:"删除"})})]})}];return e.jsxs(n,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:e.jsx(h,{placeholder:"搜索分析项目名称、编码或所属检测项目",prefix:e.jsx(S,{}),value:k,onChange:e=>R(e.target.value),style:{width:300}})}),e.jsx(d,{type:"primary",icon:e.jsx(c,{}),onClick:()=>D(),children:"添加分析项目"})]}),e.jsx(o,{columns:F,dataSource:P,rowKey:"id",pagination:{total:P.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},scroll:{x:1400}}),e.jsx(m,{title:C?"编辑分析项目":"添加分析项目",open:r,onCancel:()=>a(!1),footer:null,width:800,children:e.jsxs(s,{form:b,layout:"vertical",onFinish:e=>{if(C)l(t=>t.map(t=>t.id===C.id?{...t,...e,updatedAt:(new Date).toISOString().split("T")[0]}:t)),j.success("分析项目更新成功");else{const t={...e,id:Date.now().toString(),createdAt:(new Date).toISOString().split("T")[0],updatedAt:(new Date).toISOString().split("T")[0]};l(e=>[...e,t]),j.success("分析项目添加成功")}a(!1),b.resetFields()},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsx(s.Item,{name:"name",label:"项目名称",rules:[{required:!0,message:"请输入项目名称"}],children:e.jsx(h,{placeholder:"请输入项目名称"})}),e.jsx(s.Item,{name:"code",label:"项目编码",rules:[{required:!0,message:"请输入项目编码"}],children:e.jsx(h,{placeholder:"请输入项目编码"})}),e.jsx(s.Item,{name:"testItemId",label:"所属检测项目",rules:[{required:!0,message:"请选择所属检测项目"}],children:e.jsxs(x,{placeholder:"请选择所属检测项目",children:[e.jsx(T,{value:"1",children:"肺癌基因检测"}),e.jsx(T,{value:"2",children:"乳腺癌基因检测"}),e.jsx(T,{value:"3",children:"结直肠癌基因检测"})]})}),e.jsx(s.Item,{name:"category",label:"项目类别",rules:[{required:!0,message:"请输入项目类别"}],children:e.jsx(h,{placeholder:"如：基因突变、基因扩增等"})}),e.jsx(s.Item,{name:"type",label:"检测类型",rules:[{required:!0,message:"请选择检测类型"}],children:e.jsxs(x,{placeholder:"请选择检测类型",children:[e.jsx(T,{value:"quantitative",children:"定量"}),e.jsx(T,{value:"qualitative",children:"定性"}),e.jsx(T,{value:"semi-quantitative",children:"半定量"})]})}),e.jsx(s.Item,{name:"unit",label:"单位",children:e.jsx(h,{placeholder:"如：拷贝数、ng/ml等"})}),e.jsx(s.Item,{name:"referenceRange",label:"参考范围",rules:[{required:!0,message:"请输入参考范围"}],children:e.jsx(h,{placeholder:"请输入参考范围"})}),e.jsx(s.Item,{name:"normalValue",label:"正常值",children:e.jsx(h,{placeholder:"请输入正常值描述"})}),e.jsx(s.Item,{name:"abnormalCriteria",label:"异常判断标准",children:e.jsx(h,{placeholder:"请输入异常判断标准"})}),e.jsx(s.Item,{name:"methodologyId",label:"检测方法学",rules:[{required:!0,message:"请选择检测方法学"}],children:e.jsxs(x,{placeholder:"请选择检测方法学",children:[e.jsx(T,{value:"1",children:"NGS测序"}),e.jsx(T,{value:"2",children:"qPCR"}),e.jsx(T,{value:"3",children:"Sanger测序"}),e.jsx(T,{value:"4",children:"FISH"})]})}),e.jsx(s.Item,{name:"sampleType",label:"适用样本类型",rules:[{required:!0,message:"请选择适用样本类型"}],children:e.jsxs(x,{mode:"multiple",placeholder:"请选择适用样本类型",children:[e.jsx(T,{value:"血液",children:"血液"}),e.jsx(T,{value:"组织",children:"组织"}),e.jsx(T,{value:"唾液",children:"唾液"}),e.jsx(T,{value:"尿液",children:"尿液"})]})}),e.jsx(s.Item,{name:"reportOrder",label:"报告顺序",rules:[{required:!0,message:"请输入报告顺序"}],children:e.jsx(p,{min:1,placeholder:"报告中的显示顺序",style:{width:"100%"}})})]}),e.jsx(s.Item,{name:"clinicalSignificance",label:"临床意义",rules:[{required:!0,message:"请输入临床意义"}],children:e.jsx(N,{rows:3,placeholder:"请描述该分析项目的临床意义"})}),e.jsx(s.Item,{name:"description",label:"项目描述",children:e.jsx(N,{rows:2,placeholder:"请输入项目详细描述"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsx(s.Item,{name:"isActive",label:"启用状态",valuePropName:"checked",initialValue:!0,children:e.jsx(f,{checkedChildren:"启用",unCheckedChildren:"禁用"})}),e.jsx(s.Item,{name:"isRequired",label:"是否必检",valuePropName:"checked",initialValue:!1,children:e.jsx(f,{checkedChildren:"必检",unCheckedChildren:"可选"})})]}),e.jsx(s.Item,{style:{marginBottom:0,textAlign:"right"},children:e.jsxs(u,{children:[e.jsx(d,{onClick:()=>a(!1),children:"取消"}),e.jsx(d,{type:"primary",htmlType:"submit",children:C?"更新":"添加"})]})})]})})]})},{Option:P}=x,{TextArea:F}=h,V=()=>{const[i,l]=t.useState([{id:"1",name:"二代测序技术（NGS）",code:"NGS_V2.1",category:"基因测序",principle:"基于合成测序技术，通过DNA聚合酶在模板链上合成互补链，同时检测每个碱基的加入",equipment:["Illumina NovaSeq 6000","Agilent 2100生物分析仪","离心机","移液器"],reagents:["NGS文库构建试剂盒","PCR扩增试剂","纯化磁珠","测序试剂"],sampleRequirement:"DNA浓度≥10ng/μL，总量≥100ng，A260/A280比值1.8-2.0",detectionRange:"1bp-10Mb基因组区域",sensitivity:"≥99%",specificity:"≥99.5%",precision:"CV≤5%",accuracy:"≥99%",linearRange:"10ng-1μg",detectionLimit:"5% VAF",procedureSteps:["DNA质量检测","文库构建","文库质控","上机测序","数据分析","结果解读"],qualityControl:"每批次包含阳性对照、阴性对照和质控样本",resultInterpretation:"根据变异频率和数据库注释进行临床意义评估",limitations:"无法检测大片段重排、重复序列区域检测能力有限",references:["PMID: 12345678","ISO 15189:2012","CAP分子病理学指南"],version:"V2.1",effectiveDate:"2024-01-01",reviewDate:"2024-12-31",approver:"张主任",isActive:!0,attachments:["NGS操作手册.pdf","质量控制SOP.pdf"],createdAt:"2024-01-01",updatedAt:"2024-01-15"},{id:"2",name:"实时荧光定量PCR（qPCR）",code:"qPCR_V1.3",category:"基因扩增",principle:"基于PCR扩增原理，通过荧光信号实时监测DNA扩增过程",equipment:["ABI 7500实时PCR仪","离心机","移液器","涡旋混合器"],reagents:["qPCR Master Mix","引物探针","DNA模板","ddH2O"],sampleRequirement:"DNA浓度1-100ng/μL，无蛋白质和RNA污染",detectionRange:"10-10^9拷贝数",sensitivity:"10拷贝/反应",specificity:"≥99%",precision:"CV≤3%",accuracy:"±0.2 Ct值",linearRange:"10^2-10^8拷贝数",detectionLimit:"10拷贝/反应",procedureSteps:["样本预处理","反应体系配制","PCR程序设置","扩增检测","结果分析"],qualityControl:"每次实验包含标准品、阳性对照、阴性对照",resultInterpretation:"根据Ct值和标准曲线计算拷贝数",limitations:"只能检测已知序列，扩增片段长度有限",references:["PMID: 87654321","MIQE指南","FDA qPCR指导原则"],version:"V1.3",effectiveDate:"2023-06-01",reviewDate:"2024-06-01",approver:"李博士",isActive:!0,attachments:["qPCR标准操作程序.pdf"],createdAt:"2023-06-01",updatedAt:"2024-01-10"},{id:"3",name:"Sanger测序",code:"SANGER_V1.0",category:"基因测序",principle:"基于链终止法的DNA测序技术，使用荧光标记的双脱氧核苷酸",equipment:["ABI 3730xl测序仪","PCR仪","离心机","电泳仪"],reagents:["BigDye测序试剂","PCR引物","DNA聚合酶","纯化试剂"],sampleRequirement:"PCR产物浓度10-50ng/μL，长度100-800bp",detectionRange:"100-800bp序列",sensitivity:"≥95%",specificity:"≥99%",precision:"Phred质量值≥20",accuracy:"≥99%",detectionLimit:"20% 杂合突变",procedureSteps:["PCR扩增","产物纯化","测序反应","产物纯化","毛细管电泳","序列分析"],qualityControl:"每批次包含已知序列对照",resultInterpretation:"通过序列比对识别变异位点",limitations:"通量低，成本高，无法检测大片段缺失",references:["PMID: 11111111","Sanger测序标准","ACMG指南"],version:"V1.0",effectiveDate:"2023-01-01",reviewDate:"2024-01-01",approver:"王教授",isActive:!0,createdAt:"2023-01-01",updatedAt:"2023-12-01"},{id:"4",name:"荧光原位杂交（FISH）",code:"FISH_V2.0",category:"细胞遗传学",principle:"使用荧光标记的DNA探针与目标序列杂交，显微镜下观察荧光信号",equipment:["荧光显微镜","杂交仪","离心机","水浴锅"],reagents:["FISH探针","杂交缓冲液","洗涤液","封片剂"],sampleRequirement:"新鲜组织切片或细胞悬液，厚度4-6μm",detectionRange:"染色体水平基因拷贝数变化",sensitivity:"≥90%",specificity:"≥95%",precision:"计数误差≤5%",accuracy:"≥90%",detectionLimit:"10%异常细胞",procedureSteps:["样本预处理","探针杂交","洗涤","荧光检测","信号计数","结果判读"],qualityControl:"每批次包含阳性和阴性对照切片",resultInterpretation:"根据荧光信号数量判断基因拷贝数状态",limitations:"分辨率有限，无法检测点突变",references:["PMID: 22222222","ASCO/CAP HER2指南","FISH标准操作程序"],version:"V2.0",effectiveDate:"2023-03-01",reviewDate:"2024-03-01",approver:"陈主任",isActive:!0,attachments:["FISH操作指南.pdf","质量控制标准.pdf"],createdAt:"2023-03-01",updatedAt:"2024-01-05"}]),[r,a]=t.useState(!1),[p,q]=t.useState(null),[b]=s.useForm(),[k,R]=t.useState(""),T=e=>{q(e||null),e?b.setFieldsValue({...e,procedureSteps:e.procedureSteps.join("\n"),references:e.references.join("\n")}):b.resetFields(),a(!0)},N=i.filter(e=>e.name.toLowerCase().includes(k.toLowerCase())||e.code.toLowerCase().includes(k.toLowerCase())||e.category.toLowerCase().includes(k.toLowerCase())),D=[{title:"方法学名称",dataIndex:"name",key:"name",width:200,render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:i.code})]})},{title:"类别",dataIndex:"category",key:"category",width:120,render:t=>e.jsx(g,{color:"blue",children:t})},{title:"版本",dataIndex:"version",key:"version",width:80,align:"center"},{title:"检测范围",dataIndex:"detectionRange",key:"detectionRange",width:150,ellipsis:{showTitle:!1},render:t=>e.jsx(w,{placement:"topLeft",title:t,children:t})},{title:"灵敏度",dataIndex:"sensitivity",key:"sensitivity",width:100,align:"center"},{title:"特异性",dataIndex:"specificity",key:"specificity",width:100,align:"center"},{title:"检测限",dataIndex:"detectionLimit",key:"detectionLimit",width:120,render:e=>e||"-"},{title:"生效日期",dataIndex:"effectiveDate",key:"effectiveDate",width:100,align:"center"},{title:"复审日期",dataIndex:"reviewDate",key:"reviewDate",width:100,align:"center"},{title:"审批人",dataIndex:"approver",key:"approver",width:100,align:"center"},{title:"状态",dataIndex:"isActive",key:"isActive",width:80,align:"center",render:t=>e.jsx(g,{color:t?"green":"red",children:t?"有效":"失效"})},{title:"附件",dataIndex:"attachments",key:"attachments",width:80,align:"center",render:t=>t&&t.length>0?e.jsx(w,{title:t.join(", "),children:e.jsx(C,{style:{color:"#1890ff"}})}):"-"},{title:"操作",key:"action",width:120,fixed:"right",render:t=>e.jsxs(u,{children:[e.jsx(d,{type:"link",icon:e.jsx(y,{}),onClick:()=>T(t),size:"small",children:"编辑"}),e.jsx(I,{title:"确定删除这个方法学吗？",onConfirm:()=>{return e=t.id,l(t=>t.filter(t=>t.id!==e)),void j.success("方法学删除成功");var e},okText:"确定",cancelText:"取消",icon:e.jsx(A,{style:{color:"red"}}),children:e.jsx(d,{type:"link",danger:!0,icon:e.jsx(v,{}),size:"small",children:"删除"})})]})}];return e.jsxs(n,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{children:e.jsx(h,{placeholder:"搜索方法学名称、编码或类别",prefix:e.jsx(S,{}),value:k,onChange:e=>R(e.target.value),style:{width:300}})}),e.jsx(d,{type:"primary",icon:e.jsx(c,{}),onClick:()=>T(),children:"添加方法学"})]}),e.jsx(o,{columns:D,dataSource:N,rowKey:"id",pagination:{total:N.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`},scroll:{x:1600}}),e.jsx(m,{title:p?"编辑方法学":"添加方法学",open:r,onCancel:()=>a(!1),footer:null,width:1e3,children:e.jsxs(s,{form:b,layout:"vertical",onFinish:e=>{const t={...e,procedureSteps:e.procedureSteps.split("\n").filter(e=>e.trim()),references:e.references.split("\n").filter(e=>e.trim())};if(p)l(e=>e.map(e=>e.id===p.id?{...e,...t,updatedAt:(new Date).toISOString().split("T")[0]}:e)),j.success("方法学更新成功");else{const e={...t,id:Date.now().toString(),createdAt:(new Date).toISOString().split("T")[0],updatedAt:(new Date).toISOString().split("T")[0]};l(t=>[...t,e]),j.success("方法学添加成功")}a(!1),b.resetFields()},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsx(s.Item,{name:"name",label:"方法学名称",rules:[{required:!0,message:"请输入方法学名称"}],children:e.jsx(h,{placeholder:"请输入方法学名称"})}),e.jsx(s.Item,{name:"code",label:"方法学编码",rules:[{required:!0,message:"请输入方法学编码"}],children:e.jsx(h,{placeholder:"请输入方法学编码"})}),e.jsx(s.Item,{name:"category",label:"方法学类别",rules:[{required:!0,message:"请选择方法学类别"}],children:e.jsxs(x,{placeholder:"请选择方法学类别",children:[e.jsx(P,{value:"基因测序",children:"基因测序"}),e.jsx(P,{value:"基因扩增",children:"基因扩增"}),e.jsx(P,{value:"细胞遗传学",children:"细胞遗传学"}),e.jsx(P,{value:"免疫学",children:"免疫学"}),e.jsx(P,{value:"生化检测",children:"生化检测"}),e.jsx(P,{value:"病理学",children:"病理学"})]})}),e.jsx(s.Item,{name:"version",label:"版本号",rules:[{required:!0,message:"请输入版本号"}],children:e.jsx(h,{placeholder:"如：V1.0"})}),e.jsx(s.Item,{name:"effectiveDate",label:"生效日期",rules:[{required:!0,message:"请选择生效日期"}],children:e.jsx(h,{type:"date"})}),e.jsx(s.Item,{name:"reviewDate",label:"复审日期",rules:[{required:!0,message:"请选择复审日期"}],children:e.jsx(h,{type:"date"})}),e.jsx(s.Item,{name:"approver",label:"审批人",rules:[{required:!0,message:"请输入审批人"}],children:e.jsx(h,{placeholder:"请输入审批人姓名"})}),e.jsx(s.Item,{name:"isActive",label:"状态",valuePropName:"checked",initialValue:!0,children:e.jsx(f,{checkedChildren:"有效",unCheckedChildren:"失效"})})]}),e.jsx(s.Item,{name:"principle",label:"检测原理",rules:[{required:!0,message:"请输入检测原理"}],children:e.jsx(F,{rows:3,placeholder:"请详细描述检测原理"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsx(s.Item,{name:"equipment",label:"所需设备",rules:[{required:!0,message:"请选择所需设备"}],children:e.jsxs(x,{mode:"tags",placeholder:"请输入或选择所需设备",children:[e.jsx(P,{value:"Illumina NovaSeq 6000",children:"Illumina NovaSeq 6000"}),e.jsx(P,{value:"ABI 7500实时PCR仪",children:"ABI 7500实时PCR仪"}),e.jsx(P,{value:"ABI 3730xl测序仪",children:"ABI 3730xl测序仪"}),e.jsx(P,{value:"荧光显微镜",children:"荧光显微镜"})]})}),e.jsx(s.Item,{name:"reagents",label:"所需试剂",rules:[{required:!0,message:"请选择所需试剂"}],children:e.jsx(x,{mode:"tags",placeholder:"请输入或选择所需试剂"})})]}),e.jsx(s.Item,{name:"sampleRequirement",label:"样本要求",rules:[{required:!0,message:"请输入样本要求"}],children:e.jsx(F,{rows:2,placeholder:"请描述样本的质量和数量要求"})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsx(s.Item,{name:"detectionRange",label:"检测范围",rules:[{required:!0,message:"请输入检测范围"}],children:e.jsx(h,{placeholder:"请输入检测范围"})}),e.jsx(s.Item,{name:"sensitivity",label:"灵敏度",rules:[{required:!0,message:"请输入灵敏度"}],children:e.jsx(h,{placeholder:"如：≥99%"})}),e.jsx(s.Item,{name:"specificity",label:"特异性",rules:[{required:!0,message:"请输入特异性"}],children:e.jsx(h,{placeholder:"如：≥99.5%"})}),e.jsx(s.Item,{name:"precision",label:"精密度",rules:[{required:!0,message:"请输入精密度"}],children:e.jsx(h,{placeholder:"如：CV≤5%"})}),e.jsx(s.Item,{name:"accuracy",label:"准确度",rules:[{required:!0,message:"请输入准确度"}],children:e.jsx(h,{placeholder:"如：≥99%"})}),e.jsx(s.Item,{name:"detectionLimit",label:"检测限",children:e.jsx(h,{placeholder:"如：5% VAF"})})]}),e.jsx(s.Item,{name:"linearRange",label:"线性范围",children:e.jsx(h,{placeholder:"如：10ng-1μg"})}),e.jsx(s.Item,{name:"procedureSteps",label:"操作步骤",rules:[{required:!0,message:"请输入操作步骤"}],children:e.jsx(F,{rows:4,placeholder:"请输入操作步骤，每行一个步骤"})}),e.jsx(s.Item,{name:"qualityControl",label:"质量控制",rules:[{required:!0,message:"请输入质量控制要求"}],children:e.jsx(F,{rows:2,placeholder:"请描述质量控制要求和标准"})}),e.jsx(s.Item,{name:"resultInterpretation",label:"结果解读",rules:[{required:!0,message:"请输入结果解读标准"}],children:e.jsx(F,{rows:2,placeholder:"请描述结果解读的标准和方法"})}),e.jsx(s.Item,{name:"limitations",label:"方法局限性",rules:[{required:!0,message:"请输入方法局限性"}],children:e.jsx(F,{rows:2,placeholder:"请描述该方法的局限性和注意事项"})}),e.jsx(s.Item,{name:"references",label:"参考文献",rules:[{required:!0,message:"请输入参考文献"}],children:e.jsx(F,{rows:3,placeholder:"请输入参考文献，每行一个文献"})}),e.jsx(s.Item,{style:{marginBottom:0,textAlign:"right"},children:e.jsxs(u,{children:[e.jsx(d,{onClick:()=>a(!1),children:"取消"}),e.jsx(d,{type:"primary",htmlType:"submit",children:p?"更新":"添加"})]})})]})})]})},L=()=>e.jsxs("div",{children:[e.jsxs(q,{style:{margin:"16px 0"},children:[e.jsx(q.Item,{children:"首页"}),e.jsx(q.Item,{children:"检测项目"})]}),e.jsxs(i,{children:[e.jsx(l,{index:!0,element:e.jsx(r,{to:"test-item",replace:!0})}),e.jsx(l,{path:"test-item",element:e.jsx(R,{})}),e.jsx(l,{path:"analysis-item",element:e.jsx(D,{})}),e.jsx(l,{path:"methodology",element:e.jsx(V,{})})]})]});export{L as default};
